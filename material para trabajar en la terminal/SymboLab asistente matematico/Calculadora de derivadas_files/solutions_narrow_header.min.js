(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a:a(jQuery)})(function(a){function b(t){var v=t||window.event,z=h.call(arguments,1),u=0,D=0,E=0,F=0;t=a.event.fix(v);t.type="mousewheel";"detail"in v&&(D=-1*v.detail);"wheelDelta"in v&&(D=v.wheelDelta);"wheelDeltaY"in v&&(D=v.wheelDeltaY);"wheelDeltaX"in v&&(u=-1*v.wheelDeltaX);"axis"in v&&v.axis===v.HORIZONTAL_AXIS&&(u=-1*D,D=0);var x=0===D?u:D;"deltaY"in v&&(x=D=-1*v.deltaY);"deltaX"in
v&&(u=v.deltaX,0===D&&(x=-1*u));if(0!==D||0!==u){if(1===v.deltaMode){var A=a.data(this,"mousewheel-line-height");x*=A;D*=A;u*=A}else 2===v.deltaMode&&(A=a.data(this,"mousewheel-page-height"),x*=A,D*=A,u*=A);A=Math.max(Math.abs(D),Math.abs(u));if(!l||A<l)l=A,r.settings.adjustOldDeltas&&"mousewheel"===v.type&&0===A%120&&(l/=40);r.settings.adjustOldDeltas&&"mousewheel"===v.type&&0===A%120&&(x/=40,u/=40,D/=40);x=Math[1<=x?"floor":"ceil"](x/l);u=Math[1<=u?"floor":"ceil"](u/l);D=Math[1<=D?"floor":"ceil"](D/
l);r.settings.normalizeOffset&&this.getBoundingClientRect&&(v=this.getBoundingClientRect(),E=t.clientX-v.left,F=t.clientY-v.top);t.deltaX=u;t.deltaY=D;t.deltaFactor=l;t.offsetX=E;t.offsetY=F;t.deltaMode=0;z.unshift(t,x,u,D);m&&clearTimeout(m);m=setTimeout(f,200);return(a.event.dispatch||a.event.handle).apply(this,z)}}function f(){l=null}var e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],g="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],
h=Array.prototype.slice,m,l;if(a.event.fixHooks)for(var n=e.length;n;)a.event.fixHooks[e[--n]]=a.event.mouseHooks;var r=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=g.length;t;)this.addEventListener(g[--t],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",r.getLineHeight(this));a.data(this,"mousewheel-page-height",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=g.length;t;)this.removeEventListener(g[--t],
b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height");a.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){t=a(t);var v=t["offsetParent"in a.fn?"offsetParent":"parent"]();v.length||(v=a("body"));return parseInt(v.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(t){return a(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},
unmousewheel:function(t){return this.unbind("mousewheel",t)}})});var Symbolab=function(a,b,f){this.params={};this.params.userId=a;this.params.query=b;this.params.language=f;this.init()};
Symbolab.prototype={init:function(){parseQueryParameters(this.params);$(".topnav ul li a").click(function(a){})},queryString:function(a){void 0==a&&(a={});a=$.extend({},this.params,a);var b=[],f;for(f in a){var e=a[f];""!=e&&b.push(f+"="+encodeURIComponent(e))}return b.join("&")},params:{},results:{},forwardSearch:function(a,b,f){if(""!==a){let e="/solver/";if("undefined"!=typeof SOLUTIONS&&""!==SOLUTIONS.page)e+=SOLUTIONS.page+"/";else{let g=window.location.pathname.split("/"),h="step-by-step";2<
g.length&&"solver"===g[1]&&""!==g[2]&&(h=g[2]);e+=h+"/"}e+=encodeURIComponent(a);b&&(e+="?or="+b);f?window.location=e:symbolab_log("Registration","ClickedFeature","ClickSuggest")}}};Symbolab.prototype.updateSolutionsUrl=function(){$("#solutionsTopNav a").attr("href","/solver/step-by-step/"+encodeURIComponent(this.params.query))};Symbolab.prototype.getTextLenScore=function(a){return(parseInt(a.textlen)+parseInt(a.eqlen))/1E5};
Symbolab.prototype.logRedirect=function(a,b,f,e){a={userId:this.params.userId,language:this.params.language,type:a,info1:b,info2:f,redirect:e};$("body").append($("<form/>",{id:"redirectPostForm",method:"POST",action:"/logRedirect"}));b=$("#redirectPostForm");for(var g in a)b.append($("<input/>",{type:"hidden",name:g,value:a[g]}));b.submit()};
Symbolab.prototype.showPopover=function(a,b,f){var e=this;a.popover({title:b,content:f,placement:"top",delay:{show:500,hide:5E3}}).popover("show");setInterval(function(){e.inputBox().popover("disable");e.inputBox().popover("hide")},4E3)};Symbolab.prototype.lastInsertedIsEquals=function(){var a=this.inputValue("latex");return a.indexOf("=")==a.length-1?1:0};
Symbolab.prototype.updateCalculation=function(){var a=this,b=a.inputValue("latex");a.calcmode||(a.calcmode="rad");0<=b.indexOf("=")&&(b=b.split("=")[0]);SYPAD.inputBox().mathquill("latex",b+" = ");$.ajax({type:"GET",url:Symbolab.paths.calculate,data:{query:b,radDeg:a.calcmode},error:function(f){a.showPopover(a.inputBox(),"Calculation Error","We ran into a problem calculating that. Try searching instead.")},success:function(f){void 0!=f.response&&"NA"!=f.response?a.appendInput(f.response):a.showPopover(a.inputBox(),
"Calculation Error","We ran into a problem calculating that. Try searching instead.")}})};
Symbolab.prototype.executeSearch=function(){var a=this.params.query;if(""!=a){a=a.replace(/\\(text|mbox)\s*{(.+?)}/g,"$2 ");a=a.replace(/\\:/g," ");a=a.replace(/\\left\\s*\(/g,"(");var b=a=a.replace(/\\right\\s*\)/g,")");this.params.query=a;""==a?(this.promptError("Cannot understand this query, please try a different query."),this.inputBox().mathquill("latex",prepareQueryForMathQuill(b))):0==this.currentPage()||100<this.currentPage()?this.promptError("Allowed page numbers are 1-100."):(this.inputBox().mathquill("latex",
prepareQueryForMathQuill(a)),$(".print-only .search-query").mathquill("latex",a),this.updateSolutionsUrl(),this.updateResults(),this.isScholar||this.updateStepsPlot())}};Symbolab.prototype.promptError=function(a){this.clearResults();document.title="Error - Symbolab Results";$("#ShareButtonsSection").prepend("<span class='errorMsg'>"+a+"</span>");$("#Refinements .scholar-refinements, #Refinements .web-refinements").hide();$("#Codepad .actions").hide()};
Symbolab.convert2html=function(a){a=a.replace(/</g,"&lt;");return a=a.replace(/>/g,"&gt;")};function url_domain(a){var b=document.createElement("a");b.href=a;return b.hostname}function htmlDecode(a){if(""==a)return a;var b=document.createElement("div");b.innerHTML=a;return b.childNodes[0].nodeValue}
Symbolab_toolbar_functions={Basic:{prepend:function(a,b){SYPAD.prependInput(b.data("prepend"),b.data("moveleft"))},append:function(a,b){SYPAD.appendInput(b.data("append"),b.data("moveleft"))},clear:function(){SYPAD.inputBox(!1).mathquill("latex","")}},Calc:{mode:function(a,b){void 0==SYPAD.calcmode&&(SYPAD.calcmode="rad");"deg"==symbolab.calcmode?(b.addClass("radmode"),SYPAD.calcmode="rad"):(b.removeClass("radmode"),SYPAD.calcmode="deg")},calculate:function(a,b){SYPAD.updateCalculation()},"x!":function(a,
b){SYPAD.appendInput("!")}}};
var SymbolabPad=function(a,b,f,e){this.language=a;this.customInputboxSelector=b;this.allowsSearching=f;void 0===e&&(e=!1);this.triggerOnKeyUpEvents=e;this.periodicTable=[["H",,,,"\\Rightarrow","O_{\\msquare}",,,,,,,,,,,,"He"],["Li","Be",,,,,,,,,,,"B","C","N","O","F","Ne"],["Na","Mg",,,,,,,,,,,"Al","Si","P","S","Cl","Ar"],"K Ca Sc Ti V Cr Mn Fe Co Ni Cu Zn Ga Ge As Se Br Kr".split(" "),"Rb Sr Y Zr Nb Mo Tc Ru Rh Pd Ag Cd In Sn Sb Te I Xe".split(" "),["Cs","Ba",,"Hf","Ta","W","Re","Os","Ir","Pt","Au",
"Hg","Tl","Pb","Bi","Po","At","Rn"],["Fr","Ra",,"Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Uut","Fl","Uup","Lv","Uus","Uuo"],[,,,,,,,,,,,,,,,,,],[,,"La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu"],[,,"Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr"]];this.elementNames={"\\Rightarrow":"Right arrow","O_{\\msquare}":"Underscore",H:"Hydrogen",He:"Helium",Li:"Lithium",Be:"Beryllium",B:"Boron",C:"Carbon",N:"Nitrogen",O:"Oxygen",F:"Fluorine",Ne:"Neon",
Na:"Sodium",Mg:"Magnesium",Al:"Aluminum",Si:"Silicon",P:"Phosphorus",S:"Sulfur",Cl:"Chlorine",Ar:"Argon",K:"Potassium",Ca:"Calcium",Sc:"Scandium",Ti:"Titanium",V:"Vanadium",Cr:"Chromium",Mn:"Manganese",Fe:"Iron",Co:"Cobalt",Ni:"Nickel",Cu:"Copper",Zn:"Zinc",Ga:"Gallium",Ge:"Germanium",As:"Arsenic",Se:"Selenium",Br:"Bromine",Kr:"Krypton",Rb:"Rubidium",Sr:"Strontium",Y:"Yttrium",Zr:"Zirconium",Nb:"Niobium",Mo:"Molybdenum",Tc:"Technetium",Ru:"Ruthenium",Rh:"Rhodium",Pd:"Palladium",Ag:"Silver",Cd:"Cadmium",
In:"Indium",Sn:"Tin",Sb:"Antimony",Te:"Tellurium",I:"Iodine",Xe:"Xenon",Cs:"Caesium",Ba:"Barium",Hf:"Hafnium",Ta:"Tantalum",W:"Tungsten",Re:"Rhenium",Os:"Osmium",Ir:"Iridium",Pt:"Platinum",Au:"Gold",Hg:"Mercury",Tl:"Thallium",Pb:"Lead",Bi:"Bismuth",Po:"Polonium",At:"Astatine",Rn:"Radon",Fr:"Francium",Ra:"Radium",Rf:"Rutherfordium",Db:"Dubnium",Sg:"Seaborgium",Bh:"Bohrium",Hs:"Hassium",Mt:"Meitnerium",Ds:"Darmstadtium",Rg:"Roentgenium",Cn:"Copernicium",Uut:"Ununtrium",Fl:"Flerovium",Uup:"Ununpentium",
Lv:"Livermorium",Uus:"Ununseptium",Uuo:"Ununoctium",La:"Lanthanum",Ce:"Cerium",Pr:"Praseodymium",Nd:"Neodymium",Pm:"Promethium",Sm:"Samarium",Eu:"Europium",Gd:"Gadolinium",Tb:"Terbium",Dy:"Dysprosium",Ho:"Holmium",Er:"Erbium",Tm:"Thulium",Yb:"Ytterbium",Lu:"Lutetium",Ac:"Actinium",Th:"Thorium",Pa:"Protactinium",U:"Uranium",Np:"Neptunium",Pu:"Plutonium",Am:"Americium",Cm:"Curium",Bk:"Berkelium",Cf:"Californium",Es:"Einsteinium",Fm:"Fermium",Md:"Mendelevium",No:"Nobelium",Lr:"Lawrencium"};this.init()};
SymbolabPad.prototype={init:function(){var a=this,b=$("body");b.click(function(f){0===$(f.target).closest(".keypanel").length&&a.selectChild("#CodePadSuggestions").hide();$("#tsUl").hide()});this.selectChild("button.search").click(function(f){a.initiateSearch()});b.off("click","#show_solution_and_steps").on("click","#show_solution_and_steps",function(){a.initiateSearch()});$("#input-and-go #main-input").keyup(function(f){13===f.keyCode&&a.initiateSearch()});b.on("click",'[class^="pad-toolbar-"]',
function(f){a.switchPad($(this));0<=this.className.indexOf("chemistry")&&a.createChemistryPad("#chemistryTable");f=$(this).attr("class").split(" ")[0].split("-")[2].capitalize();symbolab_log("Pad","KeyboardType",f)});b.on("click",".pad-button-matrix c",function(f){f=$(this).mathquill("latex");f=f.replace("\\left(","");f=f.replace("\\right)","");var e=f.split("\\times"),g=createMatrixLatex(e[0],e[1]);a.inputBox(!1).mathquill("write",g,e[0]*e[1]);a.inputBox(!1).focus();symbolab_log("Pad","Matrix","matrix:"+
f);return!1});this.selectChild(".padButton").each(function(f,e){f=$(e);e=f.attr("title");void 0!==e&&null!==e&&""!==e||f.attr("title",f.data("append"))});b.on("click",".equalsBtn",function(f){a.initiateSearch()});b.on("click",".radBtn",function(f){$(".radBtn").addClass("active");$(".degBtn").removeClass("active")});b.on("click",".degBtn",function(f){$(".radBtn").removeClass("active");$(".degBtn").addClass("active")});b.on("click",".clearBtn",function(f){a.replaceInput("")});b.off("click",".padButton:not(.disabled)").on("click",
".padButton:not(.disabled)",function(f){a.padButtonClick(this)});$("#toggle_mini_keypad, .toggle_mini_keypad").click(function(){const f=$(this),e=f.find("svg.open"),g=f.find("svg.close"),h=f.siblings("#mini_codepad, .mini_codepad");f.hasClass("open")?(f.removeClass("open"),g.fadeOut("fast",function(){e.show();h.slideUp()}),symbolab_log("Pad","CompactPad","Contract")):(f.addClass("open"),e.fadeOut("fast",function(){g.show();h.slideDown()}),symbolab_log("Pad","CompactPad","Expand"))});b.off("click",
"#see_all_text").on("click","#see_all_text",function(){$(".nl-padOperators").toggleClass("no-hover")});$("#see_all_span").on("mouseenter",function(){$(".nl-padOperators").removeClass("no-hover");$("#most_used_dropdown").scrollTop(0)});$.data(this,"timer",setTimeout(function(){a.setSeeAllDropdownHeight()},50));window.addEventListener("resize",function(){a.setSeeAllDropdownHeight()});b.off("click",".padSelect").on("click",".padSelect",function(){const f=$(this);a.padButtonClick(f);f.parent().addClass("no-hover");
setTimeout(function(){f.parent().removeClass("no-hover")},500)});b.off("click","#all-pads").on("click","#all-pads",function(f){0===$(f.target).closest("svg, .toggle_mini_keypad, .nl-padOperators-surround").length&&a.activeInputBox?.focus()});b.off("click",".edit-bar-spacer").on("click",".edit-bar-spacer",function(){$("#all-pads").hasClass("on")?a.activeInputBox.focus():$("#toggle-pad").click()});b.off("click","#toggle-pad").on("click","#toggle-pad",function(){const f=$("#all-pads").toggleClass("on").hasClass("on");
$("#toggle-pad").toggleClass("on",f);f?($("#all-pads").mathquill("redraw"),a.activeInputBox?.focus(),sendCTAPadEvent(),symbolab_log("General","Open Pad"),a.setSeeAllDropdownHeight()):symbolab_log("General","Close Pad")});b.off("click","#main-input").on("click","#main-input",function(f){0<$(f.originalEvent.target).parents("#toggle-pad").length||$("#all-pads").hasClass("on")||($("#all-pads").toggleClass("on"),$("#toggle-pad").toggleClass("on"),$("#all-pads").mathquill("redraw"),a.setSeeAllDropdownHeight(),
sendCTAPadEvent(),symbolab_log("General","Open Pad"))});b.off("focus.mathquill","#main-input.mathquill-editable").on("focus.mathquill","#main-input.mathquill-editable",function(){a.inputGotFocus()});b.off("click",".toggle-full-pad svg").on("click",".toggle-full-pad svg",f=>this.toggleFullPad())},inputGotFocus:function(){const a=$("#all-pads");a.hasClass("on")||(a.toggleClass("on"),$("#toggle-pad").toggleClass("on"),a.mathquill("redraw"),this.setSeeAllDropdownHeight(),sendCTAPadEvent(),symbolab_log("General",
"Open Pad"))},toggleFullPad:function(){dynamicLoadingManager.get("dynamic-codepad").then(()=>{$(".codepad-container").toggle();$("#widgetPad").toggleClass("hide");var a=$(".toggle-full-pad svg use").attr("href");$("#all-pads").mathquill("redraw");a="#toggle-full-keypad"===a?"#toggle-full-keypad-open":"#toggle-full-keypad";$(".toggle-full-pad svg use").attr("href",a);this.setSeeAllDropdownHeight();"#toggle-full-keypad"===a?($("#Compact").show(),symbolab_log("Solutions","switch","compact pad")):(symbolab_log("Solutions",
"switch","full pad"),a=$('[class^="pad-toolbar-"].active').attr("class").split(" ")[0].split("-")[2].capitalize(),symbolab_log("Pad","KeyboardType",a))})},setSeeAllDropdownHeight:function(){if(0<$("#see_all_text").length){let a=$(window).height()-$("#see_all_text").offset().top-$("#see_all_text").outerHeight()+$(window).scrollTop()-20;$("#most_used_dropdown").css("max-height",a+"px")}},sortSelect:function(a){var b=a.val(),f=a.find("option").sort(function(e,g){return 0==e.index?-1:0==g.index?1:e.text.localeCompare(g.text,
this.language,{sensitivity:"base"})});a.html(f).val(b)},appendButtonAndGetLogInfo:function(a){a=$(a);var b=a.parents("table:first"),f=a.data("function"),e=b.attr("id");a.data("clear")&&Symbolab_toolbar_functions.Basic.clear();if("undefined"!=typeof f){var g=f;Symbolab_toolbar_functions[e][f](symbolab,b,a)}else"undefined"!=typeof a.data("append")?(g=a.data("append"),Symbolab_toolbar_functions.Basic.append(b,a)):"undefined"!=typeof a.data("prepend")?(g=a.data("prepend"),Symbolab_toolbar_functions.Basic.prepend(b,
a)):g=$("#chemistryTable").is(":visible")?"Chemistry":$(".matrixTable").is(":visible")?"Matrix":a.attr("id");return[g,e]},padButtonClick:function(a){var b=this.appendButtonAndGetLogInfo(a);a=b[0];b=b[1];"/"!==window.location.pathname?symbolab_log("Pad",b,a):symbolab_log("MainPagePad",b,a);this.inputBox(!1).focus();return!1},switchPad:function(a){var b=a.attr("class").split(" ")[0].split("-")[2].capitalize(),f=SYPAD.selectChild("#"+b);SYPAD.selectChild("table.buttons:not(.nohide)").hide();"Chemistry"==
b||"Calculator"==b?SYPAD.selectChild("#Common.buttons").hide():SYPAD.selectChild("#Common.buttons").show();f.show();SYPAD.selectChild('[class^="pad-toolbar-"]').removeClass("active");a.addClass("active");SYPAD.currentToolbar=b;SYPAD.showAllButtons();$(".button-container .mathquill-embedded-latex").mathquill("redraw")},inputValue:function(a){a=this.inputBox(a).mathquill("latex");return this.cleanSearchPhrase(a)},cleanSearchPhrase:function(a){void 0!=a&&(a=a.replace(/\\:/g," "),a=a.replace(/(\^\{(.*?)\}|\^(.))/g,
"^{$2$3}"),a=a.replace(/(_\{(.*?)\}|_(.))/g,"_{$2$3}"));return a},initiateSearch:function(){var a=this;if(!a.searching&&(void 0===this.allowsSearching||this.allowsSearching)){var b=this.inputValue(!0);if(""===b)if(-1!==window.location.pathname.split("/")[1].indexOf("verify"))window.location.href="/solver";else return;searchInitiatedLog(b);if($("table#Calculator").is(":visible"))this.searching=!0,b=$(".radBtn").hasClass("active"),$.ajax({type:"GET",url:"/calculate",data:{query:SYPAD.inputValue(),isRad:b},
success:function(f){SYPAD.replaceInput(f.response)},complete:function(){a.searching=!1}});else{let f="input";this.suggestedQuery&&(f=b===this.suggestedQuery?"sug":"sugEdit");SYMBOLAB.forwardSearch(b,f,!0)}}},appendInput:function(a,b){if("undefined"!=typeof a){"undefined"==typeof b&&(b=0);var f=this.inputBox(!1).focus();f.mathquill("write",a+"",b).focus();"undefined"!=typeof SYSUGGEST&&void 0!=SYSUGGEST&&0==$("table#Calculator").is(":visible")&&SYSUGGEST.updateSuggestions(this.inputValue());"undefined"!=
typeof SYGRAPH&&SYGRAPH&&(SYGRAPH.updateGraphInputOverflow(f,!0),SYGRAPH.getJsonAndDraw(),SYGRAPH.unchangedSinceLoad=!1);this.triggerOnKeyUpEvents&&$(f).keyup()}},replaceInput:function(a){a=prepareQueryForMathQuill(a);this.inputBox(!1).mathquill("latex",a)},inputFromSuggest(){this.suggestedQuery=this.inputValue(!0)},selectChild:function(a){return $(a)},showCommonButtons:function(){this.selectChild(".codepadbody .buttons:not(.hide) tr").hide();this.selectChild(".codepadbody .buttons:not(.hide) tr:first").show();
this.selectChild("#Basic").hide()},showAllButtons:function(){this.selectChild(".codepadbody .buttons:not(.hide) tr").show()},inputBox:function(a){return void 0!==this.customInputboxSelector&&$(this.customInputboxSelector).is(":visible")?$(this.customInputboxSelector):a?$("#main-input"):null!=this.activeInputBox?this.activeInputBox:this.selectChild(".mathquill-editable:first")},inputBoxIndex:function(){var a=this.inputBox(!1);return $(".graph-input").index(a)},createChemistryPad:function(a){var b=
this;a=$(a);if(a.is(":empty")){for(var f="<tbody>",e=0;e<this.periodicTable.length;e++){f+="<tr>";for(var g=this.periodicTable[e],h=0;h<g.length;h++)f=g[h]?f+("<td class='atomInTable' title='"+b.elementNames[g[h]]+"'><span class='mathquill-embedded-latex'>\\mathrm{"+g[h]+"}</span></td>"):f+"<td class='noAtomInTable'></td>";f+="</tr>"}a.append(f+"</tbody>");a.find(".mathquill-embedded-latex").mathquill();$(".atomInTable").click(function(){var m=$(this).find(".mathquill-embedded-latex").mathquill("latex"),
l=0;0<m.indexOf("_")?(m="_",l=1):(m=m.replace("\\mathrm{",""),m=m.replace("}",""));b.inputBox(!1).mathquill("write",m,l);b.inputBox(!1).focus();symbolab_log("Pad","Chemistry",m)})}$(".solution-codepad-header span").html("\u00ab "+i18n("compact pad"));$("#Compact").hide();a.show();a.find(".mathquill-embedded-latex").mathquill("redraw")},createCalculatorPad:function(a){var b=this;a=$(a);if(a.is(":empty")){for(var f="<tbody>",e=0;e<this.periodicTable.length;e++){f+="<tr>";for(var g=this.periodicTable[e],
h=0;h<g.length;h++)f=g[h]?f+("<td class='atomInTable' title='"+b.elementNames[g[h]]+"'><span class='mathquill-embedded-latex'>\\mathrm{"+g[h]+"}</span></td>"):f+"<td class='noAtomInTable'></td>";f+="</tr>"}a.append(f+"</tbody>");a.find(".mathquill-embedded-latex").mathquill();$(".atomInTable").click(function(){var m=$(this).find(".mathquill-embedded-latex").mathquill("latex"),l=0;0<m.indexOf("_")?(m="_",l=1):(m=m.replace("\\mathrm{",""),m=m.replace("}",""));b.inputBox(!1).mathquill("write",m,l);b.inputBox(!1).focus();
symbolab_log("Pad","Chemistry",m)})}$(".solution-codepad-header span").html("\u00ab "+i18n("compact pad"));$("#Compact").hide();a.show();a.find(".mathquill-embedded-latex").mathquill("redraw")}};
class SyKeypad{constructor(a,b,f,e,g,h){function m(){setTimeout(()=>{$("#english-keypad div").css("height","auto");$("#mobile-keypad #keypad div.keypanel#english-keypad span").css("width","auto");$("#mobile-keypad #keypad div.keypanel#english-keypad span.shift").css("width","auto");$("#mobile-keypad #keypad div.keypanel#english-keypad span.blank").css("width","auto");$("#mobile-keypad #keypad div.keypanel#english-keypad span.space").css("width","auto");var n=$("#keypad-slide").height();$("#english-keypad div").height(n/
4-2);$("#mobile-keypad #keypad div.keypanel#english-keypad span").css("height","auto");n=$("#keypad-slide").width();var r=n/10-3;$("#mobile-keypad #keypad div.keypanel#english-keypad span").css("width",r);$("#mobile-keypad #keypad div.keypanel#english-keypad span.shift").css("width",2.1*r);$("#mobile-keypad #keypad div.keypanel#english-keypad span.blank").css("width",2.1*r);$("#mobile-keypad #keypad div.keypanel#english-keypad span.space").css("width",6.4*r);r=$("#english-keypad div").width();$("#english-keypad div").css("margin-right",
n-r)},0)}const l=this;this.root=a;this.isVerify=e;this.mainInputClickedCallback=g;this.mainInputVerifyClickedCallback=h;this.mainInputActiveCallback=g;this.colIndex=this.rowIndex=this.buttonsMap=null;$(".mathquill-editable:not(.mathquill-rendered-math)",a).mathquill("editable");this.inputBox=$("#main-input",a);this.inputBox.mathquill("placeholder","\\mathrm{"+i18n("Enter a Problem").replaceAll(" ","\\:")+"}");this.keypad=$("#keypad",a);this.keypad.off("touchstart","div.keypanel > span").on("touchstart",
"div.keypanel > span",n=>{this._resetHighlights();"#booleanAlgebraPad;#keywordsAlgebraPad;#keywordsCalculusPad;#trigPad;.greekKeyword .customMatrixDiv;#keywordsMatricesPad;#keywordsFXPad;#keywordsGeometryPad".split(";").every(r=>"block"!==$(r).css("display"))&&$(n.currentTarget).addClass("touch")});this.keypad.off("click","div.keypanel span").on("click","div.keypanel span",n=>{this._resetHighlights();const r=$(n.currentTarget).closest(".keypanel").hasClass("uppercase");$(n.currentTarget).hasClass("shift")&&
(r?($(n.currentTarget).closest(".keypanel").removeClass("uppercase"),$(n.currentTarget).find("svg#not-pressed").show(),$(n.currentTarget).find("svg#pressed").hide()):($(n.currentTarget).closest(".keypanel").addClass("uppercase"),$(n.currentTarget).find("svg#not-pressed").hide(),$(n.currentTarget).find("svg#pressed").show()));this._padButtonClick(n.currentTarget,r);void 0!==this.mainInputActiveCallback&&this.mainInputActiveCallback();""===$("#main-input").mathquill("latex")?($("#input-camera").show(),
$("#scan-to-solve-and-decoration",a).show(),$("#paper-airplane").hide()):$("#input-camera").hide()});$("#paper-airplane").off("click").on("click",function(){l._go()});e=$("body");e.on("touchend touchcancel",()=>this._resetHighlights());e.off("focus.mathquill",".mathquill-editable").on("focus.mathquill",".mathquill-editable",()=>{this.keypad.hasClass("hide-important")?(this.keypad.removeClass("hide-important"),m(),0>window.location.href.indexOf("query")&&!0!==this.isVerify&&setTimeout(()=>{$("#mobile-keypad")[0].scrollIntoView({block:"start",
behavior:"smooth"})},100),$("#paper-airplane").hide()):$("#keypad:hover")});e.off("click","#keypad-close").on("click","#keypad-close",function(){l.keypad.addClass("hide-important");""!==$("#main-input").mathquill("latex")?$("#paper-airplane").show():($("#input-camera").show(),$("#scan-to-solve-and-decoration",a).show())});e.off("click","#mobile-space-above-keypad").on("click","#mobile-space-above-keypad",function(){$(this).parent().parent().find("#keypad").hasClass("hide-important")||($(this).parent().parent().find("#keypad").addClass("hide-important"),
""!==$("#main-input").mathquill("latex")&&$("#paper-airplane").show())});$("#keypad-slide",a).on("scroll",function(n){20>Math.abs(n.target.scrollLeft%n.target.offsetWidth)&&(n=Math.floor(n.target.scrollLeft/n.target.offsetWidth),$("#keypad_scroll_indicators span",a).removeClass("selected").eq(n).addClass("selected"),2===n&&null===l.buttonsMap&&l._loadButtonsMap())});$("body").off("click","#keypad_scroll_indicators > div > span").on("click","#keypad_scroll_indicators > div > span",function(){2===$(this).index()&&
null===l.buttonsMap&&l._loadButtonsMap()});$("#keypad_scroll_indicators > div > span").off("click").on("click",function(){if(!$(this).hasClass("selected")){var n=$("#keypad-slide").width()*$(this).index();$("#keypad-slide").addClass("animate").animate({scrollLeft:n},"slow",function(){$("#keypad-slide").removeClass("animate")});$("#keypad_scroll_indicators > div > span",a).removeClass("selected");$(this).addClass("selected")}});$("textarea",a).attr("inputmode","none");m();window.addEventListener("resize",
function(){m()});if(void 0!==b)$(b).off("click").on("click",function(){l.inputBox.attr("id")!==$(this).attr("id")&&(l.inputBox=$(this),l.keypad.addClass("hide-important"),l.mainInputActiveCallback=l.mainInputClickedCallback)});if(void 0!==f)$(f).off("click").on("click",function(){l.inputBox.attr("id")!=$(this).attr("id")&&(l.inputBox=$(this),l.keypad.addClass("hide-important"),l.mainInputActiveCallback=l.mainInputVerifyClickedCallback)})}_loadButtonsMap(){const a=this;fetch("/public/buttons_map.json").then(b=>
{if(!b.ok)throw Error("Network response was not ok "+b.statusText);return b.json()}).then(b=>{a.buttonsMap=b}).catch(b=>{symbolab_log("Pad",`Communication error when loading buttons_map.json: ${b.message}`)})}_cleanSearchPhrase(a){void 0!==a&&(a=a.replace(/\\:/g," "),a=a.replace(/(\^\{(.*?)\}|\^(.))/g,"^{$2$3}"),a=a.replace(/(_\{(.*?)\}|_(.))/g,"_{$2$3}"));return a}_command(a){switch(a.data("command")){case "backspace":this._backspace();break;case "moveleft":this._moveLeft();break;case "moveright":this._moveRight();
break;case "newline":this._newLine();break;case "go":this._go()}}_backspace(){""!==this.inputBox.mathquill("latex")&&this.inputBox.mathquill("backspace")}_moveLeft(){this.inputBox.mathquill("moveleft")}_moveRight(){this.inputBox.mathquill("moveright")}_go(){var a=this.inputBox.mathquill("latex");a=this._cleanSearchPhrase(a);a=encodeURIComponent(a);window.location.href="/solver/step-by-step/"+a+"?or=input"}_newLine(){var a=this.inputBox.mathquill("latex");let b=0;const f=!!a.match(/^\s*[fy][\s\w\\()]*=/i);
if(0<=a.indexOf("\\begin{cases}")){const e=a.match(/(.*?)(\\begin{cases}.+?)(\\end{cases}.*)/i);e&&(a=e[1]+e[2]+(f?" \\\\ & ":" \\\\ ")+e[3],b=f?2:1)}else f?(symbolab_log("Pad","NewlineType","Function"),a+=" \\begin{cases} & \\\\ & \\end{cases}",b=4):(symbolab_log("Pad","NewlineType","SoE"),a+=" \\begin{cases} \\\\ \\end{cases}",b=2);this.inputBox.mathquill("latex","");this.inputBox.mathquill("write",a,b)}_appendInput(a,b){b=b?a.data("append").toUpperCase():a.data("append");a=a.data("moveleft");void 0!==
b&&(void 0===a&&(a=0),this.inputBox.mathquill("write",b+"",a))}_padButtonClick(a,b){b=this._appendButtonAndGetLogInfo(a,b);a=b[0];b=b[1];"/"!==window.location.pathname?symbolab_log("Pad",b,a):symbolab_log("MainPagePad",b,a);this.inputBox.focus();return!1}_appendButtonAndGetLogInfo(a,b){a=$(a);const f=a.parents(".keypanel:first").attr("id");a.data("clear")&&this.inputBox.mathquill("latex","");let e;void 0!==a.data("append")?(e=b?a.data("append").toUpperCase():a.data("append"),this._appendInput(a,b)):
void 0!==a.data("command")&&(e=a.data("command"),this._command(a));return[e,f]}_resetHighlights(){$("div.keypanel span",this.keypad).removeClass("touch")}createCustomMatrixMobile(a){const b=this;if(!a.hasClass("title")||"block"!==$("#compactPadMatrix").css("display")){b.rowIndex=null;b.colIndex=null;a.empty();a.append("<div class='title'>"+i18n("matrix-select-size")+" <span class='customMatrixDimensions'></span></div>");a.append("<span class='closeCustomMatrix'><div>"+i18n("matrix-close")+"</div></span>");
var f="<div class='matrixTable' style='padding-right: 0 !important; '><table>";for(let e=0;6>e;e++){f+="<tr>";for(let g=0;6>g;g++)f+="<td class='customMatrixTd'/>";f+="</tr>"}a.append(f+"</table></div>");a.append("<div class='okCustomMatrix'><button>"+i18n("OK")+"</button></div>");a.show();$(".customMatrixTd").click(function(){$(".customMatrixTd").removeClass("on");b.colIndex=$(this).parent().children().index($(this))+1;b.rowIndex=$(this).parent().parent().children().index($(this).parent())+1;for(let e=
0;e<b.rowIndex;e++){let g=$(this).parent().parent().children().eq(e);for(let h=0;h<b.colIndex;h++)g.children().eq(h).addClass("on").addClass("on1")}$(".customMatrixDimensions").text(b.rowIndex+"x"+b.colIndex)});$(".okCustomMatrix").click(function(){let e=createMatrixLatex(b.rowIndex,b.colIndex);a.empty();a.hide();if(null===b.rowIndex)return!1;"undefined"!=typeof SYPAD?(SYPAD.inputBox().mathquill("write",e,b.rowIndex*b.colIndex),SYPAD.inputBox().focus()):($(".mathquill-editable").mathquill("write",
e,b.rowIndex*b.colIndex),$(".mathquill-editable").focus());$("#input-camera").hide();$("#keypad_scroll_indicators:first-child svg.selected").click();return!1});$(".customMatrixDiv").click(function(e){e.preventDefault()});a.find(".closeCustomMatrix").click(function(){a.hide();return!1})}}createCustomMobileKeypad(a,b){a.empty();$(".closeCustomMatrix").click();var f="",e="";let g="",h,m,l=[];"Boolean Algebra"===b?(f="keypad_u",h=3,m=4,l=[{symbol:"\\cup",svgHref:"#keypad_boolean_algebra_cap_up"},{symbol:"\\cap",
svgHref:"#keypad_boolean_algebra_cap_down"},{symbol:"\\subset",svgHref:"#keypad_boolean_algebra_subset"},{symbol:"\\superset",svgHref:"#keypad_boolean_algebra_superset"},{symbol:"\\subseteq",svgHref:"#keypad_boolean_algebra_subset_underlined"},{symbol:"\\superseteq",svgHref:"#keypad_boolean_algebra_superset_underlined"},{symbol:"\\varnothing",svgHref:"#keypad_boolean_algebra_empty_set"},{symbol:"^{c}",svgHref:"#keypad_boolean_algebra_empty_set_2"},{symbol:"\\vee",svgHref:"#keypad_boolean_algebra_vee"},
{symbol:"\\wedge",svgHref:"#keypad_boolean_algebra_wedge"},{symbol:"\\neg",svgHref:"#keypad_boolean_algebra_neg"},{symbol:"\\oplus",svgHref:"#keypad_boolean_algebra_oplus"}]):(f="keypad_greek",e="keypadGreek",g="greekButton",m=h=6,l=[{symbol:"\\alpha",display:"\u03b1"},{symbol:"\\beta",display:"\u03b2"},{symbol:"\\gamma",display:"\u03b3"},{symbol:"\\delta",display:"\u03b4"},{symbol:"\\epsilon",display:"\u03b5"},{symbol:"\\zeta",display:"\u03b6"},{symbol:"\\eta",display:"\u03b7"},{symbol:"\\theta",
display:"\u03b8"},{symbol:"\\iota",display:"\u03b9"},{symbol:"\\kappa",display:"\u03ba"},{symbol:"\\lambda",display:"\u03bb"},{symbol:"\\mu",display:"\u03bc"},{symbol:"\\nu",display:"\u03bd"},{symbol:"\\xi",display:"\u03be"},{symbol:"o",display:"\u03bf"},{symbol:"\\pi",display:"\u03c0"},{symbol:"\\rho",display:"\u03c1"},{symbol:"\\sigma",display:"\u03c3"},{symbol:"\\tau",display:"\u03c4"},{symbol:"\\upsilon",display:"\u03c5"},{symbol:"\\varphi",display:"\u03c6"},{symbol:"\\chi",display:"\u03c7"},
{symbol:"\\psi",display:"\u03c8"},{symbol:"\\omega",display:"\u03c9"},{symbol:"\\Gamma",display:"\u0393"},{symbol:"\\Delta",display:"\u0394"},{symbol:"\\Theta",display:"\u0398"},{symbol:"\\Lambda",display:"\u039b"},{symbol:"\\Xi",display:"\u039e"},{symbol:"\\Pi",display:"\u03a0"},{symbol:"",display:""},{symbol:"\\Sigma",display:"\u03a3"},{symbol:"\\Phi",display:"\u03a6"},{symbol:"\\Psi",display:"\u03a8"},{symbol:"\\Omega",display:"\u03a9"},{symbol:"",display:""}]);var n=$("<div />",{id:"titleBooleanWrapper"});
"keypad_u"===f?n.append('<span><svg id="'+e+'"><use href="#keypad_u"></use></svg></span>'):n.append('<span><svg id="'+e+'"><use href="#keypad_greek"></use></svg></span>');n.append(`<div class='titleBoolean'>${i18n(b)}<span class='customMatrixDimensions'></span></div>`);n.append("<span class='closeCustomMatrix'><svg><use href='#close-svg'></use></svg></span>");a.append(n);a.append("<div id='selectSystem'>"+i18n("Select a system")+"</div>");b="<div class='matrixTable' style='padding-right: 0 !important;'><table>";
for(f=0;f<h;f++){b+="<tr>";for(e=0;e<m;e++)b+="<td class='customMatrixTd "+g+"'>",n=f*m+e,l[n]&&(b+=`<span data-append="${l[n].symbol}">${l[n].display||`<svg><use href="${l[n].svgHref}"></use></svg>`}</span>`),b+="</td>";b+="</tr>"}a.append(b+"</table></div>");a.show();$(".customMatrixTd").click(function(){$(".customMatrixTd").removeClass("on");$("#input-camera").hide();a.hide();const r=$(this).find("span").data("append");"undefined"!=typeof SYPAD?(SYPAD.inputBox().mathquill("write",r,0),SYPAD.inputBox().focus()):
($(".mathquill-editable").mathquill("write",r,0),$(".mathquill-editable").focus());return!1});$(".customMatrixDiv").click(function(r){r.preventDefault()});a.find(".closeCustomMatrix").click(function(){a.hide();return!1})}createCustomKeywordsMobile(a,b){$(".closeCustomMatrix").click();let f;"algebra"===b?f="simplify;solve for;factor;expand;partial fractions;long division;synthetic division;prove;rationalize;complete the square;lcm;gcf;standard deviation;mean;median;mode;variance;scientific;or;and".split(";"):
"geometry"===b?f="slope;line;distance;midpoint;parallel;perpendicular;slope intercept;area;circumference;radius;center;foci;axis;vertices;directrix;eccentricity".split(";"):"calculus"===b?f="laplace;inverse laplace;volume;area;implicit derivative;tangent;normal;substitution;trigonometric substitution int;by parts int;arc length;taylor;fourier;linear approximation;riemann;simpson;trapezoidal;l'hopital;function average;absolute convergence;separable;linear;bernoulli;exact;gradient".split(";"):"matrices"===
b?f="row echelon;gauss jordan;eigenvectors;eigenvalues;diagonalize;transpose;inverse matrix;minors;cofactors;characteristic polynomial;rank;determinant;trace;angle;adjoint;projection;unit;scalar projection".split(";"):"functions"===b?f="domain;range;inverse function;asymptotes;critical points;extreme points;inflection points;intercepts;monotone intervals;parity;symmetry;periodicity;shift;amplitude;holes;end behavior;concavity;discontinuity".split(";"):"functions"===b?f="domain;range;inverse function;asymptotes;critical points;extreme points;inflection points;intercepts;monotone intervals;parity;symmetry;periodicity;shift;amplitude;holes;end behavior;concavity;discontinuity".split(";"):
"trig"===b&&(f="sin cos tan cot sec csc sinh cosh tanh coth sech arcsin arccos arctan arccot arcsec arcscs arcsinh arccosh arctanh arccoth arcsech".split(" "));a.empty();var e=$("<div />",{id:"titleBooleanWrapper"});e.append("<span></span>");e.append("<div class='titleBoolean'>"+i18n(b.charAt(0).toUpperCase()+b.slice(1))+":<span class='customMatrixDimensions'></span></div>");e.append("<span class='closeCustomMatrix'><svg><use href='#close-svg'></use></svg></span>");a.append(e);e="<div class='KeywordsLine'>";
for(let g=0;g<f.length;g++){let h,m;"trig"!==b&&null!==this.buttonsMap?(h=this.buttonsMap[f[g]].display[SYPAD.language],m=this.buttonsMap[f[g]].input[SYPAD.language]):(h=f[g],m=f[g]);void 0===m&&(m=h);m=m.replaceAll(" ","\\:");e+='<div data-append="'+m+'">'+h+"</div>"}a.append(e);a.show();$(".KeywordsLine div").click(function(g){$(".customMatrixTd").removeClass("on");$("#input-camera").hide();a.hide();const h=$(this).data("append");"undefined"!=typeof SYPAD?(SYPAD.inputBox().mathquill("write",h,0),
SYPAD.inputBox().focus(),SYSUGGEST_OBJ.onClick(g)):($(".mathquill-editable").mathquill("write",h,0),$(".mathquill-editable").focus());return!1});$(".customMatrixDiv").click(function(g){g.preventDefault()});a.find(".closeCustomMatrix").click(function(){a.hide();return!1})}}
class SyCamera{constructor(a,b,f,e,g,h,m){this._baseReason=a;this._curLang=b;this._page=f;this._debugMode=e;this._body=$("body");this._container=$("#video");this._cropContainer=$("#crop_handle_container");this._animationCanvas=$("#bar_animation");this._imageArea=$("#user-image");this._oneCorner=$("#crop_top_left");this._cameraSuccessCallback=h;this._fileInputTargetSelector=m;this._cameraButtonSelector=void 0===g?"#input-camera":g;this._wholeTouchY=this._wholeTouchX=0;this._logInfo=null;this.logName=
"verify"===f?"Verify":"Solver";a=a.split("\t");"Web"===a[0]&&(this.logName=this._logInfo=a[1]);0<=window.location.hash.indexOf("camera")&&(a=window.location.href.replace(/#.*/,""),window.history.replaceState({},document.title,a));this._setupCameraClick();window.onhashchange=()=>{"#camera"!==window.location.hash&&this._closeCamera()};$("#video :not(#crop_handle_container)").off("click").on("click",l=>{0===$("#user-image:hover").length&&0===$("#shutter_container:hover").length&&0===$("#crop_handle_container:hover").length&&
0===$("#video-close-bt:hover").length&&null!==this._logInfo&&(l.preventDefault(),l.stopPropagation(),symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tCancelCrop"),this._closeCamera())});$("#video-close-btn").off("click").on("click",l=>{null===this._logInfo&&symbolab_log("Registration","ClickedFeature","Solver\tImageDialog\tCancelCrop")})}_setupCameraClick(){const a=this,b=new FileReader;var f=$("#file-input-target");void 0!==a._fileInputTargetSelector&&(f=$(a._fileInputTargetSelector));
f.empty();const e=$('<input type="file"\n\t\t\t\t\t\t\t\t  capture="environment"\n\t\t\t\t\t\t\t\t  accept="image/*">');f.append(e);e.on("change",()=>{const l=e[0].files[0];l&&(b.addEventListener("load",()=>{const n=new Image;n.src=b.result;n.onload=()=>{symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tChoose");$("#user-image").attr("src",b.result);this._openCamera(n.width,n.height)};n.onerror=()=>{setTimeout(function(){a._setupCameraClick();symbolab_log("Registration","ClickedFeature",
a.logName+"\tImageDialog\tInvalid")},50);const r=i18n("Please open a valid image file");dialogify().dialogId("image-dialog").message(r).showOkDialog()}}),b.readAsDataURL(l))});let g=!1;const h=function(){g=!0},m=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;f=$(this._cameraButtonSelector);f.removeClass("hide-important");f.off("click").on("click",l=>{l.preventDefault();g=!1;window.addEventListener("blur",h);e.click();symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tOpen");
setTimeout(()=>{m||g||dialogify().message("Images are unavailable in this browser or device!").showOkDialog();window.removeEventListener("blur",h)},800)});$("#scan-to-solve").off("click").on("click",l=>{l.preventDefault();e.click()});$("#decoration svg").off("click").on("click",l=>{l.preventDefault();e.click()})}_openCamera(a,b){window.location.hash="#camera";this._sessionId=this._uuidSessionId();this._body.addClass("no-scroll");const f=$("#video");f.removeClass("hide-important");this._cropPositionMove(0,
0);$("#user-image").css("aspect-ratio",""+a+"/"+b);f.off("touchstart").on("touchstart",h=>{const m=$(h.originalEvent.target),l=m.closest(".crop-corner");0<l.length?(e=l.data("corner"),g=!1,this._handleTouchStart(h)):0<m.closest("#crop_handle_container").length&&(e=-1,g=!0,this._cropMove(h,!1,!1))});f.off("touchend").on("touchend",h=>{e=-1;g=!1});let e=-1,g=!1;f.off("mousedown").on("mousedown",h=>{const m=$(h.originalEvent.target),l=m.closest(".crop-corner");0<l.length?(e=l.data("corner"),g=!1,this._handleTouchStart(h)):
0<m.closest("#crop_handle_container").length&&(g=!0,e=-1,this._cropMove(h,!1,!1))});f.off("mouseup").on("mouseup",h=>{e=-1;g=!1});f.off("mousemove").on("mousemove",h=>{h.buttons&1&&0<=e?this._handleTouchMove(h,e):g&&this._cropMove(h,h.buttons&1,h.buttons&1)});f.off("touchmove").on("touchmove",h=>{0<=e?this._handleTouchMove(h,e):g&&this._cropMove(h,!0,!0)});$("#shutter").off("click").on("click",async()=>{await this._doCapture(a,b)});window.addEventListener("resize",()=>{this._cropPositionMove(0,0)});
this._ready=!0}_cropMove(a,b,f){!(0<$(a.originalEvent.target).closest(".crop-corner").length)&&(b&&(a.preventDefault(),a.stopPropagation()),a=void 0!==a.originalEvent.touches?a.originalEvent.touches[0]:a.originalEvent)&&(f&&this._entireCropWindowMove(a.clientX,a.clientY,this._wholeTouchX,this._wholeTouchY),this._wholeTouchX=a.clientX,this._wholeTouchY=a.clientY)}_closeCamera(){this._debugLog("Closing camera");$("#video").addClass("hide-important");$("#user-image").removeAttr("src");this._setupCameraClick();
$("#latex-result").addClass("hide-important");$("#store-prompt").addClass("hide-important");this._animationCanvas.addClass("hide-important");this._body.removeClass("no-scroll")}_uuidSessionId(){return"SNAP-xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const b=16*Math.random()|0;return("x"===a?b:b&3|8).toString(16)})}_entireCropWindowMove(a,b,f,e){const g=this._imageArea.height(),h=this._container.width();var m=this._imageArea.offset();const l=this._imageArea.offsetParent().offset(),
n=this._cropContainer.width(),r=this._cropContainer.height();var t=this._cropContainer.offset();const v=t.left;t=t.top-l.top;m=Math.round(m.top-l.top);a=v+(a-f);b=t+(b-e);n+a>h?a=v:0>a&&(a=v);r+b>g+m?b=t:b<m&&(b=t);a=Math.round(a);b=Math.round(b);this._cropContainer.css({left:a+"px",top:b+"px"});this._debugLog("Move entire crop container to left: "+a+", top: "+b)}_cropPositionMove(a,b,f,e,g){const h=this._imageArea.height(),m=this._container.width(),l=this._imageArea.offset(),n=this._imageArea.offsetParent().offset(),
r=2*this._oneCorner.width(),t=1.2*this._oneCorner.height(),v=this._cropContainer.width(),z=this._cropContainer.height(),u=this._cropContainer.offset(),D=u.left,E=u.top-n.top,F=Math.round(l.top-n.top);this._debugLog("totalHeight="+h+", totalWidth="+m+", imageOffse.top="+l.top+", imageContainerOffset.top="+n.top+", minWidth="+r+", minHeight="+t+"prevW="+v+", prevH="+z+", offset.top="+u.top+", prevL="+D+", prevT="+E);let x,A,p,q;if(0===a&&0===b)x=300,A=200,p=(m-x)/2,q=(h-A)/2+F,this._debugLog("initial case: w = 300, h = 200, l="+
p+", t="+q);else{a-=f;b-=e;switch(g){case 0:p=D+a;x=v-a;q=E+b;A=z-b;break;case 1:p=D;x=v+a;q=E+b;A=z-b;break;case 2:p=D;x=v+a;q=E;A=z+b;break;case 3:p=D+a,x=v-a,q=E,A=z+b}this._debugLog("diff: dx="+a+", dy="+b+", l="+p+", w="+x+", t="+q+",h "+A)}x+p>m?(x=m-p,x<r&&(x=r,p=m-x),this._debugLog("-> clamp to edge: w="+x+",l="+p)):0>p&&(p=D,x=v,this._debugLog("-> l < 0: w="+x+",l="+p));A+q>h+F?(A=h+F-q,A<t&&(q=h+F-A),this._debugLog("-> h + t > totalHeight + topBound: h="+A+",t= "+q)):q<F&&(q=E,A=z,this._debugLog("-> t < topBound): h="+
A+",t= "+q));x<r&&(x=v,p=D,this._debugLog("-> w < minWidth: w="+x+", l="+p));A<t&&(A=z,q=E,this._debugLog("-> h < minHeight: h="+A+", t="+q));x=Math.round(x);A=Math.round(A);p=Math.round(p);q=Math.round(q);this._cropContainer.css({left:p+"px",top:q+"px",width:x+"px",height:A+"px"});this._animationCanvas[0].width=x;this._animationCanvas[0].height=A;this._debugLog("animation size: w="+x+", h="+A)}_handleTouchStart(a){this._debugLog(a.originalEvent.clientX+";"+a.originalEvent.clientY);if(a=void 0!==
a.originalEvent.touches?a.originalEvent.touches[0]:a.originalEvent)this._currentX=a.clientX,this._currentY=a.clientY;this._debugLog("Touch start")}_handleTouchMove(a,b){a.preventDefault();a.stopPropagation();this._debugLog("corner="+b+": x="+a.originalEvent.clientX+";t="+a.originalEvent.clientY+", x="+a.clientX+";y="+a.clientY+"; initial x="+this._currentX+", initial y="+this._currentY);if(a=void 0!==a.originalEvent.touches?a.originalEvent.touches[0]:a.originalEvent)this._cropPositionMove(a.clientX,
a.clientY,this._currentX,this._currentY,b),this._currentX=a.clientX,this._currentY=a.clientY}async _doCapture(a,b){if(this._ready){this._ready=!1;this._animationCanvas.removeClass("hide-important");var f=$("#image-canvas")[0],e=$("#user-image"),g=$("#crop_handle_container");a=e.width()/a;b=e.height()/b;f.width=g.width()/a;f.height=g.height()/b;g=g.offset();var h=e.offset(),m=g.left-h.left;h=g.top-h.top;g=f.getContext("2d");g.drawImage(e[0],m/a,h/b,f.width,f.height,0,0,f.width,f.height);e=g.getImageData(0,
0,g.canvas.width,g.canvas.height);a=e.data;for(b=0;b<a.length;b+=4)m=parseInt((a[b]+a[b+1]+a[b+2])/3),a[b]=m,a[b+1]=m,a[b+2]=m;g.putImageData(e,0,0);e=f.toDataURL("image/jpeg",.85);this._debugMode&&($("#debug-image")[0].src=e);f=new FormData;e=this._dataURIToBlob(e);a=this._getSequence();g=("0000"+a).slice(-4)+".jpg";f.append("data",e,g);this._putSequence((a+1)%5E3);e=this._debugMode?"debug":"";this._animationCanvas.addClass("hide-important");$("#ocr_spinner").removeClass("hide-important");try{const l=
await securedAjax({type:"POST",url:"/api/getLatex?mode="+e+"&sessionid="+this._sessionId+"&language="+this._curLang,data:f,processData:!1,contentType:!1});this._handleSuccess(l)}catch(l){symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tError"),this._debugLog(l),this._showError(i18n("js.connectivity_error")),$("#ocr_spinner").addClass("hide-important")}}}_debugLog(a){this._debugMode&&console.log(a)}_dataURIToBlob(a){var b=a.split(",");a=0<=b[0].indexOf("base64")?atob(b[1]):
decodeURI(b[1]);b=b[0].split(":")[1].split(";")[0];const f=new Uint8Array(a.length);for(let e=0;e<a.length;e++)f[e]=a.charCodeAt(e);return new Blob([f],{type:b})}_putSequence(a){getLocalStorage().setItem("sequence",JSON.stringify(a))}_getSequence(){const a=getLocalStorage().getItem("sequence");return void 0===a?0:JSON.parse(a)}_setupShutterSoundAndPlay(){this._audioAlreadySetUp?this._playShutterSound():(this._audioAlreadySetUp=!0,this._context=new AudioContext,window.fetch("/public/audio/shutter.wav").then(a=>
a.arrayBuffer()).then(a=>this._context.decodeAudioData(a)).then(a=>{this._shutterBuffer=a;this._playShutterSound()}).catch(a=>{this._debugLog("Failed to get shutter sound: "+a)}))}_playShutterSound(){if(this._shutterBuffer){var a=this._context.createBufferSource();a.buffer=this._shutterBuffer;var b=this._context.createGain();b.gain.value=.5;b.connect(this._context.destination);a.connect(b);a.start()}}_handleSuccess(a){a.success?(symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tCrop"),
this._cameraSuccessCallback?a.latex&&(window.location.hash="",this._cameraSuccessCallback(a.latex)):(this._ready=!0,a=encodeURIComponent(a.latex),window.location.href="/solver/"+this._page+"/"+a+"?or=crop")):(symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tError"),this._showError(a.user_message));$("#ocr_spinner").addClass("hide-important")}_showError(a){void 0===a&&(a=i18n("js.connectivity_error"));null===this._logInfo?$("#toast-contents").text(a).removeClass("hide-important").show().delay(2E3).fadeOut():
dialogify().dialogId("image-dialog").message(a).showOkDialog();this._ready=!0}}class ClsManager{constructor(){this.stages={}}register(a,b){this.stages[a]=b}handle(a,b){this.stages[a]?.(b)}show(a){$((a??"")+".hide-until-loaded").removeClass("hide-until-loaded")}}var StructuredGeometry=function(a){this.query=a;this.supported=!1;this.parsedObject={};this.parse()};
StructuredGeometry.prototype={parse:function(){var a=this.query.match(/^(equilateral triangle|square|circle), find (perimeter|area given side|area|circumference), given (.+?)$/i);if(a){var b={};a[3].split(",").forEach(function(f){f=f.split("=");b[f[0]]=f[1]});this.parsedObject={entity:a[1],find:a[2],givens:b};this.supported=!0}},shouldGenerateLinkForQuery:function(){return this.supported}};var SymbolabEquationSuggest=function(a){this.dontShowCameraWhenEmpty=a;this.init()};
window.addEventListener("orientationchange",function(){mobileCodePadSuggestionsSize()});function mobileCodePadSuggestionsSize(){setTimeout(function(){let a=$(".input-and-button").width();0===a?a=screen.width-48:"none"!==$("#input-camera").css("display")&&(a+=$("#input-camera").innerWidth());$(".mobile #CodePadSuggestions").css("min-width",a+"px").css("width",a+"px").css("margin-top","-13px")},50)}
SymbolabEquationSuggest.prototype={init:function(){const a=this;$("body.mobile").on("click","div.keypanel span",b=>{a.onClick(b)});$("#main-input").keyup(function(b){a.onClick(b)});mobileCodePadSuggestionsSize()},onClick:function(a){const b=this;if(37===a.keyCode||39===a.keyCode||$("table#Calculator").is(":visible"))return!1;if(38===a.keyCode)$("#CodePadSuggestions").is(":visible")&&b.moveSuggestion(-1);else if(40===a.keyCode)$("#CodePadSuggestions").is(":visible")&&b.moveSuggestion(1);else if(27===
a.keyCode)b.selectChild("#CodePadSuggestions").hide();else{const f=SYPAD.inputValue("latex");setTimeout(function(){const e=SYPAD.inputValue("latex");""===e?(b.dontShowCameraWhenEmpty||($("#input-camera").css("visibility","visible"),$(".mobile #scan-to-solve-and-decoration").show()),$("#CodePadSuggestions").hide()):(b.dontShowCameraWhenEmpty||$("#input-camera").css("visibility","hidden"),$(".mobile #scan-to-solve-and-decoration").hide(),f===e&&b.updateSuggestions(e))},50)}},moveSuggestion:function(a){var b,
f=$("#CodePadSuggestions li.active");0>a&&0===f.length||(0===f.length?b=$("#CodePadSuggestions li:first"):1===a?b=f.next():-1===a&&(b=f.prev()),0!==b.length&&(this.highlightSuggestion(f,b,!0),SYPAD.inputBox().focus()))},highlightSuggestion:function(a,b,f){a&&a.removeClass("active");b.addClass("active");f&&(SYPAD.replaceInput(b.attr("title")),SYPAD.inputFromSuggest())},clearSuggestions:function(a){a=$("#CodePadSuggestions");a.find("li").remove();a.hide()},updateSuggestions:function(a){if(!this.updatingSuggestions&&
!this.disable_suggestions){this.updatingSuggestions=!0;var b=this,f=$("#CodePadSuggestions");$.ajax({type:"GET",url:"/suggest",data:{userId:SYMBOLAB.params.userId,connected:SYMBOLAB.params.connected,language:SYMBOLAB.params.language,query:a},error:function(e){b.updatingSuggestions=!1;f.hide()},success:function(e){b.clearSuggestions();if(void 0===e||0===e.length)f.hide(),b.updatingSuggestions=!1;else{for(var g in e)b.addSuggestion(e[g].display);f.show();b.updatingSuggestions=!1;f.find(".mathquill-embedded-latex:not(.mathquill-rendered-math)").mathquill();
f.find("li").hover(function(h){const m=$("#CodePadSuggestions li.active");h=$(h.currentTarget);b.highlightSuggestion(m,h,!1)});f.find("li").click(function(h){var m=f.find("li.active");h=$(h.currentTarget);b.highlightSuggestion(m,h,!0);"undefined"!=typeof widget&&1===widget?makeWidgetSearch():(m=SYPAD.inputValue("latex"),SYMBOLAB.forwardSearch(m,"sug",!1))})}}})}},addSuggestion:function(a){a=prepareQueryForMathQuill(a);$("#CodePadSuggestions").append('<li title="'+a+'"><div class="mathquill-embedded-latex"">'+
a+"</div></li>")}};function createAndDownloadPDF(){symbolab_log("Registration","ClickedFeature","Solver\tPDF");window.print()}function printSolutionPage(){symbolab_log("Registration","ClickedFeature","Solver\tPrint");window.print()}var Solutions=function(a,b,f,e,g,h,m,l){this.subject=a;this.page=b;this.query=f;this.input=e;this.input_back=g;this.appLangs=h;this.curLang=m;this.subscribed="true"==l;this.subjectUl;this.installBehavior();this.subjectSuggestions=this.activeSuggestionIndex=0};
Solutions.prototype={init:function(a){this.updatePage(a);void 0!==SYPAD&&"/solver/word-problems-calculator"===window.location.pathname&&SYPAD.inputBox().mathquill("placeholder","\\mathrm{Enter\\:your\\:word\\:problem}");jQuery(document).bind("keydown",function(b){if((b.metaKey||b.ctrlKey)&&80===b.keyCode)return printSolutionPage(),!1});$("#itunesLink").click(function(){symbolab_log("Solutions","iOSLink")});$(".viewLargerPlot").click(function(b){b.preventDefault();b=$(this).attr("href");symbolab_log("Registration",
"ClickedFeature","Solver\tViewLargerPlot");window.location=b});$("#androidLink").click(function(){symbolab_log("Solutions","AndroidLink")});$(".embedPost").click(function(){symbolab_log("Solutions","Blog",$(this).find(".post_title").text())});1===$(".structuredWhat").size()&&$(".structuredWhat").click()},updatePage:function(a){0<=this.page.indexOf("chemi")&&"undefined"!==typeof SOLUTIONS?(SOLUTIONS.switchPad(i18n("full pad")),setTimeout(function(){$(".pad-toolbar-chemistry").click()},500)):(0<=this.page.indexOf("matrix")||
0<=this.page.indexOf("linear-algebra"))&&"undefined"!==typeof SOLUTIONS?(SOLUTIONS.switchPad(i18n("full pad")),setTimeout(function(){$(".pad-toolbar-matrix").click()},500)):(0<=this.page.indexOf("boolean")||0<=this.page.indexOf("set-theory")||0<=this.page.indexOf("truth-table")||0<=this.page.indexOf("logical-sets"))&&"undefined"!==typeof SOLUTIONS?(SOLUTIONS.switchPad(i18n("full pad")),$(".pad-toolbar-accents").click()):(0<=this.page.indexOf("triangle")||0<=this.page.indexOf("quadrilateral")||0<=
this.page.indexOf("trapezoid")||0<=this.page.indexOf("parallelogram")||0<=this.page.indexOf("parallelogram")||0<=this.page.indexOf("rhombus")||0<=this.page.indexOf("rectangle")||0<=this.page.indexOf("square")||0<=this.page.indexOf("law-of")||0<=this.page.indexOf("line-intersection"))&&showPointOfInterest("#structuredTop","<a class=\"clickable\" onclick=\"$.when(symbolab_log('Geometry', 'StructuredTooltip')).always(function() { window.location='/geometry'; });\">"+i18n("js.Geometry Structured Tooltip")+
"</a>",{side:"bottom"});this.updateMenu();""===this.query&&(this.input&&void 0!==SYPAD&&SYPAD.inputBox().mathquill("write",this.input.replace(/&amp;/g,"&"),this.input_back),0<=this.page.indexOf("system-of-equations")&&$(".as300").insertAfter("#Examples"));(this.query||!this.subscribed||0<$("#guideLink").size())&&$("#ExamplesLink").show();this.query&&($("#steps-loading").show(),this.doSolve(a))},updateMenu:function(){var a=this;""!==a.page&&("calculus-calculator"===a.page||"pre-algebra-calculator"===
a.page||"algebra-calculator"===a.page||"linear-algebra-calculator"===a.page||"functions-graphing-calculator"===a.page||"geometry-calculator"===a.page?$(".ma").eq(0).click():$(".nl-leftNav li a").each(function(b){if(0<=$(this).attr("href").indexOf("/"+a.page)){$(this).addClass("active");b=$(this).parents("li");for(var f=b.length-1;0<=f;f--)b.eq(f).find(".ma").eq(0).click()}}))},doSolve:function(a){var b=this.query;SYMBOLAB.params.query=b;""==b?(SYMBOLAB.inputBox().mathquill("latex",this.query),SYMBOLAB.promptError("Cannot understand this query, please try a different query.")):
(b=prepareQueryForMathQuill(b),void 0!=SYPAD&&SYPAD.inputBox().mathquill("latex",b),SYSTEPS.updateStepsPlot(!1,this.page,a),$(".show-hide-plot").text("\u00ab "+i18n("hide plot")),$("#steps-container").show(),$("#steps-container").find(".mathquill-embedded-latex").mathquill("redraw"))},switchPad:function(a,b){b||=".pad-toolbar-basic";if(0<=a.indexOf(i18n("full pad"))){symbolab_log("Pad","switch","full pad");var f=$(".codepad-container"),e=$.Deferred();0<f.size()?e.resolve():$.get("/full_pad",null,
function(g){g=g.replace("&{'Basic'}",i18n("Basic"));g=g.replace("&{'Radians'}",i18n("Radians"));g=g.replace("&{'Degrees'}",i18n("Degrees"));g=g.replace("&{'clear'}",i18n("clear"));$(g).insertAfter("#widgetPad");f=$(".codepad-container");e.resolve()},"html");$.whenAll(e).done(function(){f.find(".mathquill-embedded-latex:not(.mathquill-rendered-math)").mathquill();f.show();$(".codepad-container-small").hide();$(".solution-codepad-header span").html("\u00ab "+i18n("compact pad"));void 0!=SYPAD&&$(b).click();
f.mathquill("redraw")})}else symbolab_log("Pad","switch","compact pad"),$(".codepad-container").hide(),$("#chemistryTable2").hide(),$(".codepad-container-small").show(),$("#widgetPad").show(),$("#Compact").show(),$("#widgetPad").mathquill("redraw"),$(".solution-codepad-header span").html(i18n("full pad")+" \u00bb")},parseQueryParameters:function(){for(var a,b=/([^&=]+)=?([^&]*)/g,f=window.location.search.substring(1);a=b.exec(f);)this.params[decodeURIComponent(a[1])]=decodeURIComponent(a[2])},doStructuredSearch:function(){query=
$("#structured_subtopic").text()+", find "+$(".selectedWhat").text()+", given ";$(".givenDiv:visible .oneGiven").each(function(){var a=$(this).find(".givenLabel").text(),b=$(this).find(".mathquill-editable").mathquill("latex");b||="0";var f=$(this).find(".chosen").text();query+=a+"="+b+f+","});query=query.replace(/,$/,"");window.location="/solver/"+this.page+"/"+encodeURIComponent(query)},doConversionSearch:function(){query="convert "+$("#convInput").mathquill("latex")+" "+$("#convertFrom .same-as-selected").data("group")+
" to "+$("#convertTo .same-as-selected").data("group");query=query.replace(/,$/,"");window.location="/solver/"+this.page+"/"+encodeURIComponent(query)},populateGivenStructure:function(){if(this.query){var a=this;$(".givenDiv .mathquill-editable").mathquill("latex","");var b=/.+?, find (.+?), given (.+)/;a.structuredWhat=this.query.match(b)[1];$(".structuredWhat").filter(function(){return $(this).text()===a.structuredWhat}).click();b=this.query.match(b)[2].split(",");this.fixGivenArray(b);$(".givenDiv:visible .oneGiven .typeTD").removeClass("chosen");
for(var f=0;f<b.length;f++){var e=b[f];if(""!=e){e.match(/(.+?)=.*/);var g=e.match(/.+?=(.*)/)[1];$(".givenDiv:visible .oneGiven").eq(f).find(".typeTD").each(function(){var h=$(this).text();if((new RegExp("[^a-z]"+h+"$")).test(g))return g=g.replace(h,""),$(this).addClass("chosen"),!1});$(".givenDiv:visible .mathquill-editable").eq(f).mathquill("latex",g)}}}},populateConversions:function(){if(this.query){var a=this.query.match(/^convert (.+?) (.+?) to (.+?)$/);$("#convInput").mathquill("latex",a[1]);
groupSelectSelected($("#convertFrom .select-items div[data-group='"+a[2]+"']"));groupSelectSelected($("#convertTo .select-items div[data-group='"+a[3]+"']"))}else groupSelectSelected($("#convertFrom .select-items div").eq(0)),groupSelectSelected($("#convertTo .select-items div").eq(1))},fixGivenArray:function(a){for(var b=0;b<a.length;b++){var f=a[b];""!=f&&0>f.indexOf("=")&&(a[b-1]=a[b-1]+","+f,a.splice(b,1),b--)}},installBehavior:function(){var a=this;isUserLoggedIn()&&1==a.subscribed&&$("#click-capture").addClass("click-capture-subscribed");
$("body").on("click","#click-capture",function(){if(!isUserLoggedIn()||0==_.subscribed)return showSignUpSubscribe("Solver\tVerify"),!1});$("body").on("click",".toggle_interim img",function(f){$(f.currentTarget).parent().parent().find(".solution_title_container").click()});$(".nl-topSubMenu a").click(function(){syMenu("Top",$(this).attr("href"))});$(".nl-leftMenu").click(function(){syMenu("Left",$(this).attr("href"))});var b=a.subject;""==b&&(b="algebra");b=a.page;""==b&&(b="equation-calculator");
$(".interPageLink").click(function(f){symbolab_log("Solutions","PageLinkClick",$(f.currentTarget).text())});$(".btn-custom.search").text(i18n("go button"));$("#fullPadLink").click(function(f){a.switchPad(f.currentTarget.innerHTML);isUserLoggedIn()?showPointOfInterest("#fullPadLink",i18n("js.set preferred pad here")):createSignupTooltipOnly($("#fullPadLink"),"#fullPadLink","SolverPadSwitch",i18n("js.to set your preferred pad"),"top")});$("button.structured_search").click(function(f){a.doStructuredSearch()});
$("button.convert_search").click(function(f){a.doConversionSearch()});$("#verify-input").unbind("keyup").keyup(function(f){13===(f.charCode?f.charCode:f.keyCode)&&a.verify($(this).parent().find("button"),"SolutionPage",a.query)});$(".verify-button").click(function(f){a.verify($(this),"SolutionPage",a.query)});$(".structuredWhat").click(function(){$(".structuredWhat").removeClass("selectedWhat");$(this).addClass("selectedWhat");var f=$(this).text();$(".givenDiv").hide();var e=$(this).attr("data");
$(e).show();$(e).find(".mathquill-editable").eq(0).focus();$(e).find(".mathquill-editable").each(function(){var g=$(this).attr("placeholder");g&&$(this).mathquill("placeholder",g)});(e=$(e).find(".hidden-image").text())&&$("#structuredTop .structured_image").attr("src",e);$("#multipleSolutions").toggle(f===a.structuredWhat)});$(".typeTD").click(function(){$(this).siblings().removeClass("chosen");$(this).addClass("chosen")});$(".sprite_pad_input.structured").tooltipster({theme:"tooltipster-light",
trigger:"click",arrow:!1,side:"top",functionPosition:function(f,e,g){g.coord.left-=150;return g},interactive:!0,functionBefore:function(f,e){var g=$('<table id="buttonsTable" class="noselect"><tbody><tr><td class="padButton new-pad-button font16" data-append="^" data-moveleft="1"><span class="mathquill-embedded-latex">x^{\\msquare}</span></td><td class="padButton new-pad-button font16" data-append="_" data-moveleft="1"><span class="mathquill-embedded-latex">x_{\\msquare}</span></td><td class="padButton new-pad-button font16" data-append="\\frac{}{}" data-moveleft="2"><span class="mathquill-embedded-latex">\\frac{\\msquare}{\\msquare}</span></td><td class="padButton new-pad-button font16" data-append="\\sqrt" data-moveleft="1"><span class="mathquill-embedded-latex">\\sqrt{\\square}</span></td><td class="padButton new-pad-button font16" data-append="\\pi" data-moveleft="0"><span class="mathquill-embedded-latex">\\pi</span></td></tr></tbody></table>');
g.find(".mathquill-embedded-latex").mathquill();void 0!=SYPAD&&(SYPAD.activeInputBox=$(e.origin).parents(".givenInput").find(".mathquill-editable"));f.content(g);$(e.origin).removeClass("sprite_pad_input");$(e.origin).addClass("sprite_pad_input_green")},functionAfter:function(f,e){$(e.origin).addClass("sprite_pad_input");$(e.origin).removeClass("sprite_pad_input_green")}});$(".sprite_pad_input.converters").tooltipster({theme:"tooltipster-light",trigger:"click",arrow:!1,side:"top",interactive:!0,functionBefore:function(f,
e){var g=$('<table id="buttonsTable" class="noselect"><tbody><tr><td class="padButton new-pad-button font16" data-append="^" data-moveleft="1"><span class="mathquill-embedded-latex">x^{\\msquare}</span></td><td class="padButton new-pad-button font16" data-append="\\frac{}{}" data-moveleft="2"><span class="mathquill-embedded-latex">\\frac{\\msquare}{\\msquare}</span></td><td class="padButton new-pad-button font16" data-append="\\sqrt" data-moveleft="1"><span class="mathquill-embedded-latex">\\sqrt{\\square}</span></td></tr></tbody></table>');
g.find(".mathquill-embedded-latex").mathquill();g.find(".padButton").click(function(){SYPAD.padButtonClick(this)});void 0!=SYPAD&&(SYPAD.activeInputBox=$(e.origin).parents(".givenInput").find(".mathquill-editable"));f.content(g);$(e.origin).removeClass("sprite_pad_input");$(e.origin).addClass("sprite_pad_input_green")},functionAfter:function(f,e){$(e.origin).addClass("sprite_pad_input");$(e.origin).removeClass("sprite_pad_input_green")}});$(".arrow_right").click(function(f){f=f.currentTarget;var e=
f.childNodes[0].childNodes[0],g=!1;let h=$(f).parent().next("ul");0<$(e).attr("href").indexOf("arrow_right-svg")&&(g=!0);$(f).closest("ul").eq(0).find("ul").hide();$(f).closest("ul").eq(0).find(".arrow_right svg use").attr("href","#arrow_right-svg");g&&($(e).attr("href","#arrow_down-svg"),h.eq(0).removeClass("hide"),h.eq(0).slideToggle(300))});$("body").on("click",".nl-notesFav",function(){var f=$(this);if(isUserLoggedIn())if(f.hasClass("nl-notesFavSaved"))$.when(_.deleteNote(SOLUTIONS.query)).done(function(){f.toggleClass("nl-notesFavSaved");
symbolab_log("Solutions","FavoriteDelete",SOLUTIONS.query)});else{var e=_.saveSolutionNote(SOLUTIONS.query,_.stepsRes.topic);$.when(e).done(function(g){g&&subscribed?showPointOfInterest(".nl-notesFav",g,{onDismiss:function(){}}):g?createUpgradeTooltip(".nl-notesFav","SolverSaveNote",g):f.toggleClass("nl-notesFavSaved")})}else createSignupTooltip(".nl-notesFav ","SolverSaveNote",i18n("to save notes and more"));symbolab_log("Solutions","SaveClicked",null,!1,SOLUTIONS.query)});$("body").off("click",
"#PlotLink, #ExamplesLink").on("click","#PlotLink, #ExamplesLink",function(f){f.preventDefault();f=$(this).attr("href");$(f).get(0).scrollIntoView({behavior:"smooth",block:"start",inline:"start"})})},verify:function(a,b,f){var e=this;e.verifying||(e.verifying=!0,a.parent().find(".nl-answerCaption").hide(),a.parent().find(".nl-answerCaption.not-ready").show(),$.ajax({type:"GET",url:"/api/verifySolution",beforeSend:authorizeAjaxWithSyPubToken,data:{problem:f,solution:a.parent().find("#verify-input").mathquill("latex"),
or:b},success:function(g){a.parent().find(".nl-answerCaption").hide();g.correct?a.parent().find(".nl-answerCaption.nl-greenText").show():g.partiallyCorrect?(a.parent().find(".nl-answerCaption.nl-goldText span").eq(0).text(g.userMessage),a.parent().find(".nl-answerCaption.nl-goldText").show()):a.parent().find(".nl-answerCaption.nl-redText").show()},error:function(g){a.parent().find(".nl-answerCaption").hide();a.parent().find(".nl-answerCaption.nl-redText").show()},complete:function(){e.verifying=!1}}))}};
(function(a){function b(){this.initialize.apply(this,arguments)}function f(h,m,l){function n(D,E,F,x,A){var p=Math.round(x/1.7320508);E.inactive()["setBorder"+F.camel.pos.f](x)["setBorder"+F.camel.pos.c1](p)["setBorder"+F.camel.pos.c2](p)["set"+F.camel.pos.p1](F.isTopLeft?-x:D.inner[F.size.p])["set"+F.camel.pos.c1](D.inner[F.size.c]/2-p).active().$.css("border-"+F.pos.f+"-color",A)}m.stop(!0,!0);var r={position:"absolute",height:"0",width:"0",border:"solid 0 transparent"};var t=new b(h),v=new b(m);
v.setTop(-l.offsetY+(l.position&&0<=l.position.indexOf("top")?t.top-v.height:l.position&&0<=l.position.indexOf("bottom")?t.bottom:t.center.top-v.height/2));v.setLeft(l.offsetX+(l.position&&0<=l.position.indexOf("left")?t.left-v.width:l.position&&0<=l.position.indexOf("right")?t.right:t.center.left-v.width/2));if(0<l.tipSize){m.data("outerTip")&&(m.data("outerTip").remove(),m.removeData("outerTip"));m.data("innerTip")&&(m.data("innerTip").remove(),m.removeData("innerTip"));h=new b(a("<div>").css(r).appendTo(m));
r=new b(a("<div>").css(r).appendTo(m));for(var z,u=0;u<g.pos.length;u++){z=g.getRelativeNames(u);if(v.center[z.pos.c1]>=t[z.pos.c1]&&v.center[z.pos.c1]<=t[z.pos.c2])if(0==u%2){if(v[z.pos.o]>=t[z.pos.o]&&v[z.pos.f]>=t[z.pos.f])break}else if(v[z.pos.o]<=t[z.pos.o]&&v[z.pos.f]<=t[z.pos.f])break;z=null}z?(v["set"+z.camel.pos.p1](v[z.pos.p1]+(z.isTopLeft?1:-1)*(l.tipSize-v["border"+z.camel.pos.o])),n(v,h,z,l.tipSize,m.css("border-"+z.pos.o+"-color")),n(v,r,z,l.tipSize-2*v["border"+z.camel.pos.o],m.css("background-color")),
m.data("outerTip",h.$).data("innerTip",r.$)):a.each([h.$,r.$],function(){this.remove()})}}function e(h,m){h=h.data("balloon")&&h.data("balloon").get(0);return!(h&&(h===m.relatedTarget||a.contains(h,m.relatedTarget)))}var g={};g.pos=a.extend(["top","bottom","left","right"],{camel:["Top","Bottom","Left","Right"]});g.size=a.extend(["height","width"],{camel:["Height","Width"]});g.getRelativeNames=function(h){h={pos:{o:h,f:0==h%2?h+1:h-1,p1:0==h%2?h:h-1,p2:0==h%2?h+1:h,c1:2>h?2:0,c2:2>h?3:1},size:{p:2>
h?0:1,c:2>h?1:0}};var m={},l;for(l in h){m[l]||(m[l]={});for(var n in h[l])m[l][n]=g[l][h[l][n]],m.camel||(m.camel={}),m.camel[l]||(m.camel[l]={}),m.camel[l][n]=g[l].camel[h[l][n]]}m.isTopLeft=m.pos.o==m.pos.p1;return m};(function(){function h(n,r){if(void 0==r)return h(n,!0),h(n,!1);r=g.getRelativeNames(r?0:2);n[r.size.p]=n.$["outer"+r.camel.size.p]();n[r.pos.f]=n[r.pos.o]+n[r.size.p];n.center[r.pos.o]=n[r.pos.o]+n[r.size.p]/2;n.inner[r.pos.o]=n[r.pos.o]+n["border"+r.camel.pos.o];n.inner[r.size.p]=
n.$["inner"+r.camel.size.p]();n.inner[r.pos.f]=n.inner[r.pos.o]+n.inner[r.size.p];n.inner.center[r.pos.o]=n.inner[r.pos.f]+n.inner[r.size.p]/2;return n}var m={setBorder:function(n,r){return function(t){this.$.css("border-"+n.toLowerCase()+"-width",t+"px");this["border"+n]=t;return this.isActive?h(this,r):this}},setPosition:function(n,r){return function(t){this.$.css(n.toLowerCase(),t+"px");this[n.toLowerCase()]=t;return this.isActive?h(this,r):this}}};b.prototype={initialize:function(n){this.$=n;
a.extend(!0,this,this.$.offset(),{center:{},inner:{center:{}}});for(n=0;n<g.pos.length;n++)this["border"+g.pos.camel[n]]=parseInt(this.$.css("border-"+g.pos[n]+"-width"))||0;this.active()},active:function(){this.isActive=!0;h(this);return this},inactive:function(){this.isActive=!1;return this}};for(var l=0;l<g.pos.length;l++)b.prototype["setBorder"+g.pos.camel[l]]=m.setBorder(g.pos.camel[l],2>l),0==l%2&&(b.prototype["set"+g.pos.camel[l]]=m.setPosition(g.pos.camel[l],2>l))})();a.fn.balloon=function(h){return this.one("mouseenter",
function(m){var l=a(this),n=this,r=l.unbind("mouseenter",arguments.callee).showBalloon(h).mouseenter(function(t){e(l,t)&&l.showBalloon()}).data("balloon");r&&r.mouseleave(function(t){n===t.relatedTarget||a.contains(n,t.relatedTarget)||l.hideBalloon()}).mouseenter(function(t){r.stop(!0,!0);l.showBalloon()})}).mouseleave(function(m){var l=a(this);e(l,m)&&l.hideBalloon()})};a.fn.showBalloon=function(h){var m,l,n;if(h||!this.data("options"))null===a.balloon.defaults.css&&(a.balloon.defaults.css={}),this.data("options",
a.extend(!0,{},a.balloon.defaults,h||{}));h=this.data("options");return this.each(function(){var r;m=a(this);(n=m.data("offTimer"))&&clearTimeout(n);var t=a.isFunction(h.contents)?h.contents():h.contents||(h.contents=m.attr("title")||m.attr("alt"));(r=!(l=m.data("balloon")))&&(l=a("<div>").append(t));if(h.url||l&&""!=l.html())!r&&t&&t!=l.html()&&l.empty().append(t),m.removeAttr("title"),h.url&&l.load(a.isFunction(h.url)?h.url(this):h.url,function(v,z,u){h.ajaxComplete&&h.ajaxComplete(v,z,u);f(m,l,
h)}),r?(l.addClass(h.classname).css(h.css||{}).css({visibility:"hidden",position:"absolute"}).appendTo("body"),m.data("balloon",l),f(m,l,h),l.hide().css("visibility","visible")):f(m,l,h),h.showAnimation?h.showAnimation.apply(l.stop(!0,!0),[h.showDuration,h.showComplete]):l.show(h.showDuration,function(){this.style.removeAttribute&&this.style.removeAttribute("filter");h.showComplete&&h.showComplete.apply(l)})})};a.fn.hideBalloon=function(){var h=this.data("options"),m,l;return this.data("balloon")?
this.each(function(){var n=a(this);(m=n.data("onTimer"))&&clearTimeout(m);(l=n.data("offTimer"))&&clearTimeout(l);n.data("offTimer",setTimeout(function(){var r=n.data("balloon");h.hideAnimation?r&&h.hideAnimation.apply(r.stop(!0,!0),[h.hideDuration,h.hideComplete]):r&&r.stop(!0,!0).hide(h.hideDuration,h.hideComplete)},h.minLifetime))}):this};a.balloon={defaults:{contents:null,url:null,ajaxComplete:null,classname:null,position:"top",offsetX:0,offsetY:0,tipSize:12,delay:0,minLifetime:200,showDuration:100,
showAnimation:null,hideDuration:80,hideAnimation:function(h){this.fadeOut(h)},showComplete:null,hideComplete:null,css:{minWidth:"20px",padding:"4px 8px",borderRadius:"8px",boxShadow:"0px 1px 8px 0px rgba(0, 0, 0, 0.16)",color:"white",backgroundColor:"rgba(122, 135, 149, 0.80)",opacity:a.support.opacity?"0.85":null,zIndex:"32767",textAlign:"left",fontWeight:"500",fontSize:"10.5pt"}}}})(jQuery);function isInteger(a){return(a^0)===a}
function calcEps(){var a=1;do{var b=a;a/=2;var f=1+a}while(1<f);return b}Math.log10=function(a){return Math.log(a)/Math.log(10)};SyCalc=new SyCalc;
function SyPlot(a,b,f){this.graphJQ=$(a);this.graph=this.graphJQ.get(0);this.width=this.graphJQ.width();this.height=this.graphJQ.height();this.plotInfo=b;this.charHeight=8;this.startDrag={x:0,y:0};this.mouseButton=0;this.quality=2;this.variable=this.plotInfo?this.plotInfo.variable:"x";this.zoomOutFactor=.45;this.zoomInFactor=.382;this.allFuncVals=[];this.funcsXpos=[];this.funcsYpos=[];this.funcXvals=[];this.drawFuncs=[];this.balloonShowed=!1;this.tablePoints=[];this.tablePointsText=[];this.pointsDraw=
[];this.pointsDrawAttr=[];this.pointsDrawText=[];this.functionsInfo=[];this.eps=calcEps();this.options=$.extend({},{showSettings:!1,showZoom:!1,showBalloons:!1,lineWidth:1,pixelRatio:1,proximity:10,mouseEvents:!0,yBalloonOffset:0,allowTouch:!0,greenBackground:!1,dontDrawPoints:!1},f);sy_graphSettings.init(this.options,this);this.float_fix=function(e){return Math.round(1E7*e+5E-8)/1E7};this.roundCoord=function(e){return.1>Math.abs(e)?e.toPrecision(2):e.toFixed(2)};this.getProportionalYValue=function(e){return e/
this.width*this.height};this.getPointFromEvent=function(e){let g=e.offsetX;var h=e.offsetY;if(void 0===g||void 0===h)e.target?(h=e.target.getBoundingClientRect(),g=e.originalEvent.touches[0].clientX-h.left,h=e.originalEvent.touches[0].clientY-h.top):(g=e.pageX,h=e.pageY);return[g,h]};this.init=function(e,g,h){this.allFuncs={};if(this.graph.getContext){this.ctx=this.graph.getContext("2d");this.ctx.lineWidth=2;this.adjustedWidth=e*h;this.adjustedHeight=g*h;this.graphJQ.attr("height",this.adjustedHeight);
this.graphJQ.attr("width",this.adjustedWidth);this.ctx.scale(h,h);h=-10;var m=10,l=-10,n=10,r=this.plotInfo?this.plotInfo.localBoundingBox:void 0;r&&(h=Math.max(r.xMin,-1E6),m=Math.min(r.xMax,1E6),l=Math.max(r.yMin,-1E6),n=Math.min(r.yMax,1E6));e/=g;g=Math.abs(m-h)/2;r=Math.abs(n-l)/2;var t=g/r;e<t?r=g/e:g=r*e;var v=0;if(e<t||0<h+g/2||0>m-g/2)v=(m+h)/2;var z=0;if(e>=t||0<l+r/2||0>n-r/2)z=(n+l)/2;h=v-g;m=v+g;l=z-r;n=z+r;sy_graphSettings.defaultSettings.x1=this.roundCoord(h);sy_graphSettings.defaultSettings.x2=
this.roundCoord(m);sy_graphSettings.defaultSettings.y1=this.roundCoord(l);sy_graphSettings.defaultSettings.y2=this.roundCoord(n);this.currCoord={x1:h,x2:m,y1:l,y2:n};var u=this;if(this.options.mouseEvents){let D,E=1,F=1,x=1;this.graphJQ.off("mousemove touchmove").on("mousemove touchmove",function(A){if("touchmove"===A.originalEvent.type&&2===A.originalEvent.touches.length){var p=A.originalEvent.touches[0];let B=A.originalEvent.touches[1];F=Math.sqrt(Math.pow(B.clientX-p.clientX,2)+Math.pow(B.clientY-
p.clientY,2))/D;p=E*F;-.2>x-p?($("#zoomIn").click(),x=p):.2<x-p&&($("#zoomOut").click(),x=p);A.preventDefault()}else{var [q,w]=u.getPointFromEvent(A);u.options.allowTouch&&(2===u.mouseButton?(A=u.findClosestPoint(q,w,u.funcsXpos[u.currentFunctionIndex],u.funcsYpos[u.currentFunctionIndex]),q=u.roundCoord(u.getXvalue(A.x)),w=u.roundCoord(u.getYvalue(A.y)),u.clearBalloons(),u.showBalloon(u.functionsInfo[u.currentFunctionIndex],xCanvas,yCanvas),$(".plotBalloon span").eq(0).append("<p class='ballon-cord'>("+
q+","+w+")</p>"),u.ctx.drawImage(u.canvasImg,0,0),u.ctx.beginPath(),u.ctx.fillStyle=u.plotInfo.funcsToDraw.funcs[u.currentFunctionIndex].attributes.color,u.ctx.arc(A.x,A.y,4,0,2*Math.PI,!1),u.ctx.fill()):1===u.mouseButton?($("#sy_graph").css("cursor","move"),u.movePlot(q-u.startDrag.x,w-u.startDrag.y),u.startDrag.x=q,u.startDrag.y=w):u.checkMove(q,w))}});this.graphJQ.unbind("mouseleave").mouseleave(function(){2===u.mouseButton&&(u.clearBalloons(),u.ctx.drawImage(u.canvasImg,0,0));u.mouseButton=0});
this.graphJQ.off("mousedown touchstart").on("mousedown touchstart",function(A){if("touchstart"===A.originalEvent.type&&2===A.originalEvent.touches.length){var p=A.originalEvent.touches[0],q=A.originalEvent.touches[1];D=Math.sqrt(Math.pow(q.clientX-p.clientX,2)+Math.pow(q.clientY-p.clientY,2))}if(u.options.allowTouch){A.preventDefault();u.mouseDown(A);if(u.plotInfo&&u.plotInfo.funcsToDraw&&u.plotInfo.funcsToDraw.funcs){var [w,B]=u.getPointFromEvent(A);A=!1;for(var C in u.pointsDraw)if(q=u.getCoord(u.pointsDraw[C].x,
u.pointsDraw[C].y),u.isPointInProximity(w,B,q.x,q.y,5)){p=[];void 0!=u.currentFunctionIndex&&p.push(u.currentFunctionIndex);for(C=0;C<u.funcsYpos.length;C++)p.push(C);q=!0;for(C=0;C<p.length&&q;C++)for(var y=u.funcsYpos[p[C]],G=u.funcsXpos[p[C]],H=0;H<G.length;H++)if(u.isPointInProximity(w,B,G[H],y[H],10)){u.currentFunctionIndex=p[C];q=!1;break}A=!0;break}p=[];void 0!=u.currentFunctionIndex&&p.push(u.currentFunctionIndex);for(var I in u.funcsYpos)u.funcsYpos.hasOwnProperty(I)&&p.push(I);q=!0;for(C=
0;C<p.length&&!A&&q;C++)for(y=u.funcsYpos[p[C]],G=u.funcsXpos[p[C]],H=0;H<G.length;H++)if(u.isPointInProximity(w,B,G[H],y[H],10)){q=u.findClosestPoint(w,B,G,y);u.currentFunctionIndex=p[C];u.roundCoord(u.getXvalue(q.x));u.roundCoord(u.getYvalue(q.y));q=!1;break}}u.mouseButton=1}});$("#graph").off("mouseup touchend").on("mouseup touchend",function(A){u.options.allowTouch&&(2===u.mouseButton&&(u.ctx.drawImage(u.canvasImg,0,0),$(".ballon-cord").remove()),u.mouseUp(A))});this.graphJQ.off("mouseup touchend").on("mouseup touchend",
function(A){"touchend"===A.originalEvent.type&&(E*=F);if(2===u.mouseButton){u.ctx.drawImage(u.canvasImg,0,0);$(".ballon-cord").remove();u.canvasX=$("canvas").offset().left;u.canvasY=$("canvas").offset().top;const [p,q]=u.getPointFromEvent(A);u.checkMove(p+1,q+1)}u.mouseUp(A)})}}else alert(i18n("js.Sorry, your browser is not supported."))};this.mobileTouchPlot=function(e,g){this.checkMove(e,g)};this.mobileMovePlot=function(e,g){this.movePlot(e,g)};this.movePlot=function(e,g){var h=this.getScale();
this.currCoord.x1-=e/h.x;this.currCoord.x2-=e/h.x;this.currCoord.y1+=g/h.y;this.currCoord.y2+=g/h.y;sy_graphSettings.updateCoordinates();this.checkResetNeeded(!0);this.draw(!1)};this.donePanning=function(){this.draw(!0)};this.arbRound=function(e,g){return Math.round(e/g)*g};this.arbFloor=function(e,g){return Math.floor(e/g)*g};this.copyCoord=function(e){return{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}};this.clearScreen=function(){this.ctx.fillStyle=this.options.greenBackground?"#009490":"rgb(255,255,255)";
this.ctx.fillRect(0,0,this.width,this.height)};this.drawVerticalLine=function(e,g,h){this.setCtxStyle(g);this.ctx.lineWidth=1==g.isAsymptote?1:this.options.lineWidth;this.ctx.beginPath();g=this.getCoord(e,this.currCoord.y2);e=this.getCoord(e,this.currCoord.y1);this.ctx.moveTo(g.x,g.y);this.ctx.lineTo(e.x,e.y);this.ctx.stroke();this.defaultCtxStyle()};this.drawLineSegment=function(e){this.setCtxStyle(e.attributes);this.ctx.beginPath();var g=this.getCoord(this.evalForm(e.p1x),this.evalForm(e.p1y));
e=this.getCoord(this.evalForm(e.p2x),this.evalForm(e.p2y));this.ctx.moveTo(g.x,g.y);this.ctx.lineTo(e.x,e.y);this.ctx.stroke();this.defaultCtxStyle()};this.adjustAttr=function(e){"PURPLE"===e.color&&(e.color="#006666");"PURPLE"===e.borderColor&&(e.borderColor="#006666")};this.setCtxStyle=function(e){this.adjustAttr(e);this.options.greenBackground?(this.ctx.strokeStyle="#fff",this.ctx.setLineDash([]),this.ctx.lineWidth=2):(this.ctx.strokeStyle=e.color,"DASH"==e.lineType?(this.ctx.setLineDash([5,10]),
this.ctx.lineWidth=1):"DOT"==e.lineType?(this.ctx.setLineDash([2,4]),this.ctx.lineWidth=2):"BOLD"==e.lineType?this.ctx.lineWidth=4:"NORMAL"==e.lineType&&(this.ctx.lineWidth=1))};this.defaultCtxStyle=function(){this.ctx.setLineDash([]);this.ctx.lineWidth=1;this.ctx.strokeStyle="#000000"};this.drawPoint=function(e,g,h,m){this.options.dontDrawPoints||(e=this.getCoord(e,g),this.ctx.beginPath(),this.ctx.fillStyle=this.options.greenBackground?"#00625F":h,m?(this.ctx.strokeStyle=m,this.ctx.arc(e.x,e.y,4,
0,2*Math.PI,!1),this.ctx.fill(),this.ctx.stroke()):(this.ctx.arc(e.x,e.y,4,0,2*Math.PI,!1),this.ctx.fill()))};this.drawGrid=function(){this.clearScreen();var e=this.currCoord.x1=parseFloat(sy_graphSettings.cur().x1),g=this.currCoord.x2=parseFloat(sy_graphSettings.cur().x2),h=this.currCoord.y1=parseFloat(sy_graphSettings.cur().y1),m=this.currCoord.y2=parseFloat(sy_graphSettings.cur().y2),l=g-e,n=.015*this.width;i=1E-12;for(c=0;l/i>n-1&&Infinity>i;c++)i=1==c%3?2.5*i:2*i;n=this.float_fix(i);var r=this.float_fix(i/
5);this.ctx.font="10pt 'open sans'";this.ctx.textAlign="center";l=yaxis=null;var t=this.arbFloor(e,n),v=this.arbFloor(h,n),z=1.5*this.charHeight,u=-1;t=this.float_fix(t);v=this.float_fix(v);0<=m&&0>=h?z=this.height-(0-h)/(m-h)*this.height+1.5*this.charHeight:0<h&&(z=this.height-5);z>this.height-this.charHeight/2&&(z=this.height-5);0<=g&&0>=e?u=(0-e)/(g-e)*this.width-2:0>g&&(u=this.width-6);u<this.ctx.measureText(v).width+1&&(u=-1);var D=t;for(i=0;1E4>i;){i++;xpos=(t-e)/(g-e)*this.width;if(xpos-.5>
this.width+1||isNaN(xpos))break;if(!(0>xpos)){t=this.float_fix(t);0==t&&(l=xpos);var E=isInteger(this.float_fix((D-t)/n));this.ctx.fillStyle=this.options.greenBackground?E?"#29605E":"#7CBCBB":E?"#bcbcbc":"#eaeaea";this.ctx.fillRect(xpos-.5,0,1,this.height);this.ctx.fillStyle="rgb(0,0,0)";0!=t&&E&&(E=this.ctx.measureText(t).width,xpos+.5*E>this.width?xpos=this.width-.5*E+1:0>xpos-.5*E&&(xpos=.5*E+1),this.ctx.fillText(t,xpos,z))}t+=r}this.ctx.textAlign="right";e=v;for(i=0;;)if(ypos=this.height-(v-h)/
(m-h)*this.height,ypos-.5>this.height+1)v+=r;else{if(0>ypos||isNaN(ypos))break;v=this.float_fix(v);0==v&&(yaxis=ypos);E=isInteger(this.float_fix((e-v)/n));this.ctx.fillStyle=this.options.greenBackground?E?"#29605E":"#7CBCBB":E?"#bcbcbc":"#eaeaea";this.ctx.fillRect(0,ypos-.5,this.width,1);this.ctx.fillStyle="black";0!=v&&E&&(g=this.ctx.measureText(v).width,ypos+this.charHeight/2>this.height&&(ypos=this.height-this.charHeight/2-1),0>ypos-4&&(ypos=4),t=u,-1==u&&(t=g+1),this.ctx.fillText(v,t,ypos+3));
v+=r;i++}h=m=!0;if(this.plotInfo&&this.plotInfo.funcsToDraw)for(k in this.plotInfo.funcsToDraw.funcs)n=this.plotInfo.funcsToDraw.funcs[k],(r=n.attributes)&&r.lineType&&"NORMAL"!==r.lineType&&("y=0"===n.evalFormula?h=!1:"x=0"===n.evalFormula&&(m=!1));l&&(m&&this.ctx.fillRect(l-.5,0,1,this.height),sy_graphSettings.cur()&&sy_graphSettings.cur().yLabel&&(m=this.ctx.measureText(sy_graphSettings.cur().yLabel).width,this.ctx.save(),this.ctx.translate(l+15,15),this.ctx.rotate(90*Math.PI/180),this.ctx.fillText(sy_graphSettings.cur().yLabel,
m,4),this.ctx.restore()));yaxis&&(h&&this.ctx.fillRect(0,yaxis-.5,this.width,1),sy_graphSettings.cur()&&sy_graphSettings.cur().xLabel&&this.ctx.fillText(sy_graphSettings.cur().xLabel,this.width-15,yaxis-15))};this.minYpos=function(){return 0};this.maxYpos=function(){return this.height};this.minXpos=function(){return 0};this.maxXpos=function(){return this.width};this.inCanvasY=function(e){return e>=this.minYpos()&&e<=this.maxYpos()};this.inCanvasX=function(e){return e>=this.minXpos()&&e<=this.maxXpos()};
this.getCoord=function(e,g){e=this.getXCoord(e);g=this.getYCoord(g);return{x:e,y:g}};this.getXCoord=function(e){e=this.roundInfinities(e);return(e-this.currCoord.x1)/(this.currCoord.x2-this.currCoord.x1)*this.width};this.getYCoord=function(e){e=this.roundInfinities(e);return this.height-(e-this.currCoord.y1)/(this.currCoord.y2-this.currCoord.y1)*this.height};this.roundInfinities=function(e){return"-Infinity"==e||"-\\infty "==e?-1E10:"Infinity"==e||"\\infty "==e?1E10:parseFloat(e)};this.getYInCanvas=
function(e){return e<this.minYpos()?this.minYpos():e>this.maxYpos()?this.maxYpos():e};this.getXInCanvas=function(e){return e<this.minXpos()?this.minXpos():e>this.maxXpos()?this.maxXpos():e};this.getValue=function(e,g){return{x:this.getXvalue(e),y:this.getYvalue(g)}};this.getXvalue=function(e){var g=this.getScale();return e/g.x+this.currCoord.x1};this.getYvalue=function(e){var g=this.getScale();return(this.height-e)/g.y+this.currCoord.y1};this.roundToEdge=function(e,g,h,m,l){m=l>=m?this.height:0;g.push(h);
e.push(m)};this.yposFromXpos=function(e,g){var h=this.getScale();e=this.evalFunc(e,g/h.x+this.currCoord.x1);return this.height-(e-this.currCoord.y1)*h.y};this.inDomain=function(e,g){return null==e?!1:null!=e.xmin?g<e.xmin||null!=e.xmax&&g>e.xmax?!1:!0:null!=e.xmax&&g>e.xmax?!1:!0};this.drawFunction=function(e,g,h){if(!e)return!1;try{this.yposFromXpos(e,0)}catch(w){return!1}var m=g.attributes;this.getScale();var l=!1,n=0,r=0,t=0,v=-1,z=[],u=[],D=[],E=[],F=1/this.quality,x=0,A=this.width+F;if(null!=
g.xmin){var p=this.getXCoord(g.xmin);x<p&&(x=p)}null!=g.xmax&&(p=this.getXCoord(g.xmax),A>p&&(A=p+F));for(;x<A;x+=F){var q=u.length;p=this.yposFromXpos(e,x);if(this.inCanvasY(p)){if(0==l)if(0<=q&&!isNaN(z[q-1]))v=this.yposFromXpos(e,x+F),this.roundToEdge(z,u,x,v,p);else{if(0<=q&&isNaN(z[q-1]))for(v=u[q-1],l=0;249>l;++l)v+=F/250,q=this.yposFromXpos(e,v),z.push(q),u.push(v)}else l=p-v,l=0<l?-1:0>l?1:0,0!==n&&(l==n?(r+=Math.abs(p-v),++t):(n=Math.abs(p-v),n>r&&n>this.height/1E3&&2<t&&(this.roundToEdge(z,
u,u[q-1],z[q-2],z[q-1]),z.push(this.height+1E3),u.push(x),v=this.yposFromXpos(e,x+F),this.roundToEdge(z,u,x,v,p)),t=r=0)),n=l;l=!0;v=p}else if(l){if(!isNaN(p))this.roundToEdge(z,u,u[q-1],z[q-2],z[q-1]);else if(0<=q)for(v=u[q-1],q=null,l=0;249>l;++l)v+=F/250,isNaN(q)?(z.push(q),u.push(v)):(q=this.yposFromXpos(e,v),isNaN(q)&&null!=g.xmax&&x+F>A?(z.push(this.getYCoord(this.evalFunc(e,g.xmax))),u.push(this.getXCoord(g.xmax))):(z.push(q),u.push(v)));l=!1;v=-1;r=n=0}z.push(p);u.push(x);E.push(p);D.push(x)}this.allFuncVals[h]=
E;this.funcsYpos[h]=z;this.funcsXpos[h]=u;this.funcXvals[h]=D;this.drawFuncs[h]=e;this.setCtxStyle(m);this.ctx.beginPath();this.ctx.lineWidth=1==m.isAsymptote?1:this.options.lineWidth;for(e=0;e<z.length;++e)p=z[e],x=u[e],this.inCanvasY(p)?(0==l&&(this.ctx.beginPath(),this.ctx.moveTo(x,p)),this.ctx.lineTo(x,p),l=!0):l&&(this.ctx.stroke(),l=!1);this.ctx.stroke();this.defaultCtxStyle()};this.drawLines=function(){if(this.plotInfo&&this.plotInfo.linesToDraw)for(var e in this.plotInfo.linesToDraw)this.drawLineSegment(this.plotInfo.linesToDraw[e])};
this.drawFunctions=function(){if(this.plotInfo&&this.plotInfo.funcsToDraw)for(var e in this.plotInfo.funcsToDraw.funcs){var g=this.plotInfo.funcsToDraw.funcs[e],h=g.evalFormula,m=g.attributes;if(!m.isAsymptote||!sy_graphSettings.cur()||0!=sy_graphSettings.cur().isDrawAsypmtotes.draw){var l=g.displayFormula,n;for(n in m.labels)l+="<br/>\\mathrm{"+m.labels[n]+"}";this.functionsInfo.push(l);0===h.indexOf("y=")&&(h=h.substring(2));h=h.replace(/\^\{\\circ\s*}/ig,"");0===h.indexOf(this.variable+"=")?(h=
h.substring(2),h=SyCalc.parseEquation(h,!0),g=SyParse.parse(h),g=SyParse.evaluate(g),this.drawVerticalLine(g,m,e)):(h=SyCalc.parseEquation(h,!0),this.drawFunction(h,g,e))}}};this.drawPoints=function(){if(this.plotInfo&&this.plotInfo.pointsToDraw)for(var e in this.plotInfo.pointsToDraw.pointsDecimal){var g=this.plotInfo.pointsToDraw.pointsDecimal[e],h=this.plotInfo.pointsToDraw.attributes[e],m="",l=null,n=null,r=!1,t;for(t in h.labels){var v=h.labelTypes[t],z=!0;"INTERCEPT"===v?(z=sy_graphSettings.cur().isDrawAxisIntercepts.draw)&&
null==n&&(n=v,l=h.labelColors[t]):"EXTREME"===v?(z=sy_graphSettings.cur().isDrawExtreme.draw)&&null==n&&(n=v,l=h.labelColors[t]):"INTERSECTION"===v?(z=sy_graphSettings.cur().isDrawFunctionIntercepts.draw)&&"SOLUTION"!==n&&(n=v,l=h.labelColors[t]):"SOLUTION"===v&&"INTERSECTION"!==n?(n=v,l=h.labelColors[t]):null==n&&(l=h.labelColors[t]);z&&(r=!0,h.labels[t]&&(m+="<br/>\\mathrm{"+h.labels[t]+"}"))}r&&(null==l||h.borderColor||(h=Object.assign({},h),h.color=l),m=this.plotInfo.pointsToDraw.pointsLatex[e]+
m,this.pointsDraw.push({x:g.fst,y:g.snd}),this.pointsDrawAttr.push(h),this.pointsDrawText.push(m))}};this.toPrecision=function(e,g){if(0==e)return 0;g=Math.pow(10,g-Math.round(Math.ceil(Math.log10(0>e?-e:e))));return Math.round(e*g)/g};this.isSamePoint=function(e,g){return 1E-5>Math.abs(e-g)};this.myIndexOf=function(e,g){for(var h=0;h<e.length;h++)if(this.isSamePoint(e[h].x,g.x)&&this.isSamePoint(e[h].y,g.y))return h;return-1};this.evalForm=function(e){try{var g=SyCalc.parseEquation(e,!0);if(""===
g)return"undefined";var h=SyParse.parse(g);return SyParse.evaluate(h)}catch(m){return"undefined"}};this.getCachedFunction=function(e){var g=this.allFuncs[e];g||(g={},0<=e.indexOf(this.variable)?g.variable=this.variable:0<=e.indexOf("x")?g.variable="x":0<=e.indexOf("u")&&(g.variable="u"),g.parsedFunction=SyParse.parse(e),this.allFuncs[e]=g);return g};this.evalFunc=function(e,g){e=this.getCachedFunction(e);if(void 0===g)return SyParse.evaluate(e.parsedFunction);var h={};h[e.variable]=g;return SyParse.evaluate(e.parsedFunction,
h)};this.hasTrig=function(e){return e.match(/(sin|tan|cos|csc|sec|cot)/)?!0:!1};this.hasE=function(e){return e.match(/e.*\^/)?!0:!1};this.isInt=function(e){return 0===e%1};this.findIntersection=function(e,g,h,m){var l=(g+h)/2;return.1>Math.abs(l)&&!0!==m?(e=e.replace(new RegExp("\\b"+this.variable+"\\b","g"),"("+this.variable+"+5)"),g=this.findIntersection(e,g-5,h-5,!0),!1!==g?g+5:!1):this.newtonRaphson(e,l,g,h,!1)};this.findDerivativeIntersection=function(e,g,h,m){var l=(g+h)/2;return.1>Math.abs(l)&&
1!=m?(e=e.replace(new RegExp("\\b"+this.variable+"\\b","g"),"("+this.variable+"+5)"),g=this.findDerivativeIntersection(e,g-5,h-5,!0),!1!==g?g+5:!1):this.newtonRaphson(e,l,g,h,!0)};this.newtonRaphson=function(e,g,h,m,l){for(var n=0,r=1;g>=h&&g<=m&&30>n++;){r=l?this.getDerivative(e,g):this.evalFunc(e,g);if(1E-10>Math.abs(r)&&1E-10>Math.abs(g-t))return g;var t=g,v=l?this.get2ndDerivative(e,t):this.getDerivative(e,t);if(0==v||!isFinite(v))break;g-=r/v}return 1E-10>Math.abs(r)||30<=n?g:!1};this.getDerivative=
function(e,g){for(var h=0,m=g,l=1<m||-1>m?Math.sqrt(this.eps)*m:Math.sqrt(this.eps),n=this.evalFunc(e,m),r=[25],t=0;t<r.length;t++){var v=l*r[t],z=1/v;g=m+v;g=this.evalFunc(e,g);h+=(g-n)*z;g=m-v;g=this.evalFunc(e,g);h+=(n-g)*z}return h/(2*r.length)};this.get2ndDerivative=function(e,g){for(var h=0,m=g,l=1<m||-1>m?Math.pow(this.eps,.25)*m:Math.pow(this.eps,.25),n=this.evalFunc(e,m),r=[25],t=0;t<r.length;t++){var v=l*r[t],z=1/(v*v);g=m+v;g=this.evalFunc(e,g);h+=(g-n)*z;g=m-v;g=this.evalFunc(e,g);h+=
(g-n)*z}return h/r.length};this.fillAreas=function(){if(this.plotInfo){for(var e in this.plotInfo.fills){var g=this.plotInfo.fills[e];g.xIneq||g.yIneq||g.twoVar?this.inequalityPlot(g):this.fillPlot(g)}this.plotInfo.colorInequalityIntersection&&this.colorIntersection(this.plotInfo.fills)}};this.inequalityPlot=function(e){if(e.xIneq||e.yIneq)for(var g in e.ranges){var h=e.ranges[g];if(e.xIneq){var m=this.getXInCanvas(this.getXCoord(h.fst));var l=this.getXInCanvas(this.getXCoord(h.snd))}else l=this.getYInCanvas(this.getYCoord(h.fst)),
m=this.getYInCanvas(this.getYCoord(h.snd));for(h=1/this.quality;m<=l;m+=h)this.ctx.strokeStyle=e.color,this.ctx.beginPath(),e.xIneq?(this.ctx.moveTo(m,this.minYpos()),this.ctx.lineTo(m,this.maxYpos())):(this.ctx.moveTo(this.minXpos(),m),this.ctx.lineTo(this.maxXpos(),m)),this.ctx.stroke()}else if(e.twoVar)for(g=this.funcXvals[0],void 0===g&&(g=this.funcXvals[Object.keys(this.funcXvals)[0]]),l=0;l<g.length;l++){m=g[l];this.ctx.strokeStyle=e.color;this.ctx.beginPath();h=this.indexOfFunction(e.func);
h=this.allFuncVals[h][l];h=this.fixYPosition(h);var n=e.trueAboveLine?0:this.height;this.ctx.moveTo(m,h);this.ctx.lineTo(m,n);this.ctx.stroke()}};this.fillPlot=function(e){for(var g=0;g<e.funcIndices.length;g++){var h=e.funcIndices[g],m=e.ranges[g],l=this.getXInCanvas(this.getXCoord(m.fst));m=this.getXInCanvas(this.getXCoord(m.snd));for(var n=this.funcXvals[this.funcXvals.length-1],r=0;r<n.length;r++){var t=n[r];if(t>=l&&t<=m){this.ctx.strokeStyle=e.color;this.ctx.beginPath();var v=this.allFuncVals[h.fst][r],
z=this.allFuncVals[h.snd][r];v=this.getYInCanvas(v);z=this.getYInCanvas(z);this.ctx.moveTo(t,v);this.ctx.lineTo(t,z);this.ctx.stroke()}}}};this.colorIntersection=function(e){var g=document.createElement("canvas").getContext("2d");g.width=2;g.height=2;g.fillStyle=this.options.greenBackground?"#009490":"rgb(255,255,255)";g.fillRect(0,0,g.width,g.height);var h=0;for(r in e){var m=e[r];if(m.xIneq||m.yIneq||m.twoVar){for(var l=1/this.quality,n=0;n<g.width;n+=l)g.strokeStyle=m.color,g.beginPath(),g.moveTo(n,
0),g.lineTo(n,g.height),g.stroke();h+=1}}if(1<h){e=g.getImageData(0,0,1,1).data;g=[0,0,0,255];h=this.ctx.getImageData(0,0,this.graph.width,this.graph.height);var r=h.data;m=!1;for(l=0;l<r.length;l+=16)n=this.slice(r,l,l+4),this.closeEnough(n,e)?(r[l]=g[0],r[l+1]=g[1],r[l+2]=g[2],r[l+3]=g[3],m=!0):m&&this.closeEnough(n,e);this.ctx.putImageData(h,0,0)}};this.closeEnough=function(e,g){return 7<=Math.abs(e[0]-g[0])||7<=Math.abs(e[1]-g[1])||7<=Math.abs(e[2]-g[2])||7<=Math.abs(e[3]-g[3])?!1:!0};this.slice=
function(e,g,h){for(var m=[],l=g;l<h;l++)m[l-g]=e[l];return m};this.indexOfFunction=function(e){for(var g in this.plotInfo.funcsToDraw.funcs)if(this.plotInfo.funcsToDraw.funcs[g].evalFormula==e)return g;return-1};this.fixYPosition=function(e){return 0>e?0:e>this.height?this.height:e};this.getScale=function(){return{x:this.width/(this.currCoord.x2-this.currCoord.x1),y:this.height/(this.currCoord.y2-this.currCoord.y1)}};this.getRange=function(){return{x:Math.abs(this.currCoord.x2-this.currCoord.x1),
y:Math.abs(this.currCoord.y2-this.currCoord.y1)}};this.checkMove=function(e,g){this.clearBalloons();this.balloonShowed=!1;var h=this.options.proximity;if(0<this.pointsDraw.length)for(var m in this.pointsDraw){var l=this.pointsDraw[m];l=this.getCoord(l.x,l.y);if(this.isPointInProximity(e,g,l.x,l.y,h)){this.showBalloon(this.pointsDrawText[m],l.x+100,l.y);return}}if(0==this.balloonShowed&&this.plotInfo){for(m in this.plotInfo.linesToDraw){l=this.plotInfo.linesToDraw[m];var n=this.getCoord(l.p1x,l.p1y),
r=this.getCoord(l.p2x,l.p2y);10>this.pointSegmentDist(e,g,n.x,n.y,r.x,r.y)&&this.showBalloon(l.attributes.labels[0],e,g)}if(this.plotInfo.funcsToDraw&&this.plotInfo.funcsToDraw.funcs){l=[];void 0!=this.currentFunctionIndex&&l.push(this.currentFunctionIndex);for(var t in this.funcsYpos)this.funcsYpos.hasOwnProperty(t)&&l.push(t);for(m=0;m<l.length;m++){t=this.funcsYpos[l[m]];if(null==t){t=this.plotInfo.funcsToDraw.funcs[l[m]].evalFormula;t=SyCalc.parseEquation(t.substring(2),!0);if(""===t)continue;
t=SyParse.parse(t);t=SyParse.evaluate(t);t=(t-this.currCoord.x1)/(this.currCoord.x2-this.currCoord.x1)*this.width;this.isInProximity(t,e,h)&&this.showBalloon(this.functionsInfo[l[m]],e,g)}else for(n=this.funcsXpos[l[m]],r=0;r<n.length;r++)if(this.isPointInProximity(e,g,n[r],t[r],h)){this.showBalloon(this.functionsInfo[l[m]],e,g);n=this.findClosestPoint(e,g,n,this.funcsYpos[l[m]]);t=this.roundCoord(this.getXvalue(n.x));n=this.roundCoord(this.getYvalue(n.y));$(".plotBalloon span").eq(0).append("<p class='ballon-cord'>("+
t+","+n+")</p>");break}if(this.balloonShowed)break}if(0==this.balloonShowed)for(m in this.plotInfo.funcsToDraw.funcs)t=this.funcsYpos[m],null==t&&(t=this.plotInfo.funcsToDraw.funcs[m].evalFormula,t=t.replace(/\^\{\\circ\s*}/ig,""),t=SyCalc.parseEquation(t.substring(2),!0),""!==t&&(t=SyParse.parse(t),t=SyParse.evaluate(t),t=(t-this.currCoord.x1)/(this.currCoord.x2-this.currCoord.x1)*this.width,this.isInProximity(t,e,h)&&this.showBalloon(this.functionsInfo[m],e,g)))}}};this.pointSegmentDist=function(e,
g,h,m,l,n){var r=l-h,t=n-m,v=r*r+t*t,z=-1;0!=v&&(z=((e-h)*r+(g-m)*t)/v);0>z||(1<z?(h=l,m=n):(h+=z*r,m+=z*t));e-=h;g-=m;return Math.sqrt(e*e+g*g)};this.isPointInProximity=function(e,g,h,m,l){return this.isInProximity(e,h,l)&&this.isInProximity(g,m,l)};this.isInProximity=function(e,g,h){e-=g;0>e&&(e*=-1);return e<h};this.findClosestPoint=function(e,g,h,m){for(var l=999999,n=null,r=null,t=0;t<h.length;t++){var v=Math.sqrt(Math.pow(e-h[t],2)+Math.pow(g-m[t],2));v<l&&(l=v,n=h[t],r=m[t])}return{x:n,y:r}};
this.clearBalloons=function(){$(".plotBalloon").hide()};this.clearPlotInfo=function(){this.pointsDraw=[];this.pointsDrawAttr=[];this.pointsDrawText=[];this.functionsInfo=[]};this.showBalloon=function(e,g,h){if($.fn.showBalloon&&e&&0!==e.length){this.balloonShowed=!0;h+=this.options.yBalloonOffset;h*=-1;var m="<div>";e=e.split("<br/>");for(var l in e)m+="<span class='mathquill-embedded-latex'>"+e[l]+"</span><br/>";this.graphJQ.showBalloon({contents:m+"</div>",position:"top left",classname:"plotBalloon",
offsetX:g,offsetY:h,delay:0,minLifetime:0,showDuration:0,hideDuration:0,tipSize:0,css:{"max-width":"200px",opacity:"1","z-index":"1100"}});$("body.desktop").length||setTimeout(function(){var n=$(window).width();let r=$(".plotBalloon").css("left"),t=$(".plotBalloon").css("width");r.startsWith("-")?$(".plotBalloon").css("left","6px"):parseFloat(r)>n-parseFloat(t)-20&&(r=n-parseFloat(t)-32,$(".plotBalloon").css("left",r+"px"))},50);$(".plotBalloon .mathquill-embedded-latex").mathquill()}};this.mouseDown=
function(e){0===this.mouseButton&&([this.startDrag.x,this.startDrag.y]=this.getPointFromEvent(e))};this.mouseUp=function(e){$("#sy_graph").css("cursor","default");this.mouseButton=0;this.donePanning()};this.zoomInOut=function(e,g){const h=e?1:-1,m=e?this.zoomInFactor:this.zoomOutFactor;return new Promise(async l=>{for(let n=m/5;n<=m;n+=m/5)await this.zoom(h*m/5,g,n>.95*m),await this.sleep(20);l()})};this.sleep=function(e){return new Promise(g=>setTimeout(g,e))};this.getNewValue=function(e,g){g=parseFloat($(g).val());
return isFinite(g)?g:e};this.checkResetNeeded=function(e){sy_graphSettings.showHomeButton()};this.zoom=function(e,g,h){var m=this.getRange(),l=jQuery.extend({},this.currCoord);if(g){const [r,t]=this.getPointFromEvent(g);g=1-t/this.height;var n=r/this.width;l.x1+=m.x*e*n;l.y1+=m.y*e*g;l.x2-=m.x*e*(1-n);l.y2-=m.y*e*(1-g)}else l.x1+=m.x*e,l.y1+=m.y*e,l.x2-=m.x*e,l.y2-=m.y*e;.1>=l.x2-l.x1||.1>=l.y2-l.y1||(this.currCoord=jQuery.extend({},l),sy_graphSettings.updateCoordinates(),h&&this.checkResetNeeded(!0),
this.draw(!1,!1))};window.graphG=this;this.plotPoints=function(){for(var e=0;e<this.pointsDraw.length;++e){var g=this.pointsDraw[e],h=this.pointsDrawAttr[e];this.adjustAttr(h);this.drawPoint(g.x,g.y,h.color,h.borderColor)}};this.draw=function(e,g){this.clearBalloons();e&&this.clearPlotInfo();this.drawGrid();this.drawFunctions();e&&this.drawPoints();this.fillAreas();this.drawLines();if(e){if(0<this.tablePoints.length)for(e=0;e<this.tablePoints.length;e++)this.pointsDraw.push(this.tablePoints[e]),this.pointsDrawText.push(this.tablePointsText[e]),
this.pointsDrawAttr.push({color:this.tablePointsColor,borderColor:this.tablePointsColor});g||this.plotPoints()}};this.init(this.width,this.height,this.options.pixelRatio);this.draw(!0)}
function SyCalc(){this.angles="radians";this.loopcounter=0;this.eps=calcEps();this.convAngles=function(a){return"degrees"==this.angles?Math.PI/180*a:"gradians"==this.angles?Math.PI/200*a:a};this.convRadians=function(a){return"degrees"==this.angles?180*a/Math.PI:"gradians"==this.angles?200*a/Math.PI:a};this.sin=function(a){return Math.sin(SyCalc.convAngles(a))};this.cos=function(a){return Math.cos(SyCalc.convAngles(a))};this.tan=function(a){return Math.tan(SyCalc.convAngles(a))};this.sec=function(a){return 1/
Math.cos(SyCalc.convAngles(a))};this.csc=function(a){return 1/Math.sin(SyCalc.convAngles(a))};this.cot=function(a){return 1/Math.tan(SyCalc.convAngles(a))};this.arcsin=function(a){return SyCalc.convRadians(Math.asin(a))};this.arccos=function(a){return SyCalc.convRadians(Math.acos(a))};this.arctan=function(a){return SyCalc.convRadians(Math.atan(a))};this.arccsc=function(a){return SyCalc.convRadians(Math.asin(1/a))};this.arcsec=function(a){return SyCalc.convRadians(Math.acos(1/a))};this.arccot=function(a){return SyCalc.convRadians(0>
a?Math.atan(1/a)+Math.PI:Math.atan(1/a))};this.pow=function(a,b){return Math.pow(a,b)};this.sinh=function(a){a=Math.exp(a);return(a-1/a)/2};this.cosh=function(a){a=Math.exp(a);return(a+1/a)/2};this.tanh=function(a){a=Math.exp(2*a);return(a-1)/(a+1)};this.sech=function(a){a=Math.exp(a);return 2/(a+1/a)};this.csch=function(a){a=Math.exp(a);return 2/(a-1/a)};this.coth=function(a){a=Math.exp(2*a);return(a+1)/(a-1)};this.arcsinh=function(a){return Math.log(a+Math.sqrt(a*a+1))};this.arccosh=function(a){return Math.log(a+
Math.sqrt(a*a-1))};this.arctanh=function(a){return Math.log((1+a)/(1-a))/2};this.arcsech=function(a){return Math.log((1+Math.sqrt(1-a*a))/a)};this.arccsch=function(a){return Math.log((1+Math.sqrt(a*a+1))/a)};this.arccoth=function(a){return Math.log((a+1)/(a-1))/2};this.roundToSignificantFigures=function(a,b){if(0==a)return 0;d=Math.ceil(Math.log10(0>a?-a:a));power=b-d;magnitude=Math.pow(10,power);shifted=Math.round(a*magnitude);return shifted/magnitude};this.fixRoot=function(a){for(var b;0<=(b=a.indexOf("\\sqrt["));){var f=
b+6,e=this.getBlock(a,f,"[","]");f+=e.length;if("]{"!==a.substr(f,2))break;f+=2;var g=this.getBlock(a,f,"{","}");f+=g.length+1;1<e.length&&(e="("+e+")");a=a.replace(a.substring(b,f),"("+g+")^{1/"+e+"}")}return a};this.parseEquation=function(a,b){a=a.replace(/\\pi/g,"\u03c0");a=a.replace(/\\log_\{(.+?)\}\((.+?)\)/g,"(\\frac{\\ln($2)}{\\ln($1)})");a=a.replace(/\\ln(\\left\|.+?\\right\|)/g,"\\ln($1)");a=a.replace(/\\left\|(.+?)\\right\|/g,"(\\abs($1))");a=a.replace(/\\lfloor(.+?)\\rfloor/g,"(\\floor($1))");
a=a.replace(/\\lceil(.+?)\\rceil/g,"(\\ceil($1))");a=a.replace(/(\\ln|\\log|\\sin|\\cos|\\tan|\\cot|\\csc|\\sec|\\sinh|\\cosh|\\tanh|\\coth|\\csch|\\sech|\\arcsin|\\arccos|\\arctan|\\arccot|\\arccsc|\\arcsec|\\arcsinh|\\arccosh|\\arctanh|\\arccoth|\\arccsch|\\arcsech)\^\{(.+?)\}\((.+?)\)/g,"($1($3))^{$2}");a=this.fixRoot(a);b="";var f=0,e=!1,g="";for(f;f<a.length;f++){var h=a[f];var m=0==b.length?" ":b.substr(b.length-1);if(h.match(/[a-zA-Z\u03b8\u0398\u03b1\u03b2\u03c0]/)){if(e){g+=h;continue}if(")"==
m||m.match(/[0-9]/)||"|"==m||m.match(/[a-zA-Z\u03b8\u0398\u03b1\u03b2\u03c0]/))b+="*";b+=h}e=!1;"cdot"==g&&(b+="*",g="");if(h.match(/[0-9]/)){if(")"==m||m.match(/[a-zA-Z\u03b8\u0398\u03b1\u03b2\u03c0]/)||"|"==m)b+="*";b+=h}else if(h.match(/\./))m.match(/[0-9]/)||(b+="0"),b+=h;else if(h.match(/\^/))b+=h,"{"===a[f+1]&&(m=this.getBlock(a,f+2,"{","}"),f+=m.length+2,b+="("+this.parseEquation(m)+")");else if(h.match(/[\*\/\-\+%]/))b+=h;else if("("==h){if(")"==m||m.match(/[a-zA-Z]/)||m.match(/[0-9]/))b+=
"*";""!=g&&(b+=g,g="");m=this.getBlock(a,f+1,"(",")");b+="("+this.parseEquation(m)+")";f+=m.length+1}else if("{"==h)if("frac"===g){g=this.getBlock(a,f+1,"{","}");f+=g.length+2;h=this.getBlock(a,f+1,"{","}");f+=h.length+1;if(")"==m||m.match(/[a-zA-Z]/)||m.match(/[0-9]/))b+="*";b+="("+this.parseEquation(g)+")/("+this.parseEquation(h)+")";g=""}else{if("sqrt"==g){g=this.getBlock(a,f+1,"{","}");f+=g.length+1;if(")"==m||m.match(/[a-zA-Z]/)||"|"==m||m.match(/[0-9]/))b+="*";b+="sqrt("+this.parseEquation(g)+
")";g=""}}else"\\"==h&&(g="",e=!0)}return b};this.getBlock=function(a,b,f,e){var g="",h=1;for(b;b<a.length;b++){var m=a[b];m==f?h++:m==e&&h--;if(0==h)break;g+=m}return g};this.roundFloat=function(a){return Math.round(1E11*a)/1E11}}
var SyParse=function(a){function b(p){function q(){}q.prototype=p;return new q}function f(p,q,w,B){this.type_=p;this.index_=q||0;this.prio_=w||0;this.number_=void 0!==B&&null!==B?B:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function e(p,q,w,B){this.tokens=p;this.ops1=q;this.ops2=w;this.functions=B}function g(p){return"string"===typeof p?(x.lastIndex=0,x.test(p)?"'"+p.replace(x,
function(q){var w=A[q];return"string"===typeof w?w:"\\u"+("0000"+q.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+p+"'"):p}function h(p,q){return Number(p)+Number(q)}function m(p,q){return p-q}function l(p,q){return p*q}function n(p,q){return p/q}function r(p,q){return p%q}function t(p,q){return""+p+q}function v(p){return-p}function z(p){return Math.random()*(p||1)}function u(p){for(var q=p=Math.floor(p);1<p;)q*=--p;return q}function D(p,q){return Math.sqrt(p*p+q*q)}function E(p,q){if("[object Array]"!=
Object.prototype.toString.call(p))return[p,q];p=p.slice();p.push(q);return p}function F(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:SyCalc.sin,cos:SyCalc.cos,tan:SyCalc.tan,cot:SyCalc.cot,sec:SyCalc.sec,csc:SyCalc.csc,arcsin:SyCalc.arcsin,arccos:SyCalc.arccos,arctan:SyCalc.arctan,arccot:SyCalc.arccot,arcsec:SyCalc.arcsec,arccsc:SyCalc.arccsc,sinh:SyCalc.sinh,cosh:SyCalc.cosh,tanh:SyCalc.tanh,coth:SyCalc.coth,
sech:SyCalc.sech,csch:SyCalc.csch,arcsinh:SyCalc.arcsinh,arccosh:SyCalc.arccosh,arctanh:SyCalc.arctanh,arccoth:SyCalc.arccoth,arcsech:SyCalc.arcsech,arccsch:SyCalc.arccsch,sqrt:Math.sqrt,log:Math.log10,ln:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":v,exp:Math.exp};this.ops2={"+":h,"-":m,"*":l,"/":n,"%":r,"^":Math.pow,",":E,"||":t};this.functions={random:z,fac:u,min:Math.min,max:Math.max,pyt:D,pow:Math.pow};this.consts={e:Math.E,pi:Math.PI,"\u03c0":Math.PI}}mchEps=10*
calcEps();var x=/[\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,A={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};e.prototype={simplify:function(p){p=p||{};var q=[],w=[],B=this.tokens.length,C;for(C=0;C<B;C++){var y=this.tokens[C];var G=y.type_;if(0===G)q.push(y);else if(3===G&&y.index_ in p)y=new f(0,0,0,p[y.index_]),q.push(y);else if(2===G&&1<q.length){var H=q.pop();G=q.pop();y=this.ops2[y.index_];
y=new f(0,0,0,y(G.number_,H.number_));q.push(y)}else if(1===G&&0<q.length)G=q.pop(),y=this.ops1[y.index_],y=new f(0,0,0,y(G.number_)),q.push(y);else{for(;0<q.length;)w.push(q.shift());w.push(y)}}for(;0<q.length;)w.push(q.shift());return new e(w,b(this.ops1),b(this.ops2),b(this.functions))},evaluate:function(p){p=p||{};var q=[],w=this.tokens.length,B;for(B=0;B<w;B++){var C=this.tokens[B];var y=C.type_;if(0===y)q.push(C.number_);else if(2===y){var G=q.pop();y=q.pop();if("/"==C.index_&&B<w-1&&"^"==this.tokens[B+
1].index_&&0>q[q.length-1]&&0===G%1&&0===y%1&&0!==G%2){C=q.pop();var H=q;H.push.call(H,Math.pow(-Math.pow(-C,1/G),y));B++}else C=this.ops2[C.index_],q.push(C(y,G))}else if(3===y)if(C.index_ in p)q.push(p[C.index_]);else if(C.index_ in this.functions)q.push(this.functions[C.index_]);else throw Error("undefined variable: "+C.index_);else if(1===y)y=q.pop(),C=this.ops1[C.index_],q.push(C(y));else if(4===y)if(y=q.pop(),C=q.pop(),C.apply&&C.call)"[object Array]"==Object.prototype.toString.call(y)?q.push(C.apply(void 0,
y)):q.push(C.call(void 0,y));else throw Error(C+" is not a function");else throw Error("invalid Expression");}if(1<q.length)throw Error("invalid Expression (parity)");return Math.round(q[0]/mchEps)*mchEps},toString:function(p){var q=[],w=this.tokens.length,B;for(B=0;B<w;B++){var C=this.tokens[B];var y=C.type_;if(0===y)q.push(g(C.number_));else if(2===y){var G=q.pop();y=q.pop();C=C.index_;p&&"^"==C?q.push("Math.pow("+y+","+G+")"):q.push("("+y+C+G+")")}else if(3===y)q.push(C.index_);else if(1===y)y=
q.pop(),C=C.index_,"-"===C?q.push("("+C+y+")"):q.push(C+"("+y+")");else if(4===y)y=q.pop(),C=q.pop(),q.push(C+"("+y+")");else throw Error("invalid Expression");}if(1<q.length)throw Error("invalid Expression (parity)");return q[0]},variables:function(){for(var p=this.tokens.length,q=[],w=0;w<p;w++){var B=this.tokens[w];3===B.type_&&-1==q.indexOf(B.index_)&&q.push(B.index_)}return q},toJSFunction:function(p,q){return new Function(p,"with(Parser.values) { return "+this.simplify(q).toString(!0)+"; }")}};
F.parse=function(p){p=p.replace(/\u03c0\(/g,"\u03c0*(");return(new F).parse(p)};F.evaluate=function(p,q){return p.evaluate(q)};F.Expression=e;F.values={sin:SyCalc.sin,cos:SyCalc.cos,tan:SyCalc.tan,cot:SyCalc.cot,csc:SyCalc.csc,sec:SyCalc.sec,arcsin:SyCalc.arcsin,arccos:SyCalc.arccos,arctan:SyCalc.arctan,arccot:SyCalc.arccot,arccsc:SyCalc.arccsc,arcsec:SyCalc.arcsec,sinh:SyCalc.sinh,cosh:SyCalc.cosh,tanh:SyCalc.tanh,coth:SyCalc.coth,csch:SyCalc.csch,sech:SyCalc.sech,arcsinh:SyCalc.arcsinh,arccosh:SyCalc.arccosh,
arctanh:SyCalc.arctanh,arccoth:SyCalc.arccoth,arccsch:SyCalc.arccsch,arcsech:SyCalc.arcsech,sqrt:SyCalc.sqrt,log:Math.log10,ln:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,random:z,fac:u,exp:Math.exp,min:Math.min,max:Math.max,pyt:D,pow:Math.pow,E:Math.E,PI:Math.PI};F.prototype={parse:function(p){this.errormsg="";this.success=!0;var q=[],w=[];this.tmpprio=0;var B=77,C=0;this.expression=p;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&B&64?
(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",C++,this.addfunc(w,q,1)),B=77):this.isComment()||(0===(B&2)&&this.error_parsing(this.pos,"unexpected operator"),C+=2,this.addfunc(w,q,2),B=77):this.isNumber()?(0===(B&1)&&this.error_parsing(this.pos,"unexpected number"),B=new f(0,0,0,this.tokennumber),w.push(B),B=50):this.isString()?(0===(B&1)&&this.error_parsing(this.pos,"unexpected string"),B=new f(0,0,0,this.tokennumber),w.push(B),B=50):this.isLeftParenth()?(0===(B&8)&&this.error_parsing(this.pos,
'unexpected "("'),B&128&&(C+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(w,q,4)),B=77):this.isRightParenth()?(0===(B&16)&&this.error_parsing(this.pos,'unexpected ")"'),B=186):this.isComma()?(0===(B&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(w,q,2),C+=2,B=77):this.isConst()?(0===(B&1)&&this.error_parsing(this.pos,"unexpected constant"),B=new f(0,0,0,this.tokennumber),w.push(B),B=50):this.isOp2()?(0===(B&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(w,
q,2),C+=2,B=8):this.isOp1()?(0===(B&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(w,q,1),C++,B=8):this.isVar()?(0===(B&1)&&this.error_parsing(this.pos,"unexpected variable"),B=new f(3,this.tokenindex,0,0),w.push(B),B=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,'unmatched "()"');0<q.length;)B=q.pop(),w.push(B);C+1!==w.length&&
this.error_parsing(this.pos,p+": parity "+C+1+", "+w);return new e(w,b(this.ops1),b(this.ops2),b(this.functions))},evaluate:function(p,q){return this.parse(p).evaluate(q)},error_parsing:function(p,q){this.success=!1;this.errormsg="parse error [column "+p+"]: "+q;throw Error(this.errormsg);},addfunc:function(p,q,w){for(w=new f(w,this.tokenindex,this.tokenprio+this.tmpprio,0);0<q.length;)if(w.prio_<=q[q.length-1].prio_)p.push(q.pop());else break;q.push(w)},isNumber:function(){for(var p=!1,q="";this.pos<
this.expression.length;){var w=this.expression.charCodeAt(this.pos);if(48<=w&&57>=w||46===w)q+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(q),p=!0;else break}return p},unescape:function(p,q){for(var w=[],B=!1,C=0;C<p.length;C++){var y=p.charAt(C);if(B){switch(y){case "'":w.push("'");break;case "\\":w.push("\\");break;case "/":w.push("/");break;case "b":w.push("\b");break;case "f":w.push("\f");break;case "n":w.push("\n");break;case "r":w.push("\r");break;case "t":w.push("\t");
break;case "u":B=parseInt(p.substring(C+1,C+5),16);w.push(String.fromCharCode(B));C+=4;break;default:throw this.error_parsing(q+C,"Illegal escape sequence: '\\"+y+"'");}B=!1}else"\\"==y?B=!0:w.push(y)}return w.join("")},isString:function(){var p=!1,q="",w=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==q.slice(-1))q+=this.expression.charAt(this.pos),this.pos++;else{this.pos++;
this.tokennumber=this.unescape(q,w);p=!0;break}return p},isConst:function(){var p;for(p in this.consts){var q=p.length;var w=this.expression.substr(this.pos,q);if(p===w)return this.tokennumber=this.consts[p],this.pos+=q,!0}return!1},isOperator:function(){var p=this.expression.charCodeAt(this.pos);if(43===p)this.tokenprio=0,this.tokenindex="+";else if(45===p)this.tokenprio=0,this.tokenindex="-";else if(124===p)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=0,this.tokenindex=
"||";else return!1;else if(42===p)this.tokenprio=1,this.tokenindex="*";else if(47===p)this.tokenprio=2,this.tokenindex="/";else if(37===p)this.tokenprio=2,this.tokenindex="%";else if(94===p)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var p=this.expression.charCodeAt(this.pos-1);return 45===p||43===p?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-
1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var p=this.expression.charCodeAt(this.pos);return 32===p||9===p||10===p||13===p?(this.pos++,!0):!1},isOp1:function(){for(var p=
"",q=this.pos;q<this.expression.length;q++){var w=this.expression.charAt(q);if(w.toUpperCase()===w.toLowerCase()&&(q===this.pos||"0">w||"9"<w))break;p+=w}return 0<p.length&&p in this.ops1?(this.tokenindex=p,this.tokenprio=5,this.pos+=p.length,!0):!1},isOp2:function(){for(var p="",q=this.pos;q<this.expression.length;q++){var w=this.expression.charAt(q);if(w.toUpperCase()===w.toLowerCase()&&(q===this.pos||"0">w||"9"<w))break;p+=w}return 0<p.length&&p in this.ops2?(this.tokenindex=p,this.tokenprio=5,
this.pos+=p.length,!0):!1},isVar:function(){for(var p="",q=this.pos;q<this.expression.length;q++){var w=this.expression.charAt(q);if(w.toUpperCase()===w.toLowerCase()&&(q===this.pos||"0">w||"9"<w))break;p+=w}return 0<p.length?(this.tokenindex=p,this.tokenprio=4,this.pos+=p.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),
!0):!1}};return a.Parser=F}("undefined"===typeof exports?{}:exports),SyNumberLine=function(a,b,f,e){this.valid=!0;this.numberLineInfo=f;this.inStepImageUrl=e;this.targetElement=a;this.elementsToHide=b;e?(this.width=a.width(),this.drawInStepImage()):f&&f.imageAPI?(this.width=a.width()-20,this.drawNumberLine()):this.valid=!1};SyNumberLine.fromNumberLineInfo=function(a,b,f){return new SyNumberLine(a,b,f,void 0)};SyNumberLine.fromInStepImageUrl=function(a,b,f){return new SyNumberLine(a,b,void 0,f)};
SyNumberLine.prototype={drawNumberLine:function(){var a=this,b=window.devicePixelRatio,f=b*a.width,e=a.numberLineInfo.imageAPI+"&width="+f;a.numberLineInfo.animatedImageAPI&&(e=a.numberLineInfo.animatedImageAPI+"&width="+f);f=-48;50<100/b&&(f=-75);var g=$("<img/>",{css:{width:a.width,padding:"10px",margin:"auto",display:"block","max-width":"100%"}});g.hide();$("#numberLineLoader").css("margin-top",f+"px");a.targetElement.append(g);g.hide();b=$("#empty_number_line_img img",{css:{margin:"auto",display:"block",
"max-width":"100%"}});f=e.replace("numberLineAddSubtractAnimated","emptyNumberLineAddSubtract").replace("wordProblem","emptyWordProblem");ajaxImage(f,b,a.elementsToHide).then(function(m){});var h=$("#playStopGifBtn");ajaxImage(e,g,a.elementsToHide).then(function(m){g.show();"image/gif"===m.type?($("#numberLineLoader").hide(),$("#empty_number_line_img").hide(),$("#numberLineLoader img").remove(),$("#empty_number_line_img img").remove(),h.addClass("nl-show"),h.addClass("play_icon"),h.click(function(l){if(h.hasClass("play_icon")||
h.hasClass("replay"))h.removeClass("play_icon"),h.addClass("replay"),a.restartNumberLine(l)})):($("#numberLineLoader").hide(),$("#empty_number_line_img").hide())}).catch(()=>{$("#numberLineLoader").hide();$("#empty_number_line_img").hide()})},restartNumberLine:function(a){var b=$("#numberLine img"),f=b.attr("src");a.preventDefault();b.attr("src","");b.attr("src",f)},drawInStepImage:function(){var a=this,b=window.devicePixelRatio,f=a.inStepImageUrl+"&width="+b*a.width+"&ratio="+b,e=-48;50<100/b&&(e=
-75);var g=$("<i />",{"class":"playStopGifBtn"});a.targetElement.append(g);var h=$("<div />",{"class":"solution_box",css:{"margin-left":"0px",border:"none"}});a.targetElement.append(h);var m=$("<img />",{css:{width:a.width,margin:"auto",display:"block","max-width":"100%"}}),l=$("<div>",{"class":"empty_number_line_img",css:{"padding-left":"0px","padding-right":"0px"}});l.append(m);h.append(l);var n=$("<img />",{src:"/public/img/ajax-loader.gif"}),r=$("<div>",{"class":"numberLineLoader",css:{"margin-left":a.width/
2-16+"px"}}).append(n);h.append(r);var t=$("<img/>",{css:{width:a.width,"padding-top":"10px","padding-bottom":"10px",margin:"auto",display:"block","max-width":"100%"}});t.hide();r.css("margin-top",e+"px");a.targetElement.append(t);t.hide();e=f.replace("numberLineAddSubtractAnimated","emptyNumberLineAddSubtract").replace("multiply","emptyMultiply").replace("wordProblem","emptyWordProblem");ajaxImage(e,m,a.elementsToHide).then(function(v){m.css("width",m[0].naturalWidth/b+"px")});ajaxImage(f,t,a.elementsToHide).then(function(v){r.hide();
l.hide();t.css("width",t[0].naturalWidth/b+"px");"image/gif"===v.type&&(g.addClass("nl-show"),g.addClass("play_icon"),g.on("click",function(z){if(g.hasClass("play_icon")||g.hasClass("replay"))g.removeClass("play_icon"),g.addClass("replay"),a.restartNumberLineInStep(z,t)}));t.show();n.remove();m.remove()}).catch(()=>{r.hide();l.hide();n.remove();m.remove()})},restartNumberLineInStep:function(a,b){var f=b.attr("src");a.preventDefault();b.attr("src","");b.attr("src",f)}};
function SyPlotSettingsInfo(){this.isDrawAxisIntercepts={draw:!1,possible:!0};this.isDrawExtreme={draw:!1,possible:!0};this.isDrawAsypmtotes={draw:!1,possible:!1};this.isDrawFunctionIntercepts={draw:!1,possible:!1};this.xLabel="";this.x2=this.x1=0;this.yLabel="";this.y2=this.y1=0}
function SyPlotSettingsHolder(){this.defaultSettings=new SyPlotSettingsInfo;this.updateSettingsCallback=this.showHomeCallback=this.hideHomeCallback=this.tempSettings=this.userSettings=null;this.logActivityType="GraphingCalculator"}
SyPlotSettingsHolder.prototype={cur:function(){return this.tempSettings?this.tempSettings:this.userSettings?this.userSettings:this.defaultSettings},hasUserSettings:function(){return null!=this.userSettings},createUserSettings:function(){this.userSettings=jQuery.extend(!0,{},this.cur());this.tempSettings=null;this.updateSettingsFromHTML();this.notifyUpdatedUserSettings(!1)},init:function(a,b,f){var e=this;e.syPlot=b;f&&(e.userSettings=null,e.tempSettings=null);e.defaultSettings=new SyPlotSettingsInfo;
$("#canvasZoom").remove();e.canvasZoom=$("<div id='canvasZoom' class='no-select'></div>").insertAfter(b.graphJQ);sy_graphSettings.defaultSettings.isDrawAxisIntercepts.draw=!0;sy_graphSettings.defaultSettings.isDrawExtreme.draw=!0;sy_graphSettings.defaultSettings.isDrawFunctionIntercepts.draw=!0;if(a.showSettings&&(f=$("body"),0===$("#settingsContainer").length)){const h=$("#settingsBoxTemplate").clone();h.find("*[id]").each(function(m,l){$(l).attr("id",$(l).attr("id").replace("_",""))});f.append(h.html());
f.off("click","#settingsButtonContainer").on("click","#settingsButtonContainer",function(){e.toggleSettings()})}a.showZoom&&(f="",a.showSettings&&(f+='<div id="settingsButtonContainer"><svg id="canvasSettings"><use href="#graph-settings"></use></svg></div>'),this.canvasZoom.append(f+'<div id="graph-plus-minus"><div id="graph-plus"><img alt="zoom in" id="zoomIn" src="/public/images/solution-plot-plus.svg" width="24" height="24"></div><div id="graph-minus"><img alt="zoom out" id="zoomOut" src="/public/images/solution-plot-minus.svg" width="24" height="24"></div></div><div id="graph-focus"><img alt="graph reset" id="graphReset" src="/public/images/solution-plot-focus.svg" width="24" height="24"></div>'));
e.defaultSettings.isDrawAsypmtotes.draw=!1;e.defaultSettings.isDrawAsypmtotes.possible=!1;if(b.plotInfo&&b.plotInfo.funcsToDraw)for(var g in b.plotInfo.funcsToDraw.funcs)b.plotInfo.funcsToDraw.funcs[g].attributes.isAsymptote&&(e.defaultSettings.isDrawAsypmtotes.draw=!0,e.defaultSettings.isDrawAsypmtotes.possible=!0);e.userSettings&&(e.userSettings.isDrawAsypmtotes.possible=e.defaultSettings.isDrawAsypmtotes.possible);e.tempSettings&&(e.tempSettings.isDrawAsypmtotes.possible=e.defaultSettings.isDrawAsypmtotes.possible);
$(".rangeSelect").unbind("keyup").keyup(function(){e.createUserSettings();e.syPlot.draw(!0);$(this).attr("id").includes("x")?symbolab_log(e.logActivityType,"Settings","XRange"):symbolab_log(e.logActivityType,"Settings","YRange")});$("#xLabel, #yLabel").unbind("keyup").keyup(function(){e.createUserSettings();e.syPlot.draw(!0);$(this).attr("id").includes("x")?symbolab_log(e.logActivityType,"Settings","XLabel"):symbolab_log(e.logActivityType,"Settings","YLabel")});$("#asymCheck svg").unbind("click").click(function(){const h=
"#toggle-full-keypad"===$("#asymCheck svg use").attr("href")?"#toggle-full-keypad-open":"#toggle-full-keypad";$("#asymCheck svg use").attr("href",h);e.createUserSettings();e.syPlot.draw(!0);e.logChecked(this,"Asymptotes");e.notifyUpdatedUserSettings(!1)});$("#extCheck svg").unbind("click").click(function(){const h="#toggle-full-keypad"===$("#extCheck svg use").attr("href")?"#toggle-full-keypad-open":"#toggle-full-keypad";$("#extCheck svg use").attr("href",h);e.createUserSettings();e.syPlot.draw(!0);
e.logChecked(this,"Extremes");e.notifyUpdatedUserSettings(!1)});$("#axisCheck svg").unbind("click").click(function(){const h="#toggle-full-keypad"===$("#axisCheck svg use").attr("href")?"#toggle-full-keypad-open":"#toggle-full-keypad";$("#axisCheck svg use").attr("href",h);e.createUserSettings();e.syPlot.draw(!0);e.logChecked(this,"AxisIntercepts");e.notifyUpdatedUserSettings(!1)});$("#funcCheck svg").unbind("click").click(function(){const h="#toggle-full-keypad"===$("#funcCheck svg use").attr("href")?
"#toggle-full-keypad-open":"#toggle-full-keypad";$("#funcCheck svg use").attr("href",h);e.createUserSettings();e.syPlot.draw(!0);e.logChecked(this,"FuncIntersection");e.notifyUpdatedUserSettings(!1)});$("#resetSettingsBtn").unbind("click").click(function(){e.tempSettings=null;e.userSettings=null;e.hideHomeButton();symbolab_log(e.logActivityType,"Settings","Reset");$("#settingsContainer").fadeOut("fast");e.syPlot.draw(!0);e.notifyUpdatedUserSettings(!1);symbolab_log("GraphingCalculator","Settings",
"Reset")});$("#zoomIn").parent().unbind("click").click(async function(){await e.syPlot.zoomInOut(!0);e.syPlot.donePanning();e.updateHTMLFromSettings()});$("#zoomOut").parent().unbind("click").click(async function(){await e.syPlot.zoomInOut(!1);e.syPlot.donePanning();e.updateHTMLFromSettings()});0<=window.location.href.indexOf("/graphing-calculator")&&e.syPlot.graphJQ.unbind("mousewheel").mousewheel(function(h,m){clearTimeout($.data(this,"timer"));$.data(this,"timer",setTimeout(function(){e.syPlot.donePanning()},
50));0<m?e.syPlot.zoomInOut(!0,h):e.syPlot.zoomInOut(!1,h)});$("#graphReset").parent().unbind("click").click(function(){e.homeClicked();symbolab_log("GraphingCalculator","Zoom","Home")});e.notifyUpdatedUserSettings(!0)},homeClicked:function(){this.tempSettings=null;this.hideHomeButton();this.closeSettings();this.syPlot.draw(!0);symbolab_log(this.logActivityType,"Settings","Home")},hideHomeButton:function(){$("#graphReset").fadeOut("fast");$("#graphReset").parent().fadeOut("fast");this.hideHomeCallback&&
this.hideHomeCallback()},showHomeButton:function(){$("#graphReset").fadeIn("fast");$("#graphReset").parent().fadeIn("fast");this.showHomeCallback&&this.showHomeCallback()},settingsOpen:function(){return $("#settingsContainer").is(":visible")},toggleSettings:function(a,b){void 0===a&&(a=!0);void 0===b&&(b=!0);$(".graphMainMenu").removeClass("show");let f=$("#settingsButtonContainer");const e=$("#settingsContainer");this.settingsOpen()?b&&(symbolab_log("GraphingCalculator","Settings","Close"),e.fadeOut("fast"),
f.removeClass("red_background_parent")):a&&(this.updateHTMLFromSettings(),symbolab_log("GraphingCalculator","Settings","Open"),e.fadeIn("fast"),f.addClass("red_background_parent"))},closeSettings:function(){var a=$("#settingsContainer");this.settingsOpen()&&(a.fadeOut("fast"),symbolab_log(this.logActivityType,"Settings","Close"))},logChecked:function(a,b){"#toggle-full-keypad-open"===$(a).find("svg use").attr("href")?symbolab_log(this.logActivityType,b,"On"):symbolab_log(this.logActivityType,b,"Off")},
updateCoordinates:function(){this.tempSettings=jQuery.extend(!0,{},this.cur());this.cur().x1=this.syPlot.currCoord.x1.toFixed(2);this.cur().x2=this.syPlot.currCoord.x2.toFixed(2);this.cur().y1=this.syPlot.currCoord.y1.toFixed(2);this.cur().y2=this.syPlot.currCoord.y2.toFixed(2)},updateSettingsFromHTML:function(){this.cur().x1=$("#x1").val();this.cur().x2=$("#x2").val();this.cur().y1=$("#y1").val();this.cur().y2=$("#y2").val();this.cur().xLabel=$("#xLabel").val();this.cur().yLabel=$("#yLabel").val();
this.cur().isDrawAsypmtotes.draw="#toggle-full-keypad-open"===$("#asymCheck svg use").attr("href");this.cur().isDrawExtreme.draw="#toggle-full-keypad-open"===$("#extCheck svg use").attr("href");this.cur().isDrawAxisIntercepts.draw="#toggle-full-keypad-open"===$("#axisCheck svg use").attr("href");this.cur().isDrawFunctionIntercepts.draw="#toggle-full-keypad-open"===$("#funcCheck svg use").attr("href");null==this.tempSettings&&this.hideHomeButton()},notifyUpdatedUserSettings:function(a){this.updateSettingsCallback&&
this.updateSettingsCallback(a)},adjustCheck:function(a,b){!1===a.possible?$(b).hide():($(b).show(),a=a.draw?"#toggle-full-keypad-open":"#toggle-full-keypad",$(b).find("svg use").attr("href",a),$(b).css("color",""))},updateHTMLFromSettings:function(){$("#x1").val(this.cur().x1);$("#x2").val(this.cur().x2);$("#y1").val(this.cur().y1);$("#y2").val(this.cur().y2);$("#xLabel").val(this.cur().xLabel);$("#yLabel").val(this.cur().yLabel);this.adjustCheck(this.cur().isDrawAxisIntercepts,"#axisCheck");this.adjustCheck(this.cur().isDrawExtreme,
"#extCheck");this.adjustCheck(this.cur().isDrawAsypmtotes,"#asymCheck");this.adjustCheck(this.cur().isDrawFunctionIntercepts,"#funcCheck");$("#graphSettingSections hr, #graphSettingSections label").show();!1===this.cur().isDrawAxisIntercepts.possible&&!1===this.cur().isDrawExtreme.possible&&!1===this.cur().isDrawAsypmtotes.possible&&!1===this.cur().isDrawFunctionIntercepts.possible&&$("#graphSettingSections .settingsDivider, #graphSettingSections label").hide()},isMultipleFunctions:function(){return 1<
this.countsValidFunctions()},countsValidFunctions:function(){var a=0;if(this.syPlot.plotInfo&&this.syPlot.plotInfo.funcsToDraw&&this.syPlot.plotInfo.funcsToDraw.funcs)for(var b=0;b<this.syPlot.plotInfo.funcsToDraw.funcs.length;b++)if(!this.syPlot.plotInfo.funcsToDraw.funcs[b].attributes.isAsymptote){if(f){if(this.syPlot.plotInfo.funcsToDraw.funcs[b].displayFormula===f)continue}else var f=this.syPlot.plotInfo.funcsToDraw.funcs[b].displayFormula;a++}return a},getNonAsymptoteFunctions:function(){var a=
0;if(this.syPlot.plotInfo&&this.syPlot.plotInfo.funcsToDraw&&this.syPlot.plotInfo.funcsToDraw.funcs)for(var b=0;b<this.syPlot.plotInfo.funcsToDraw.funcs.length;b++)this.syPlot.plotInfo.funcsToDraw.funcs[b].attributes.isAsymptote||a++;return a},loadSettingsFromJson:function(a){this.tempSettings=null;this.userSettings=jQuery.extend(!0,{},this.defaultSettings);this.cur().xLabel=a.graph.xAxis.label;this.cur().x1=a.graph.xAxis.min;this.cur().x2=a.graph.xAxis.max;this.cur().yLabel=a.graph.yAxis.label;this.cur().y1=
a.graph.yAxis.min;this.cur().y2=a.graph.yAxis.max;a.graph.graphSettings.forEach(function(b,f){$("#"+b.fst+" input").attr("checked","checked"===b.snd?"checked":!1)});this.cur().isDrawAsypmtotes.draw="#toggle-full-keypad-open"===$("#asymCheck svg use").attr("href");this.cur().isDrawExtreme.draw="#toggle-full-keypad-open"===$("#extCheck svg use").attr("href");this.cur().isDrawAxisIntercepts.draw="#toggle-full-keypad-open"===$("#axisCheck svg use").attr("href");this.cur().isDrawFunctionIntercepts.draw=
"#toggle-full-keypad-open"===$("#funcCheck svg use").attr("href");this.syPlot&&this.syPlot.draw(!0)},outputGraphSettings:function(){return[{fst:"asymCheck",snd:this.cur().isDrawAsypmtotes.draw?"checked":"false"},{fst:"extCheck",snd:this.cur().isDrawExtreme.draw?"checked":"false"},{fst:"axisCheck",snd:this.cur().isDrawAxisIntercepts.draw?"checked":"false"},{fst:"funcCheck",snd:this.cur().isDrawFunctionIntercepts.draw?"checked":"false"}]}};var sy_graphSettings=new SyPlotSettingsHolder;
class SymbolabSteps{constructor(){this.solution=new SymbolabSolution;this.solutionSteps=new SymbolabSolutionSteps;this.dym=new Dym;this.related=new Related;this.plot=new Plot;this.challengeLink=new ChallengeLink;this.refreshPageState={}}createState(a){return new RenderState(a)}renderSolution(a){a.solutionContainer=this.solution.render(a.solutionObject.solution.solution,a)}renderSteps(a){a.solutionMethodsAndTitleContainer=this.solutionSteps.renderMethodsAndTitle(a.stepsObject.solution.steps,a);a.solutionStepsContainer=
this.solutionSteps.renderStepsContainer(a.stepsObject.solution.steps,a);a.solutionStepByStepContainer=this.solutionSteps.renderStepByStep(a.stepsObject.solution.steps,a)}renderDym(a){a.dymContainer=this.dym.render(a.solutionObject,a)}renderRelated(a){a.relatedContainer=this.related.render(a.solutionObject,a)}renderPlot(a,b,f){f.plotContainer=this.plot.render(a,b,f)}renderChallengeLink(a){a.challengeLinkContainer=this.challengeLink.render(a.solutionObject,a)}postRender(a,b){a.processPostRenderSteps(b);
$(a.solutionContainer).trigger("steps-rendered")}expandAllSteps(){const a=b=>{b.click();$(".interim_container:not(.open) .interim_step_title_container",b.next(".solution_step_list")).each((f,e)=>{a($(e))})};$(".interim_container:not(.open) .interim_step_title_container").each((b,f)=>a($(f)));$(".solution_step_definition:not(.expanded)").each((b,f)=>$(f).click());$("[id='solution-format-indicator'].collapse").each((b,f)=>$(f).click())}createMessageBox(a){const b=$('<div class="solution_div"></div>'),
f=$('<div class="solution_box solution_outside_box"></div>'),e=$("<div class='solution_title_container_highest'> </div>");e.append(createMathquillDiv("solution_step_title",a));f.append(e);b.append(f);return b}methodSelect(a){state.selectedMethod=a;this.solutionSteps.method_select(void 0,state,!1)}}
class Network{getSolution(a){const b=a.config;return $.ajax({type:"POST",url:"/pub_api/bridge/solution",beforeSend:authorizeAjaxWithSyPubToken,data:{origin:b.origin,language:b.language,query:b.query,choices:b.choices,referer:b.referer,useDelimiters:!0},timeout:a.config.timeout})}getSteps(a,b=!1){const f=a.config;return $.ajax({type:"POST",url:"/pub_api/bridge/steps",beforeSend:authorizeAjaxWithSyToken,data:{appName:"Symbolab",symbolabQuestion:f.query,language:f.language,origin:f.origin,choices:f.choices,
referer:f.referer,useDelimiters:!0,userRequestsFreeSteps:b},timeout:a.config.timeout})}getPlot(a){return $.ajax({type:"POST",url:"/pub_api/graph/plottingInfo",beforeSend:authorizeAjaxWithSyPubToken,data:{userGraph:JSON.stringify({formulas:[{fst:a.plotRequest}]}),origin:a.config.origin,language:a.config.language,nolog:!0,useDelimiters:!0},timeout:a.config.plotTimeout})}deleteNote(a){return $.ajax({type:"POST",url:"/api/notebook/deleteNotes",beforeSend:authorizeAjaxWithSyPubToken,data:{symbolab_questions:a}})}saveNote(a,
b,f,e){return $.ajax({type:"POST",url:"/api/notebook/addNote",beforeSend:authorizeAjaxWithSyPubToken,data:{symbolab_question:a,display:b,topic:f,savedFrom:e}})}verify(a,b,f,e){return $.ajax({type:"POST",url:"/pub_api/bridge/verify",beforeSend:authorizeAjaxWithSyPubToken,data:{symbolabQuestion:b,answer:f,language:a.config.language,appName:"Symbolab",origin:a.config.origin},timeout:a.config.timeout})}verifyProblem(a,b,f,e){return $.ajax({type:"POST",url:"/pub_api/bridge/verifyProblem",beforeSend:authorizeAjaxWithSyPubToken,
data:{problem:b,answer:f,language:a.config.language,appName:"Symbolab",origin:a.config.origin},timeout:a.config.timeout})}getPageData(a,b,f){return $.ajax({type:"POST",url:"/pub_api/bridge/pageData",beforeSend:authorizeAjaxWithSyPubToken,data:{host:a,page:b,query:f}})}}
class ScrollUtils{makeScrollable(a){const b=this;a.find(".interim_step_title, .solution_step_primary, .solution_step_title, .solution_step_result, .solution_step_explanation, .solution_step_definition_text, .solution_scrollable, .solution_math").not(".splitAnswerLineColon").each(function(){const f=$(this);f.is(":visible")&&!f.hasClass("syscrollable")&&(1===f.find(".mathquill-embedded-latex").length?(f.hasClass("splitAnswerFirst"),b.createScrollIgnoreMathrm(this)):$(this).find(".multiline").each(function(){f.hasClass("splitAnswerFirst")?
b.createScrollIgnoreMathrm(this):b.createScroll(this)}))})}createScrollIgnoreMathrm(a){if(0!==$(a).width()){var b=getActualWidth(a,!0),f=$(a).parent(),e=f.children().map(function(g,h){return $(h)===$(a)?0:$(h).outerWidth(!0)}).toArray().reduce(function(g,h){return g+h},0);f=f.width()-e;b<f||(createScrollForce(a,b),$(a).css({"float":"none"}))}}createScroll(a){if(0!==$(a).width()){var b=getActualWidth(a,!0)+70,f=getActualWidth(a,!1);if($(a).hasClass("solution_scrollable")){if(f<$(a).parent().width())return}else if(f<
$(a).parent().width()+70)return;createScrollForce(a,b);$(a).css({"float":"none"})}}}
class RenderState{constructor(a){this.postRenderSteps={};this.config=$.extend({},{stepsSettings:"hideSteps"},a);this.callbacks={};this.stepsArray=[];this.stepsHighestBox=[];this.stepsArrayIndex=0}eitherStepByStepOrChallenge(){return 0<=["challenge","stepByStep"].indexOf(this.config.stepsSettings)}addPostRenderStep(a,b){this._pushToRenderSteps(a,b??"none")}addMathquillifyVisible(a,b){this._pushToRenderSteps(()=>mathquillifyVisible(a),b??"none")}_pushToRenderSteps(a,b){const f=this.postRenderSteps[b]??
[];f.push(a);this.postRenderSteps[b]=f}processPostRenderSteps(a){this.postRenderSteps[a??"none"]?.forEach(b=>{b()});this.postRenderSteps[a??"none"]=[]}logFunnel(a,b){if(this.callbacks.logFunnel)return this.callbacks.logFunnel(a,b)}showUpgrade(a,b,f){this.callbacks.showUpgrade&&this.callbacks.showUpgrade(a,b,f)}}
class SymbolabSolution{render(a,b){const f=$(getSolutionTemplate());this.parseSolutions(a,f,b);b.addMathquillifyVisible($("#other-solutions",f));b.callbacks.handleElementAdded?.("solution",f,a);return f}parseSolutions(a,b,f){var e=a.default;if(void 0!==e){e=createMathquillDiv("solution_math",e,e);var g=$("#solution-only-target",b).empty();g.append(e);f.addMathquillifyVisible(g)}const h=["interval","radians","degrees","decimal","mixed_number"];e=Object.keys(a).filter(function(n){return 0<=h.indexOf(n)});
const m=$("#other-solutions-container",b),l=$("#other-solutions",b).empty();0<e.length&&(g=$("<div />",{"class":"other-solutions-spacer",html:"&nbsp;"}),e.forEach(function(n){const r=$("<div />",{"class":"one-solution"}),t=$("<div />",{"class":"one-solution-title",text:i18n(n)});n=createMathquillDiv("",a[n],"solution-"+n);r.append(t);r.append(n);l.append(r)}),l.append(g.clone()),$("#number-extra-formats",b).text("+"+e.length),e=()=>{m.toggleClass("hide-important");$("#solution-format-indicator",b).toggleClass("collapse");
mathquillifyVisible(l);f.logFunnel("ClickedFeature","MultipleSolutions")},e(),$("#solution-format-indicator",b).show().off("click").on("click",e))}}function getSolutionTemplate(){return`<div id="solution-only">
                <h2>${i18n("solution")}</h2>
                <div id="solution-only-one-line">
                    <div id="solution-only-target"></div>
                    <div id="solution-only-spacer">&nbsp;</div>
                    <div id="solution-format-indicator" class="hide">
                        <span id="number-extra-formats"></span>
                        <svg>
                            <use href="#chevron-reveal-up"></use>
                        </svg>
                    </div>
                </div>
                <div id="other-solutions-container" class="hide-important">
                    <div id="other-solutions"></div>
                </div>	
            </div>`}
class SymbolabSolutionSteps{renderMethodsAndTitle(a,b){if(!a)return $("#show-hide-steps-divider-surround").hide(),$("</div>");a=$(getMethodAndTitleTemplate());"stepByStep"===b.config.stepsSettings?a.find("#steps-button").addClass("active"):this.writeMethods(a,b);$("#steps-container",a).show();return a}renderStepsContainer(a,b){const f=$(getStepsTemplate(a?.meta?.practiceLink,a?.meta?.practiceTopic,b));this.writeSteps(a,f,b);this.openHideStepsNew(0,!0,a,f,b);return f}renderStepByStep(a,b){const f=
$(getStepByStepTemplate());this.writeSteps(a,f,b);this.openHideStepsNew(0,!0,a,f,b);return f}writeSteps(a,b,f){const e=$("<div />");if(a)if(f.eitherStepByStepOrChallenge())this.makeStepByStepSolution(f,b),$("#practice-link-container",b).hide();else{const g=$('<div class="solution_div"></div>');g.append(this.createSolutionBox(a,!0,f));e.append(g)}$("#multipleSolutions",b).empty().append(e.html())}writeMethods(a,b){const f=this,e=a.find("#methods-target"),g=b.stepsObject.solution.methods;g&&1<g.length&&
(a.find("#methods-container").removeClass("hide"),g.forEach(function(h){const m=createMathquillDiv(null,h.method,"",!0);h=$("<option />",{value:JSON.stringify({symbolab_question:h.query.symbolab_question,display:h.query.display}),html:m});e.append(h)}),e.val(g[0].query),b.selectedMethod=g[0].query.symbolab_question,b.addPostRenderStep(function(){mathquillify(a);setupGroupSelect(!1,function(h){b.logFunnel("ClickedFeature","SolvingOptions\tChange");f.method_select(h,b,!0)},void 0,function(){b.logFunnel("ClickedFeature",
"SolvingOptions")})}),a.find(".steps-title").hide())}method_select(a,b,f){a=$("#methods-target").val();a=JSON.parse(a);a.symbolab_question!==b.selectedMethod&&(f?b.selectedMethod=a.symbolab_question:a.symbolab_question=b.selectedMethod,b.callbacks.setNewQuery?.(a.symbolab_question,a.display,!0))}openHideStepsNew(a,b,f,e,g){f=$(".solution_title_container_highest",e).filter(function(){return $(this).data("index")===a});b&&this.addContentIfNeeded(f,g)}addContentIfNeeded(a,b){const f=a.data("index");
if("undefined"!=typeof f){const e=this.createSolutionBoxContent(b.stepsArray[f],b.stepsHighestBox[f],b);a.parent().append(e);mathquillify(e);b.addPostRenderStep(function(){mathquillifyRedrawOnly(e)});a.hasClass("solution_title_container_highest")||(a.removeData("index"),a.removeAttr("data-index"))}else a.parent().find(".ul-div").show(),a.parent().find(".solution_step_definition_text").show()}createSolutionBox(a,b,f){const e=this.createSolutionBoxDiv(a,b);a=this.getTitleContainer(a,b,f);e.append(a);
return e}createSolutionBoxDiv(a,b){return b?$('<div class="solution_box solution_outside_box"></div>'):$('<div class="solution_box solution_inside_box"></div>')}createSolutionBoxContent(a,b,f){a=this.createSolutionBoxContentUl2(a,b,f);f=$("<div></div>",{"class":"ul-div"});b||f.addClass("solution_list_div");f.append(a);return f}renderSteps(a,b,f,e,g){const h=this;switch(b.type){case "interim":if(f)b.input&&(a=createMathquillDiv("solution_step_title",b.input),a[0].step=b,e.append(a),g.callbacks.handleElementAdded?.("interim-step-input",
a,b)),b.steps.forEach(function(r){h.renderSteps("renderSteps - recursive",r,!1,e,g)}),g.callbacks.handleElementAdded?.("interim-steps",e,b);else{a=$("<div />",{"class":"interim_container"});f=$("<div />",{"class":"interim_step_title_container"});var m=createMathquillDiv("interim_step_title",b.title,null,!0),l=$("<div />",{"class":"interim_step_title_spacer",html:"&nbsp;"}),n=$("<svg class='arrow print-hide'><use href='#chevron-reveal-up-black'></use></svg>");f.append(m).append(l);if(b.meta?.gptData&&
"challenge"!==g?.config?.stepsSettings){this.sendAiChatSeenEvent(g);a.addClass("no-inner-ai");m=$("<svg class='locked-step-icon'><use href='#ai-help-with-body'></use></svg>");m=$("<span />",{"class":"ai-help-element print-hide","data-tooltip":i18n("Click for AI help")}).append(m);l=$("<svg class='locked-step-icon'><use href='#ai-help-with-body-open'></use></svg>");l=$("<button />",{"class":"ai-help-element-open inner"}).append(l);const r=$("<div>",{"class":"ai-help-container"}).append(m).append(l);
f.append(r);this.attachChatButtonEvents(g,b,m,l)}f.append(n);g.callbacks.handleElementAdded?.("interim-step-title",f,b);a.append(f);e.append(a);f.off("click").on("click",function(){const r=$(this).closest(".interim_container");h.toggleInterimStep(r,b,g)})}this.addResultToStep(e,b,g);break;case "step":b.meta?.gptData&&"challenge"!==g?.config?.stepsSettings&&(this.sendAiChatSeenEvent(g),a=$("<svg class='locked-step-icon'><use href='#ai-help-with-body'></use></svg>"),a=$("<span />",{"class":"ai-help-element print-hide",
"data-tooltip":i18n("Click for AI help")}).append(a),f=$("<svg class='locked-step-icon'><use href='#ai-help-with-body-open'></use></svg>"),f=$("<button />",{"class":"ai-help-element-open inner"}).append(f),n=$("<div>",{"class":"ai-help-container"}).append(a).append(f),e.append(n),this.attachChatButtonEvents(g,b,a,f));b.primary&&(a=createMathquillDiv("solution_step_primary",b.primary,null,!0),e.append(a),a[0].step=b,g.callbacks.handleElementAdded?.("regular-step-primary",a,b));b.secondary&&b.secondary.forEach(function(r){r=
createMathquillDiv("solution_step_secondary",r,null,!0);r[0].step=b;e.append(r);g.callbacks.handleElementAdded?.("regular-step-secondary",r,b)});if(void 0!==b.image){const r=$("<div></div>");e.append(r);setTimeout(()=>{SyNumberLine.fromInStepImageUrl(r,$("blank"),b.image)},0)}this.addResultToStep(e,b,g);break;case "definition":h.writeDefinition(e,b,g);b.secondary&&b.secondary.forEach(function(r){e.append(createMathquillDiv("solution_step_secondary",r,null,!0))});break;case "html":a=RegExp("</?formula.*?>",
"g"),f=$('<div class="external_step"></div>'),f.append(b.content.replaceAll(a,"###")),renderMathInElement(f[0],{delimiters:[{left:"###",right:"###",display:!1}]}),0<=f[0].innerText.indexOf("###")?e.append(f):(e.append(f),g.callbacks.handleElementAdded?.("html-step-content",f,b))}}sendAiChatSeenEvent(a){a.seenAiOutside||(a.callbacks.logFunnel("SeenFeature","Chat\tStepIcon"),a.seenAiOutside=!0)}attachChatButtonEvents(a,b,f,e){const g=function(h){h.preventDefault();h.stopPropagation();a.callbacks.openAiChatPane(b.meta?.gptData,
b.meta?.gptTitle??b.input,a.solutionObject.solution.query.display,f)};f.on("click",g);e.on("click",g)}addResultToStep(a,b,f){if(b.result){const e=createMathquillDiv("solution_step_title",b.result);e[0].step=b;a.append(e);f.callbacks.handleElementAdded?.("regular-step-result",e,b);return e}}toggleInterimStep(a,b,f){const e=this;if(a.hasClass("open"))a.removeClass("open"),a.find("> .solution_step_list").hide(),a.find("> .unlock-steps-message").hide(),this.toggleParentResult(a);else{var g=a.find("> .solution_step_list");
0<g.length?(a.addClass("open"),g.show(),a.find(".unlock-steps-message").show(),this.toggleParentResult(a)):setTimeout(()=>{const h=$('<div class="solution_step_list"></div>');if(b.input){var m=createMathquillDiv("solution_step_title",b.input);f.callbacks.handleElementAdded?.("interim-step-input",m,b);if(b.meta?.gptData&&"challenge"!==f?.config?.stepsSettings){var l=$("<svg class='locked-step-icon'><use href='#ai-help-with-body'></use></svg>");const n=$("<button />",{"class":"ai-help-element inner",
"data-tooltip":i18n("Click for AI help")}).append(l);l=$("<svg class='locked-step-icon'><use href='#ai-help-with-body-open'></use></svg>");l=$("<button />",{"class":"ai-help-element-open inner"}).append(l);l=$("<div>",{"class":"ai-help-container"}).append(n).append(l);n.off("click").on("click",function(r){r.preventDefault();f.callbacks.openAiChatPane(b.meta?.gptData,b.meta?.gptTitle??b.input,f.solutionObject.solution.query.display,n)});m=$("<div>",{class:"input-with-ai-help"}).append(m).append(l)}h.append(m)}b.steps.forEach(function(n){e.renderSteps("toggleInterimStep",
n,!1,h,f)});f.callbacks.handleElementAdded?.("interim-steps",h,b);a.append(h);a.addClass("open");if(b.locked){h.addClass("locked");getTopicToSend(f);m=b.meta?.gptData&&"challenge"!==f?.config?.stepsSettings;f.solutionObject.solution.solution.interimType=b.meta?.interimType;l=getUnlockMessageTemplate(f,m);l=$(l);a.append(l);const n="Blurred"+(m?"AI":"");l.off("click");l.click(function(){signedIn?f.showUpgrade(n,!0):window.location=getRegistrationUrl("upgrade","LockedStep","",{page:"plans"})});f.callbacks.logFunnel2("SeenFeature",
n,b.meta?.interimType)}else mathquillifyVisible(a),f.callbacks.logFunnel2("ClickedFeature","UnlockedInterim",b.meta?.interimType);this.toggleParentResult(a);return!0},0)}}toggleParentResult(a){var b=a.find("> .solution_step_list > .solution_step_title:last-child > .mathquill-embedded-latex")?.mathquill("latex");const f=a.next();if(0!==f.length&&f.hasClass("solution_step_title")&&f.find("> .mathquill-embedded-latex").mathquill("latex")===b){b=a.parent().children().last();var e=a.hasClass("open");f.toggleClass("last_result_hidden",
e);b[0]===f[0]&&(a.parent().toggleClass("last_result_hidden",e),a.toggleClass("last_result_hidden",e))}}writeDefinition(a,b,f){const e=$("<div />",{"class":"solution_step_definition_title_container"});var g=$("<svg class='info'><use href='#definition-i-icon'></use></svg>");const h=createMathquillDiv("text",b.title,null,!0);f.callbacks.handleElementAdded?.("definition-step-title",e,b);const m=$("<svg class='expand'><use href='#definition-expand'></use></svg>"),l=$("<svg class='collapse'><use href='#definition-collapse'></use></svg>");
e.append(g).append(h).append(m).append(l);g=b.text.replace(/\\mathrm{([^(}]+)}/ig,function(n,r,t){n=r.split(/\s|\\:/).filter(function(v){return""!==v}).join("}\\:\\mathrm{");r="";0<t&&(r=" ");return r+"\\mathrm{"+n+"} "});g=createMathquillDiv("solution_step_definition_body",g,null,!0);f.callbacks.handleElementAdded?.("definition-step-text",g,b);b=$("<div />",{"class":"solution_step_definition"}).append(e).append(g);b.off("click").on("click",function(){$(this).toggleClass("expanded");const n=$(".solution_step_definition_body",
this);mathquillifyVisible(n);n.mathquill("redraw")});a.append(b)}createSolutionBoxContentUl2(a,b,f){const e=$('<div class="solution_step_list"></div>');this.renderSteps("createSolutionBoxContentUl2",a,b,e,f);return e}getTitleContainer(a,b,f){let e=0;this.isToLock(a)||(e=f.stepsArrayIndex,f.stepsArray[f.stepsArrayIndex]=a,f.stepsHighestBox[f.stepsArrayIndex]=b,f.stepsArrayIndex++);a=$("<div></div>",{"data-index":e});b?a.addClass("solution_title_container_highest"):a.addClass("solution_title_container");
return a}isToLock(a,b){return a.isLocked&&!b.subscribed}makeStepByStepSolution(a,b){a.inStepByStep=!0;$(".ul-div",b).remove();this.populateStepByStep(a,b)}populateStepByStep(a,b){const f=this;a.steps=getFixedStepsFormatAPI(a.stepsObject.solution.steps.steps);a.stepIndex=0;$("#step-by-step-container",b).show();const e=$("#next-step-button",b);e.off("click").on("click",function(){const g=$(this).closest("#step-by-step-container");f.nextStep(a,g)});$("#next-step-button .text",b).html(i18n("Get a hint")+
"&nbsp;<b>"+(a.stepIndex+1)+"</b> / "+a.steps.length);e.show()}nextStep(a,b){const f=$("#step-by-step-steps",b),e=$("#next-step-button .text",b),g=$("#next-step-button",b),h=a.steps;a.stepIndex<h.length&&(f.append(this.createStepListItem(h[a.stepIndex],a,b)),$("#step-by-step-steps .mathquill-embedded-latex:not(.mathquill-rendered-math)",b).mathquill());a.stepIndex++;a.stepIndex<h.length?(e.html(i18n("Next Hint")+"&nbsp;<b>"+(a.stepIndex+1)+"</b> / "+h.length),g.show()):(a.callbacks.hintsComplete?.(),
g.hide());this.getAHint(a)}createStepListItem(a,b,f){f=$('<li class=" "></li>');switch(a.type){case "interim":a=this.createSolutionBoxContent(a,!1,b);f.append(a);b.addMathquillifyVisible(a);break;case "step":this.populateStepListItem(f,a);break;case "definition":this.writeDefinition(f,a,b)}return f}populateStepListItem(a,b){void 0!==b.image&&setTimeout(function(){SyNumberLine.fromInStepImageUrl(a,$("blank"),b.image)},0);if(void 0!==b.steps)for(let e in b.steps){var f=b.steps[e];f.isInterimStep?(f=
this.createSolutionBox(f),a.append(f)):(this.populateStepListItem(a,f),null==f.result&&e<b.steps.length-1&&a.append("<br/>"))}b.primary&&a.append(createMathquillDiv("solution_step_primary",b.primary,null,!0));b.secondary&&b.secondary.forEach(function(e){a.append(createMathquillDiv("solution_step_secondary",e,null,!0))});void 0!==b.result&&a.append(createMathquillDiv("solution_step_result",b.result))}getAHint(a){let b="";"challenge"===a.config.stepsSettings?b="Challenge\t":"stepByStep"===a.config.stepsSettings&&
(b="OneStepAtTime\t");a.callbacks.logFunnel("ClickedFeature",b+"Next")}}function getMethodAndTitleTemplate(){return`<div id="steps-title-container">
            <div class="title-or-methods">
                <h2 class="steps-title">${i18n("solution steps")}</h2>
                <div id="methods-container" class="hide">
                    <div id="methods">
                        <span>${i18n("Solve by:")}</span>
                        <div class="group-select-container">
                            <div class="group-select">
                                <select id="methods-target" class="groupSelect">
            
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="steps-button" class="print-hide">
                <svg class="closed" role="button">
                    <use href="#toggle-full-keypad"></use>
                </svg>
                <svg class="open" role="button">
                    <use href="#toggle-full-keypad-open"></use>
                </svg>
                
                <span>${i18n("one step at a time")}</span>
            </div>
        </div>`}function getStepsTemplate(a,b,f){return'<div id="steps-container">\n        <section id="multipleSolutions"></section>'+(!f.config.isMobile&&a?'<a id="practice-link-container" class="hide print-hide" href="'+a+'">\n            <img src=\'/public/images/practice_icon1.png\' alt="Practice"/> <span class="text">'+i18n("Practice link title",b)+"</span>\n        </a>":"")+"</div>"}
function getStepByStepTemplate(){return'<div id="step-by-step-container">\n\t\t\t\t<div id="step-by-step-steps"></div>\n\t\t\t\t<div id="next-step-button-container">\n\t\t\t\t\t<div id="next-step-button" role="button">\n\t\t\t\t\t\t<span class="text"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>'}
function getUnlockMessageTemplate(a,b){a=b?i18n("Steps & AI Chat"):i18n("show steps");const f=Math.floor(3*Math.random())+(b?3:1),e=i18n("Unlock Solution Steps"),g=i18n("Get full access to all solution steps for any math problem");return`<div class="unlock-steps-message print-hide">
			<svg><use href="#unlock-steps-${f}"></use></svg>
			<div class="unlock-title">${e}</div>
			<div class="unlock-message">${g}</div>
			<button class="unlock-go-pro ${3===f&&b?"with-image":""}">
				<span>${a}</span>
				<svg><use href="#unlock-steps-on-button"></use></svg>
			</button>
		</div>`}function getTopicToSend(a){return`${a?.solutionObject?.solution?.solution?.subject}\t${a?.solutionObject?.solution?.solution?.topic}\t${a?.solutionObject?.solution?.solution?.subTopic}t${a?.solutionObject?.solution?.solution?.interimType}`}
class Dym{render(a,b){const f=a.alternatives;if(!f||0===f.length)return null;const e=$(getDymTemplate()),g=e.find("#dym-target");f.forEach(function(h){const m=createMathquillDiv("dymQuery",h.display,null,!0);encodeURIComponent(h.symbolab_question);var l=encodeURIComponent(h.display);const n=h.origin??"dym";l=$("<a />",{"class":"dymQueryLink",href:l+"?or="+n});l.on("click",()=>{searchInitiatedLog(h.display,n)});l.append(m);g.append(l)});b.addMathquillifyVisible(e,"dym");b.callbacks.handleElementAdded?.("dym",
e,a.alternatives);return e}verifyRender(a,b,f){const e=$("#dym-align-width #dym-result"),g=a.alternatives;if(!g||0===g.length)return null;g.forEach(function(m){const l=createMathquillDiv("dym-result-text",m.display.replaceAll(" ","\\:"),null,!0);var n=encodeURIComponent(m.symbolab_question);let r=m.origin??"dym",t=encodeURIComponent(m.display);void 0!==b&&void 0!==f&&(t="/verify/problem="+t+"__"+n+"/answer="+encodeURIComponent(f),r="verifyPage_"+r);1===g.length?window.location.href=t+"?or="+r:(n=
$("<a />",{"class":"dymQueryLink",href:t+"?or="+r}),l.mathquill(),n.append(l),e.append(n),console.log("!!!height "+n.height),n.on("click",()=>{searchInitiatedLog(m.display,r)}))});if(1!==g.length){$("#dym-close").on("click",()=>{$("#dym-floating-background").addClass("hide-important")});$("#dym-floating-background").removeClass("hide-important");$("#dym-floating-background").on("click",function(m){$(m.target).is($(this))&&$("#dym-floating-background").addClass("hide-important")});var h=0;$(".dymQueryLink").each(function(){let m=
$(this).outerHeight();m>h&&(h=m)});$(".dymQueryLink").each(function(){$(this).css("height",h+"px")});$(".dymQueryLink:first").css({"background-color":"#f2f0f0"})}}}function getDymTemplate(){return`<h2>${i18n("Solve instead")}</h2>
    <div id="dym-scroll">
        <div id="dym-target" class="solution_box solution_outside_box box_no_background dym"></div>
    </div>`}
class Related{render(a,b){const f=$("<ul />",{id:"relatedList","class":"solution-examples"});this.addRelatedProblems(f,a.related,0,3);b.addMathquillifyVisible(f,"related");b.callbacks.handleElementAdded?.("related",f,a.related);return f}addRelatedProblems(a,b,f,e){const g=this;if(b&&0<b.length){$("#related").show();for($("#bar-Related").show();f<b.length&&f<e;f++){let m=b[f];var h=encodeURIComponent(m.display);const l=m.origin??"related";h=h+"?or="+l;let n=m.display.replace(/ /g,"\\:");n=prepareQueryForMathQuill(n);
h=$(this.getRelatedTemplate(h,n));$("a",h).on("click",()=>{searchInitiatedLog(m.display,l)});a.append(h)}b.length>e?(f=$('<li class="more-li"><a><span class="more">'+i18n("Show More")+"</span></a></li>"),f.on("click",function(){g.addRelatedProblems(a,b,e,100)}),a.append(f)):a.find(".more-li").remove()}mathquillifyVisible(a)}getRelatedTemplate(a,b){return`<li>
                    <a href="${a}">
                        ${createMathquillDiv("",b.replaceAll("\\:"," "),null,!0).html()}
                        <span class="related_arrow">
                            <svg><use href="#red-full-arrow-svg"></use></svg>
                        </span>
                    </a>
                </li>`}}
class Plot{render(a,b,f){const e=$("<div />");let g=a??b?.solution?.plot_output?.meta?.plotInfo;f.showPlot=!1;if(g)if(a=g.plotRequest,""===a)f.showPlot=!1,f.plottingFailed=!0;else if(a){"yes"===a&&b&&(a=b.solution.query.display);e.append($(this.getTemplate(!0)));f.showPlot=!0;const h=e.find("#sy_graph");f.addPostRenderStep(m=>{f.syPlot=new SyPlot(h,g,this.getPlotSettings(!0,!0))},"plot");f.callbacks.requestPlot?.(a)}else{e.empty();e.append($(this.getTemplate(!1)));const h=e.find("#sy_graph");f.showPlot=
!0;f.addPostRenderStep(l=>{f.syPlot=new SyPlot(h,g,this.getPlotSettings(!0,!0));if(isMobile)f.syPlot.graphJQ.on("mousedown touchstart",function(n){setTimeout(function(){let [r,t]=f.syPlot.getPointFromEvent(n);f.syPlot.checkMove(r,t)},200)})},"plot");b=e.find(".plotText");b.show();b=b.find(".plotTextTarget").empty();a=this.getPlotTitle(g);b.append(createMathquillSpan(null,a));let m;f.solutionObject.solution.plot_output.meta.showViewLarger&&(m=f.solutionObject.solution.query.display,"System of Inequalities"===
f.solutionObject.solution.solution.topic&&(m=m.replace(/,/g,";")));m?(m=m.replace(/ /g,"\\:"),m=encodeURI(m),m=m.replace(/\+/g,"%2B"),m=m.replace(/&/g,"%26"),e.find(".viewLargerPlot").attr("href","/graphing-calculator?or="+SYMBOLAB.params.or+"&functions="+m)):e.find(".viewLargerPlot").hide();f.addMathquillifyVisible(e,"plot");f.callbacks.plotComplete?.()}else f.callbacks.plotComplete?.();return e}getPlotTitle(a){let b="";if(a&&a.functionChanges&&a.functionChanges[0]&&(a=a.functionChanges[0],b=a.plotTitle,
a.paramsLatex&&a.paramsLatex.length)){b+="\\quad\\mathrm{"+i18n("plot assuming")+"}";for(let f=0;f<a.paramsLatex.length;f++)b+="\\quad ",b+=a.paramsLatex[f],b+="=",b+=a.paramsReplacementsLatex[f]}return b}getPlotSettings(a,b){return{showZoom:a,pixelRatio:window.devicePixelRatio,lineWidth:2,allowTouch:b}}getTemplate(a){return`<div id="plot"> </div>
                <div class="solution_box solution_outside_box">
                    <div class="plot-title-and-expand">
                        <h2>${i18n("plot")}</h2>
                        <div id="show-hide-plot-div" class="expanded print-hide">
                            <svg class='expand'><use href='#graph-expand'></use></svg>
                            <svg class='collapse'><use href='#graph-collapse'></use></svg>
                        </div>
                    </div>
                    <div class="entire-plot">
                        <div class="plotText">`+(a?"":`<span class="plotting">${i18n("plotting")}:&nbsp;&nbsp;</span>`)+'<span class="plotTextTarget"></span>\n                        </div>\n                        <div class="bare-plot-container">\n                            <div id="plot-loading" style="display: none;"><img src="/public/img/ajax-loader.gif"/></div>\n                            <canvas id="sy_graph">Sorry, your browser does not support this application</canvas>'+(a?'<div id="plot_spin"></div>':
"")+`</div>
                        <div>
                            <a class="print-hide viewLargerPlot" rel="nofollow"><svg><use href="#gc-icon"></use></svg>${i18n("View interactive graph0")}</a>
                        </div>
                    </div>
                </div>`}}
class ChallengeLink{render(a,b){const f=a.similar;b.config.challenge=f;if(!f||b.eitherStepByStepOrChallenge())return $("<div />");a=$(this.getTemplate());a.find("#challenge-button").off("click").on("click",function(){b.callbacks.challengeClicked?.(f)});a.find("#challenge-subscribe .subscribe-button").off("click").on("click",function(){b.callbacks.challengeSubscribeClicked?.()});b.logFunnel("SeenFeature","Challenge");return a}getTemplate(){return'<div id="challenge-container">\n                <div id="challenge-button">\n                    <div id="challenge-text">'+i18n("Take a challenge!")+
'</div>\n                    <svg>\n                        <use href="#challenge-icon"></use>\n                    </svg>\n                </div>\n                <div id="challenge-subscribe" class="hide">\n                    <div id="challenge-subscription">\n                        <span>'+i18n("Take a challenge!")+'</span>\n                        <svg class="close">\n                            <use href="#close-white-svg"></use>\n                        </svg>\n                    </div>\n                    <div id="subscribe-before-verify">\n                        '+
i18n("Subscribe to take a challenge")+'\n                    </div>\n                    <div class="subscribe-button" role="button">\n                        '+i18n("Subscribe")+"\n                    </div>\n                </div>\n            </div>"}}
class AiChatPane{constructor(a,b,f,e,g){this.logFunnel=a;this.userName=f;this.query=e;this.showUpgrade=b;this.conversationId=URL.createObjectURL(new Blob([])).split("/").pop();this.rootContainer=$(".ai-chat-pane-container");this.root=$("#ai-chat-pane",this.root);this.input=$(".ai-input input",this.root);this.inputButton=$(".ai-input button.input-button",this.root);this.stopButton=$(".ai-input button.stop-button",this.root);this.mainContent=$(".main-content",this.root);this.expandButton=$(".expand-button",
this.root);this.aiChatPaneHeader=$("#ai-chat-pane header");this.shrinkButton=$(".shrink-button",this.root);this.adsSpace=$(".ads_space",this.root);this.questionNumber=0;this.firstMassage=!0;this.pendingEventChatButton=[];this.SYSTEPS=new SymbolabSteps;this.maxHight=500;this.mainContent.empty();const h=async()=>{const l=this.input.val().trim();this.input.val("");0===l.length?this.addMessage("bubble chatbot",i18n("Please ask a question")):(this.logFunnel("ClickedFeature","Chat\tQuestion\t"+l),await this.sendRequest(l,
!1))};this.inputButton.on("click",h);this.input.on("keyup",async l=>{13===l.keyCode&&await h()});this.stopButton.on("click",async()=>{this.stop();this.mainContent.find(".message:last-child").find(".waiting").parent().remove()});const m=$("#right-section");this.shrinkButton.addClass("hide");this.aiChatPaneHeader.on("click",l=>{if(null===l.target.closest(".tooltip-container"))if(!this.shrinkButton.hasClass("hide")&&this.expandButton.hasClass("hide")){if(this.shrinkButton.addClass("hide"),this.expandButton.removeClass("hide"),
this.root.removeClass("expanded"),m.removeClass("always-on-top"),isMobile){l=this.maxHight;var n=2.6*(parseFloat(this.adsSpace.css("margin"))||0);this.root.animate({height:`${.13*l+3*n}px`},{duration:500,easing:"swing"})}}else this.expandButton.addClass("hide"),this.shrinkButton.removeClass("hide"),this.root.addClass("expanded"),m.addClass("always-on-top"),isMobile?(l=this.maxHight,n=2.6*(parseFloat(this.adsSpace.css("margin"))||0),this.root.animate({height:l+n},{duration:500,easing:"swing"}),this.logFunnel("ClickedFeature",
"Chat\tOpen"),this.pendingEventChatButton!==[]&&(this.pendingEventChatButton.forEach(r=>{this.logFunnel("SeenFeature","Chat\tButton\t"+r)}),this.pendingEventChatButton=[])):this.logFunnel("ClickedFeature","Chat\tExpand")});this.network=void 0!==g?g:new AiChatPaneNetwork;this.network.setup(l=>this.handleCommand(l),()=>this.requestComplete(),(l,n,r)=>this.requestError(l,n,r));$(document).on("click","#mobile-adhesion-close",()=>{this.adsSpace.addClass("hide");this.adsSpace.css("margin",0);this.root.css("height",
`${this.root.height()-50}px`)})}show(a,b,f,e,g){this.gptData=a;this.methodDisplay=b;this.methodQuestion=f;isMobile?this.firstMassage||this.aiChatPaneHeader.click():(this.rootContainer.addClass("visible"),this.shrinkButton.addClass("hide"),this.expandButton.removeClass("hide"));this.enableInput(!1);this.solutionObject=e;this.stepsObject=g;this.network.stop();this.addWaitingMessage();setTimeout(async()=>{await this.network.send("init",this.prepareMessageData({conversationId:this.conversationId,gptData:this.gptData,
query:this.query,methodDisplay:this.methodDisplay,methodQuestion:this.methodQuestion,dataInitializer:this.createDataInitializer(this.solutionObject,isMobile?!0:this.stepsObject)}))},500)}mobileAnimateBounceAndInitMessage(){this.root.css("height","0%");$(".disclaimer",this.root).hide();void 0;this.root.css({transition:"height 500ms ease-in-out",height:"37%"});setTimeout(()=>{let a=2.6*(parseFloat(this.adsSpace.css("margin"))||0),b=.065*this.maxHight+a;this.root.css({transition:"height 300ms ease-in-out",
height:b});setTimeout(()=>{a=2.6*(parseFloat(this.adsSpace.css("margin"))||0);b=.13*this.maxHight+a;this.root.css({transition:"height 300ms ease-in-out",height:b})},300);this.shrinkButton.addClass("hide");this.expandButton.removeClass("hide");$(".disclaimer",this.root).show();this.mainContent.find(".message").remove();this.network.send("init",this.prepareMessageData({conversationId:this.conversationId,gptData:this.gptData,query:this.query,methodDisplay:this.methodDisplay,methodQuestion:this.methodQuestion,
dataInitializer:this.createDataInitializer(this.solutionObject,this.stepsObject)}))},800)}addMessage(a,b,f,e,g){void 0===f&&(f=!1);void 0===e&&(e=!1);void 0===g&&(g=!1);e&&(b=b.replaceAll(" ","\\:"));a=$("<div>",{class:`message ${a}`});if(b){const h=$("<span>");h.text(b);b=$("<div>",{class:"pill-content"});b.append(h);a.append(b);e&&h.mathquill();g&&h.addClass("bold-text")}f&&(f=$("<div class='external-link-button'><svg><use href='#no-color-full-arrow-svg'></use></svg></div>"),a.append(f));this.mainContent.append(a);
this.scrollDown();return a}addTextToMessage(a,b){let f=a.children().last();if(0===f.length||"DIV"!==f[0].tagName)f=$("<div>"),a.append(f);let e;"gpt-link"===b.type&&(e=$("<a>",{href:b.attributes.link}),f.append(e));e&&0!==e.length||(e=$("<span>"),f.append(e));let g=e.text(),h=[];const m=b.text.replaceAll("<br/>","\n");for(let l=0;l<m.length;l++){const n=m[l];"\n"===n?(e.text(g),f=$("<div>"),h.push(e),a.append(f),e=$("<span>"),f.append(e),g=""):g+=n}e.text(g);h.push(e);b.attributes.latex&&h.forEach(l=>
{const n=l.text().replaceAll(" ","\\:");l.text(n);l.mathquill()});b.attributes.bold&&h.forEach(l=>{l.addClass("bold-text")});"gpt-link"===b.type&&(e=$("<span>"),f.append(e))}addImageToMessage(a,b){let f=$("<img>",{src:b.text});b.attributes.link&&(b=$("<a>",{href:b.attributes.link}),b.append(f),f=b);a.append(f)}addIFrameToMessage(a,b){let f=$("<iframe>",{src:b.text});b.attributes.link&&(b=$("<a>",{href:b.attributes.link}),b.append(f),f=b);a.append(f)}addUpgradeToMessage(a,b){a.addClass("upgrade");
b=$("<svg><use href='#unlock-steps-1'></use></svg>");a.append(b);b=$("<div>");b.text(1===this.questionNumber?i18n("Chat Subscribe required"):i18n("Chat Continue Subscribe required"));a.append(b);b=$("<button class='upgrade-button'>"+i18n("Upgrade")+"</button>");b.on("click",()=>{this.showUpgrade("Chat\tUpgrade",!1)});a.append(b);this.scrollDown();this.logFunnel("SeenFeature","Chat\tUpgrade")}scrollDown(){this.mainContent&&(this.mainContent[0].scrollTop=this.mainContent[0].scrollHeight)}async sendRequest(a,
b,f){this.enableInput(!1);this.addMessage("bubble user",a,!1,f);this.questionNumber++;this.addWaitingMessage();setTimeout(async()=>{await this.network.send("message",this.prepareMessageData({userMessage:a,conversationId:this.conversationId,gptData:this.gptData,query:this.query,methodDisplay:this.methodDisplay,methodQuestion:this.methodQuestion,isFromPill:b,dataInitializer:this.createDataInitializer(this.solutionObject,this.stepsObject)}))},500)}addWaitingMessage(){const a=this.addMessage("bubble chatbot"),
b=$("<div>",{class:"waiting"}),f=(e,g)=>{const h=$("<span>.</span>");h.css({"animation-delay":`${g}s`});e.append(h)};f(b,0);f(b,.1);f(b,.2);a.append(b);this.scrollDown();return a}handleGptResponse(a){let b=this.mainContent.find(".message:last-child");if(0===b.length||a.attributes.newBubble)"..."===b.text()&&b.remove(),b=this.addWaitingMessage();b.find(".waiting").remove();switch(a.type){case "gpt-image":this.addImageToMessage(b,a);break;case "gpt-iframe":this.addIFrameToMessage(b,a);break;case "gpt-upgrade":this.addUpgradeToMessage(b,
a);break;default:this.addTextToMessage(b,a)}this.scrollDown();isMobile&&this.firstMassage&&(this.firstMassage=!1,this.rootContainer.addClass("visible"),this.logFunnel("SeenFeature","Chat\tOpen"),this.mobileAnimateBounceAndInitMessage())}requestError(a,b,f){200!==a&&(this.handleGptResponse({type:"gpt",text:"I am sorry - something went wrong, please try again...",attributes:{newBubble:!0}}),this.scrollDown(),this.logFunnel("SeenFeature","Chat\tDialogueError\t"+b+"\t"+JSON.stringify(f)))}requestComplete(){this.enableInput(!0)}stop(){this.network.stop();
this.requestComplete()}enableInput(a){this.input.prop("disabled",!a);a?(this.inputButton.removeClass("not-active"),this.stopButton.addClass("not-active")):(this.inputButton.addClass("not-active"),this.stopButton.removeClass("not-active"));this.root.find(".message.button, .message.link").css("pointer-events",a?"all":"none")}handleCommand(a){const b=f=>{a.attributes?.delay?setTimeout(()=>{f()},a.attributes.delay):f()};switch(a.type){case "pill":b(async()=>{let f=this.mainContent.find(".message:last-child");
0!==f.length&&"..."!==f.text()||f.remove();let e=a.text;isMobile?this.expandButton.hasClass("hide")?this.logFunnel("SeenFeature","Chat\tButton\t"+a.text):this.pendingEventChatButton.push(a.text):this.logFunnel("SeenFeature","Chat\tButton\t"+a.text);const g=this.addMessage("user chat-pill",e,a.attributes.link,a.attributes.latex,a.attributes.bold);g.on("click",async()=>{this.logFunnel("ClickedFeature","Chat\tButton\t"+e);if(a.attributes.feedback)showFeedback();else if(a.attributes.link)if("method_change"===
a.attributes.linkType){$("#show-steps-button").click();const h=decodeURIComponent(a.attributes.link);SYSTEPS.methodSelect(h);g.remove();this.addMessage("bubble user",a.text,!1,!1);isMobile&&this.shrinkButton.click()}else window.open(a.attributes.link,"true"===a.attributes.newTab?"_blank":"_self");else g.remove(),await this.sendRequest(a.attributes.data??a.text,!0,a.attributes.latex)})});break;case "prev-pill":b(async()=>{let f=this.mainContent.find(".message.chat-pill:last-child > .pill-content"),
e=a.text;a.attributes.latex&&(e=e.replaceAll(" ","\\:"));const g=$("<span>");g.text(e);f.append(g);a.attributes.latex&&g.mathquill()});break;case "gpt":case "gpt-link":case "gpt-image":case "gpt-iframe":case "gpt-upgrade":this.handleGptResponse(a)}}prepareMessageData(a){null===a.gptData&&delete a.gptData;return a}createDataInitializer(a,b){return{solution:a?.solution?.solution,dym:this.getDym(a),solvingMethods:this.getSolvingMethods(b),related:this.getRelated(b),practice:this.getPractice(b),hasVerify:this.getHasVerify(b),
topicSubtopic:this.getTopicSubtopic(b)}}getDym(a){return a?.alternatives?a.alternatives.map(b=>({display:b.display,msg:b.symbolab_question})):null}getSolvingMethods(a){return null==a?.solution?.methods?null:a.solution.methods.slice(1).map(b=>{let f=b.query.display;f=encodeURIComponent(f).replaceAll("+","%20");return{display:b.method.includes("Solve by")?b.method:"Solve by "+b.method,msg:f}})}getRelated(a){return a?.related?a.related.map(b=>{b=b.display.replaceAll("$$","");const f=encodeURIComponent(b).replace("+",
"%20");return{display:b,msg:f}}):null}getPractice(a){a=a?.solution?.steps?.meta?.practiceLink;if(!a)return null;const b=this.getStringBetween(a,"/practice/","-practice");return b?{practiceMsg:b.replaceAll("-"," "),practiceLink:a}:null}getHasVerify(a){return a?.solution?.meta?.showVerify??!1}getTopicSubtopic(a){return a?.solution?.solution?(a.solution.solution.topic??"")+":"+(a.solution.solution.subTopic??""):null}getStringBetween(a,b,f){const e=a.indexOf(b);f=a.indexOf(f,e+b.length);return-1!==e&&
-1!==f?a.substring(e+b.length,f):null}}
class AiChatPaneNetwork{constructor(){this.lastRequestTimeStamp=void 0}setup(a,b,f){this.onCommand=a;this.onComplete=b;this.onError=f}stop(){this.lastRequestTimeStamp=void 0}async send(a,b){let f=0,e="";const g=Date.now();this.lastRequestTimeStamp=g;const h=m=>{if(200===m.currentTarget?.status&&g===this.lastRequestTimeStamp)for(e=m.currentTarget.response.substring(f);;){m=this.findCommand(e);if(!m)break;e=e.substring(m.length);f+=m.length;this.onCommand?.(m)}};try{await ajax({type:"POST",url:"init"===
a?"/chatInit":"/chatMessage",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",beforeSend:authorizeAjaxWithSyPubToken,xhrFields:{onprogress:h}})}catch(m){if(g===this.lastRequestTimeStamp)this.onError?.(m.status,a,b)}finally{if(g===this.lastRequestTimeStamp)this.onComplete?.()}}decodeXML(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,"'").replace(/&apos;/g,"'")}findCommand(a){a=a.match(/^<(?<type>[a-z\-]*)(?<attrs>.*?)>(?<text>.*?)<\/([a-z\-]*)>/ms);
if(!a)return null;const {type:b,attrs:f,text:e}=a.groups,g=this.decodeXML(e),h={},m=f.matchAll(/(?:\s?(?<attrName>.*?)="(?<attrValue>.*?)")+?/gm);if(m)for(const l of m){const {attrName:n,attrValue:r}=l.groups;h[n]=r}return{type:b,attributes:h,text:g,length:a[0].length}}}const SYSTEPS=new SymbolabSteps,NETWORK=new Network,SCROLLUTILS=new ScrollUtils;let state,challengeState=void 0;const currentElsLint=[],clsManager=new ClsManager;clsManager.stepsRendered=!1;
const shouldShowBundle=clsManager.done=!1,shouldShowBackToSchool=!1;clsManager.register("breadcrumbsPadAndSidebars",a=>{clsManager.show(".nl-pageContent");a.breadcrumbsShown||$(".nl-page").addClass("no-breadcrumbs");$("#all-pads").mathquill("redraw");$("#main-input").mathquill("redraw");$("#top-three-notes").mathquill("redraw")});clsManager.register("solutionRendered",a=>{clsManager.show(".solution_outside_box.box_top");SYSTEPS.postRender(a.state);$("#mathquillQueryInput").mathquill("redraw")});
clsManager.register("stepsRendered",a=>{clsManager.show("#bar-Steps .pill");clsManager.show("#show-hide-steps-divider-surround");clsManager.show("#solution-methods-title-target");clsManager.show("#solution-steps-target");clsManager.show("#dym");clsManager.show("#challenge");SYSTEPS.postRender(a.state,"dym");a.state.showPlot&&(clsManager.showPlot(a.state),SYSTEPS.postRender(state,"plot"),$("#bar-Graph .pill").show(),clsManager.show("#bar-Graph .pill"));clsManager.pageDone(a.state);clsManager.stepsRendered=
!0;0<=state?.solutionObject?.solution?.solution?.topic?.indexOf("Word Problems GPT")?$("#steps-button").addClass("hide-important"):$("#steps-button").removeClass("hide-important")});clsManager.showPlot=a=>{let b=$("#Plot_dynaimc");b.empty().append(a.plotContainer);b.show();clsManager.show("#Plot_dynaimc");setTimeout(function(){SYSTEPS.postRender(a,"plot");"no"===getLocalStorage().getItem("settings.printGraph")&&b.addClass("print-hide")},0)};
clsManager.pageDone=a=>{clsManager.show();a&&(SYSTEPS.postRender(a,"related"),SYSTEPS.postRender(a));a=$("#main-input");a.mathquill("redraw");""===(globalQuery??"").trim()&&""!==a.mathquill("latex")&&a.mathquill("write","",input_back).focus();$("#error").mathquill("redraw");$("#Examples_section .solution-examples").mathquill("redraw");clsManager.done=!0};clsManager.register("noSolutionNeeded",a=>{clsManager.pageDone(a.state)});clsManager.register("stepsFailed",a=>{clsManager.pageDone(a.state)});
function logFunnel(a,b){return symbolab_log("Registration",a,"Solver\t"+b)}function logFunnel2(a,b,f){const e=state?.solutionObject?.solution?.solution?.topic,g=state?.solutionObject?.solution?.solution?.subTopic;b="Solver\t"+b;e&&(b+="\t"+e);g&&(b+="\t"+g);void 0!==f&&(b+="\t"+f);symbolab_log("Registration",a,b)}function scrollLeftMenuItemIntoView(a){setTimeout(()=>{$(a)[0]?.scrollIntoView({behavior:"instant",block:"nearest"});$("html")[0].scrollTop=0},100)}
function showStepsRequested(){void 0!==state&&(state.stepsObject?(renderSteps(state),clsManager.handle("stepsRendered",{state})):($("#show-steps-button").hide(),$("#steps-button-loading").removeClass("hide-important"),state.config.query=state.solutionObject.solution.query.symbolab_question,NETWORK.getSteps(state).done(a=>{state.stepsObject=a;renderSteps(state);$("#steps-button-loading").addClass("hide-important");$("#show-steps-button").show();state.logFunnel("SeenFeature","Chat\tOpen");openAiChatPane(null,
null,null,null);clsManager.handle("stepsRendered",{state})}).fail(a=>{const b=i18n("\\mathrm{Connection\\:error,\\:please\\:try\\:again}");isMobile?($("#error").removeClass("hide-important").addClass("toastError"),toast($("#error"),b)):dialogify().message(b).showOkDialog();$("#steps-button-loading").hide();symbolab_log("Solutions","Communication error in getSteps: "+a.statusText);clsManager.handle("stepsFailed",{state})})))}
function openVerifyRequested(){subscribed?openVerify(!1,!1):($("#verify-subscribe").show(),$("#verify-subscribe .close").off("click").on("click",function(){$("#verify-subscribe").hide()}),$("#challenge-subscribe").hide())}
function openVerify(a,b){const f=$("#codepad-align-width2 .mathquill-editable");b||f.mathquill("latex","");$("#verify-floating-background").removeClass("hide-important");$("#challenge-success").addClass("hide-important");$("#codepad-align-width2").removeClass("codepad-align-width2-shrink");$("#codepad-align-width2-title").removeClass("hide-important");$("#verify-subscribe-challenge").hide();$("#codepad-align-width2").mathquill("redraw");$("#codepad-align-width2 #verify-result").addClass("hide-important");
a?($("#codepad-align-width2 #step-by-step-target").show(),$("#codepad-align-width2 .challenge-header").removeClass("hide-important"),f.mathquill("placeholder",i18n("js.Know the answer? Give it a try"))):(challengeState=void 0,$("#codepad-align-width2 .challenge-header").addClass("hide-important"),$("#codepad-align-width2 #step-by-step-container").hide(),f.mathquill("placeholder","\\mathrm{"+(i18n("Got a different answer?")+" "+i18n("Check if it's correct")).replace(/\s/gi,"\\:")+"}"));SYPAD.activeInputBox=
f;SYSUGGEST=null}
function openChallengeRequested(a){if(void 0!==a)if(subscribed)challengeState=SYSTEPS.createState({origin,language:curLang,query:a.symbolab_question,choices:"",referer,initialQuery:globalQuery,stepsSettings:"challenge",timeout:("undefined"!==typeof frontendTimeout&&frontendTimeout)??0,plotTimeout:("undefined"!==typeof plotFrontendTimeout&&plotFrontendTimeout)??0}),challengeState.callbacks={hintsComplete:function(){challengeState.noMoreHints=!0},logFunnel:function(b,f){logFunnel(b,f,state.config.initialQuery)},
logFunnel2:function(b,f,e){logFunnel2(b,f,e)}},NETWORK.getSteps(challengeState).done(b=>{challengeState.stepsObject=b;challengeState.stepsArrayIndex=0;renderSteps(challengeState,$("#step-by-step-target"));openVerify(!0,!1);$("#codepad-align-width2 .challenge-query-display").html(a.display).mathquill()});else{const b=400<$("#challenge-button")[0].getBoundingClientRect().y;$("#challenge-subscribe").toggleClass("top-placement",b);$("#challenge-subscribe").show();$("#challenge-subscribe .close").off("click").on("click",
function(){$("#challenge-subscribe").hide()});$("#verify-subscribe").hide()}}function getStepsEventData(a,b){var f={},e=void 0===a.solutionObject?a.stepsObject:a.solutionObject;f.type=b;f.success=void 0===e?.error;f.userQuery=a.config.query;f.origin=a.config.origin;f.stdQuery=e?.queryDisplay;e?.solution?.solution&&(f.subject=e.solution.solution.subject,f.topic=e.solution.solution.topic,f.subTopic=e.solution.solution.subTopic);return f}
function renderSteps(a,b){SYSTEPS.renderSteps(a);let f=b??$("#solution-steps-target"),e=b??$("#solution-step-by-step-container");f.empty();e.empty();"showSteps"===a.config.stepsSettings?f.append(a.solutionStepsContainer):e.append(a.solutionStepByStepContainer);b||($("#solution-methods-title-target").empty().append(a.solutionMethodsAndTitleContainer).removeClass("hide-important"),$("#show-steps-button").addClass("hide-important"),$("#show-hide-steps-divider-surround").removeClass("hide-important"),
$("#show-hide-steps-divider").removeClass("hide-important"),$("#step-by-step-container").removeClass("hide-important"));clsManager.done&&SYSTEPS.postRender(a)}function goToDestination(a,b,f){a.preventDefault();a.stopPropagation();goToDestination0($(a.currentTarget),b,f)}
function goToDestination0(a,b,f){currentElsLint.push({curEl:a,hrefDestination:b,isPressedOnTheTitle:f});if(f){if("#arrow_down-svg"===a.next().find("use").attr("href")&&a.parent().hasClass("red_color")){arrowRightClick(a.next());return}if(!a.parent().parent().hasClass("parentPage")){let e=b.replace("/solver/","");NETWORK.getPageData(window.location.host,e,globalQuery).done(g=>{examplesHtml(g.examplesTranslate,e);if(0<a.next().find("use").length)(a.parent().hasClass("nl-leftMenu")&&a.parent().hasClass("red_color")||
0<a.next().find("use").attr("href").indexOf("arrow_right-svg"))&&arrowRightClick(a.next());else{var h=$(".arrow_right use");let m=h.attr("href");h=h.parent().parent();let l=h.parent().parent().find(a);"#arrow_down-svg"===m&&0===l.length&&arrowRightClick(h)}$(".nl-leftMenu.red_color").removeClass("red_color");a.parent().addClass("red_color");replacePage(b,g.translationUrlName,g.title,g.translationUrlName,g.input,g.input_back,g.middle_text,g.faqs,g.studyGuideList,g.blogsExternalLinkInfo,g.pubButtons,
g.breadCrumbs,g.markdown)});return}}if(0<a.find("use").length)if("#arrow_down-svg"===a.find("use").attr("href")||"#arrow_right-svg"===a.find("use").attr("href")&&a.parent().hasClass("red_color"))arrowRightClick(a);else{let e=b.replace("/solver/","");NETWORK.getPageData(window.location.host,e,globalQuery).done(g=>{examplesHtml(g.examplesTranslate,e);arrowRightClick(a);$(".nl-leftMenu.red_color").removeClass("red_color");a.parent().addClass("red_color");replacePage(b,g.translationUrlName,g.title,g.translationUrlName,
g.input,g.input_back,g.middle_text,g.faqs,g.studyGuideList,g.blogsExternalLinkInfo,g.pubButtons,g.breadCrumbs,g.markdown)})}else f=b.replace("/solver/",""),""===f&&(f="step-by-step"),getLocalStorage().setItem("linkOrigin","SolutionLeftMenu"),symbolab_log("Solutions","MenuLeft",page+"=>"+f),window.location.href=b}
function replacePage(a,b,f,e,g,h,m,l,n,r,t,v,z){let u=a.replace("/solver/","");""===u&&(u="step-by-step");symbolab_log("Solutions","MenuLeft",page+"=>"+u);page=a;document.title=f;page_title=e;history.pushState({},document.title,a);symbolab_log("Solutions","Enter",window.location.pathname);""!==globalQuery&&(globalQuery="",$("#Plot_dynaimc").hide(),$("#related").hide(),$("#bar-Related").hide(),$("#dym").hide(),$("#challenge").empty(),$("#solution-step-by-step-container").empty(),$("#all-pads").addClass("on"),
$("#all-pads").mathquill("redraw"));a="";void 0!==g&&(a=anotherHtmlDecode(g));$("#main-input").mathquill("latex","");a&&($("#main-input").mathquill("write",a.replace(/&amp;/g,"&"),h),setTimeout(()=>{$("#main-input").focus()},50));$(".mathquill-editable").mathquill("placeholder","\\mathrm{"+i18n("Enter a Problem").replaceAll(" ","\\:")+"}");$("#solution-only-container").hide();$("#nl-edit-bar").addClass("hide-important");"en"===curLang&&$("#Examples_section .new_solution_box_title").empty().html(b.replace(" Calculator",
"")+" Examples");void 0!==m&&""!==m&&($("#topic-description_body").empty().html(m),$("#topic-description").show());b=$("#FAQPlaceHolders");void 0===l&&void 0===z?b.hide():(b.empty(),void 0!==z&&b.append(`<section id="markdown" class="print-hide">
                    <span>${z}</span>
                </section>`),void 0!==l&&b.append(faqsHtmlCreator(l)),b.show());void 0===n?$("#study-guides-placeholder").hide():$("#study-guides-placeholder").empty().append(studyGuidesHtmlCreator(n)).show();l=blogsHtmlCreator(r);$(".new_solution_box_body").empty().append(l);l=buttonsActionsHtmlCreator(t);$("#MostUsedActions").empty().append(l);for(let D of t)$("#padButton-"+D.translations.en.show.replace(" ","_")).text("\\mathrm{"+D.translations[curLang].show.replace(" ","\\:")+"}").mathquill();
$("#bread-crumbs").html(v)}function faqsHtmlCreator(a){let b='<section id="FAQ" className="print-hide hide-until-loaded"><div>Frequently Asked Questions (FAQ)</div><ul>';for(let f=0;f<a.faqs.length;f++)b+="<li><div>"+a.faqs[f].fst+"</div></li>",b+="<li><span>"+a.faqs[f].snd+"</span></li>";return b+='<li class="show-more-li showing-all"><a><span class="show-more">Show more</span></a></li></ul>'+a.ldJson+"</section>"}
function studyGuidesHtmlCreator(a){let b='\n        <section id="study-guides" class="print-hide hide-until-loaded">\n            <div>Study Guides</div>\n            <ul>';for(const f of a)b+=`
            <li>
                <a class='externalLink embedPost' href='/study-guides/${f.resourceLocation}'>
                    <div>${f.title}</div>
                    <span>${f.snippet}</span>
                </a>
            </li>`;return b+'\n                <li class="show-more-li showing-all"><a><span class="show-more">Show more</span></a></li>\n            </ul>\n        </section>'}function blogsHtmlCreator(a){let b="";for(let f of a)b+="<li><span class='bloggerIcon'></span><div class='post_title'>"+f.title+"</div><div class='post_content'>"+f.shortText+"...</div><a class='externalLink embedPost' href='"+f.url+"' target='_blank'><div class='post_more'>Read More</div></a></li>";return b}
function buttonsActionsHtmlCreator(a){let b="";for(let f of a)b+='<span class="padButton new-pad-button font16" data-append="'+f.translations[curLang].write+'" data-moveleft="'+f.moveBack+'" data-clear="true"><span class="mathquill-embedded-latex" id="padButton-'+f.translations.en.show.replace(" ","_")+'"></span></span>';b+='<span style="position: relative;"><svg class="svg-icon"><use href="#dropdown_arrow"></use></svg><select id="most_used_dropdown"><option>'+i18n("See All")+"</option>";for(let f of a)b+=
'<option data-append="'+f.translations[curLang].write+" data-moveleft="+f.moveBack+'" data-clear="true">'+f.translations[curLang].show+"</option>";return b+"</select></span>"}
function arrowRightClick(a){const b=a.find("use");let f=!1,e=a.parent().next("ul");0<b.attr("href").indexOf("arrow_right-svg")&&(f=!0);a.closest("ul").eq(0).find("ul").hide();a.closest("ul").eq(0).find(".arrow_right svg use").attr("href","#arrow_right-svg");f&&(b.attr("href","#arrow_down-svg"),e.eq(0).removeClass("hide"),e.eq(0).slideToggle(300));openToElement(a,f)}
function openToElement(a,b){$("li").removeClass("open");b=a.closest("li").toggleClass("open",b);for(a=a.closest("li").parent().closest("li");0<a.length;)a.toggleClass("open",!0),a=a.closest("li").parent().closest("li");scrollLeftMenuItemIntoView(b)}function examplesHtml(a,b){let f="";a.forEach(function(e,g){g="";"word-problems-calculator"===b&&(g+="\\mathrm{");g+=e.replaceAll("^\\/.+?\\/","");"word-problems-calculator"===b&&(g+="}");f+=`<li>
            <a href="/solver/${"/"===e.charAt(0)?e.substring(1,e.indexOf("/",1)):b}/${encodeURIComponent(e.replaceAll("^\\/.+?\\/","").replace("\\:"," ")).replace("+","%20")}?or=ex">
                <span class="mathquill-embedded-latex mathquill-rendered-math">`+g+"</span>";-1!=!b.indexOf("problems")&&(f+="<span class='solution-examples-img'>\n                     <svg><use href=\"#red-full-arrow-svg\"></use></svg>\n                 </span>");f+="</a>\n            </li>"});3<a.length&&(f+='<li class="show-more-li showing-all"><button><span class="show-more">'+i18n("Show More")+"</span></button></li>");a=$(f);$(".solution-examples").empty().append(a).find(".mathquill-embedded-latex").mathquill();
logExampleClickEvents();$(".solution-examples .show-more-li button").click(function(){$("#Examples_section .solution-examples > li").addClass("showing-all");$("#Examples_section .solution-examples > li").mathquill("redraw");$(".solution-examples .show-more-li").remove()})}function logExampleClickEvents(){$("#Examples_section li a").on("click",function(){searchInitiatedLog($(this).attr("href"),"ex")})}
$(function(){function a(){var u=localStorage.getItem("qbBannerLastShown");if(u){u=parseInt(u,10);const D=Date.now(),E=window.debugMode&&"true"===window.debugMode?3E5:864E5;return shouldShowBundle&&D-u>E}return!0}function b(){$("#verify-subscribe-challenge").show();$("#verify-subscribe-challenge .close").off("click").on("click",function(){$("#verify-subscribe-challenge").hide()})}function f(u,D,E){if(""!==udid){displayUserNotes||(displayUserNotes=[],userNotes.forEach(function(x,A){3>A&&displayUserNotes.push(x)}));
if(D&&(displayUserNotes=[],userNotes.forEach(function(x,A){3>displayUserNotes.length&&x.display!==u.solutionObject.solution.query.display&&displayUserNotes.push(x)}),E))for(displayUserNotes.unshift({display:u.solutionObject.solution.query.display,question:u.solutionObject.solution.query.symbolab_question,url:encodeURIComponent(u.solutionObject.solution.query.display.replaceAll("\\\\","\\\\").replaceAll("\\s+","\\\\:").replaceAll("^\\/.+?\\/","")).replace("+","%20")});3<displayUserNotes.length;)displayUserNotes.pop();
if(0===displayUserNotes.length)$("#save-as-bookmark").addClass("add-bookmark").css("visibility","visible").show();else{$("#save-as-bookmark").hide();$("#save-as-bookmark").removeClass("add-bookmark");var F=`
						<div id="top-three-notes">
							<div class="new_solution_box_title1">${i18n("Notebook")}</div>
							<ul>`;displayUserNotes.forEach(function(x){let A='\n\t\t\t\t\t\t\t\t<li class="note">\n\t\t\t\t\t\t\t\t\t<a href="/solver/'+(""===x.display?"step-by-step/"+x.problem:"/"===x.display.charAt(0)?x.display.substring(1,x.display.indexOf("/",1)):page)+"/"+x.url+'?or=nb">\n\t\t\t\t\t\t\t\t\t<span class="math-container">\n\t\t\t\t\t\t\t\t\t\t<span class="mathquill-embedded-latex">';A=x.display?A+x.display.replaceAll(" ","\\:"):A+x.problem.replaceAll(" ","\\:");F+=A+'</span></span>\n\t\t\t\t\t\t\t\t\t\t<span class="related_arrow"><svg><use href="#red-full-arrow-svg"></use></svg></span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>'});
F+=`
							</ul>
							<a id="view_full_notebook" href="/notebook">
								<svg>
									<use href="#view_full_notebook-svg"></use>
									<span>${i18n("View Full Notebook")}</span>
								</svg>
							</a>
						</div>`;D=$(F);$("#top-three-notes").removeClass("hide-important").empty().append(D).find(".mathquill-embedded-latex:not(.mathquill-rendered-math)").mathquill()}}}function e(u,D){let E="";switch(u.toLowerCase()){case "challenge":E="&feature=challenge";break;case "verify":E="&feature=verify"}u="Solver\t"+u;state?.solutionObject&&(u+="\t"+state.solutionObject.solution.solution.topic+"\t"+state.solutionObject.solution.solution.subTopic+"\t"+state.solutionObject.solution.solution.interimType);showSignUpSubscribe(u,
"stepsSettings="+state.config.stepsSettings+E,D)}function g(u){void 0===u&&(u=!1);let D=!0;const E=$("#leave-challenge-floating-background");!challengeState||u||challengeState.noMoreHints||challengeState.wasCorrect||(D=!1,E.removeClass("hide-important"),E.off("click").on("click",function(F){$(F.target).is($(this))&&$(this).addClass("hide-important")}),$("#cancel-leaving-challenge").off("click").on("click",function(){E.addClass("hide-important")}),$("#leave-challenge-button").off("click").on("click",
function(){g(!0)}));D&&(challengeState=void 0,$("#verify-floating-background").addClass("hide-important"),E.addClass("hide-important"),SYPAD.activeInputBox=$("#main-input .mathquill-editable"),SYSUGGEST=SYSUGGEST_OBJ)}function h(){function u(x,A,p){x=createMathquillDiv("",x,"problem",!0);x.attr("id",A);p.append(x);mathquillify(x)}clsManager.handle("solution-being-loaded");var D=!isMobile||null!=origin&&("ex"===origin||origin.includes("popular"));state=SYSTEPS.createState({origin,language:curLang,
query:globalQuery,choices:"",referer,initialQuery:globalQuery,isMobile:("undefined"!==typeof isMobile&&isMobile)??!1,timeout:("undefined"!==typeof frontendTimeout&&frontendTimeout)??0,plotTimeout:("undefined"!==typeof plotFrontendTimeout&&plotFrontendTimeout)??0});const E=new URLSearchParams(window.location.search);let F=E.get("stepsSettings");0>["showSteps","hideSteps","stepByStep"].indexOf(F)&&(F=D?"showSteps":"hideSteps");state.config.stepsSettings=F;state.config.requestedFeature=E.get("feature");
E.delete("stepsSettings");E.delete("feature");D=window.location.href.replace(/\?.*$/,"?"+E.toString());history.replaceState({},document.title,D);state.callbacks={logFunnel:function(x,A){logFunnel(x,A,state.config.initialQuery)},logFunnel2:function(x,A,p){logFunnel2(x,A,p)},requestPlot:function(x){state.plotRequest=x;NETWORK.getPlot(state).done(A=>{state.plotInfo=A;SYSTEPS.renderPlot(A,void 0,state);A||(state.plottingFailed=!0);state.plottingFailed?($("#plot_spin").after("<div class='plotting-failed'><span>Hey there, we're really sorry but we couldn't get the graph to work out</span></div>"),
$("#plot_spin").remove()):($("#Plot_dynaimc").empty().append(state.plotContainer),clsManager.stepsRendered&&setTimeout(()=>{SYSTEPS.postRender(state,"plot")},0))})},plotComplete:function(){state.plotReady=!0},showUpgrade(x,A,p){e(x,p)},setNewQuery(x,A,p){void 0===p&&(p=!1);state.config.query=x;p&&(state.config.stepsSettings="showSteps");NETWORK.getSteps(state).done(q=>{state.stepsObject=q;state.stepsArrayIndex=0;renderSteps(state)}).fail(q=>{const w=i18n("\\mathrm{Connection\\:error,\\:please\\:try\\:again}");
isMobile?($("#error").removeClass("hide-important").addClass("toastError"),toast($("#error"),w)):dialogify().message(w).showOkDialog();$("#steps-button-loading").hide();$("#show-steps-button").show();symbolab_log("Solutions","Communication error in getSteps: "+q.statusText)})},challengeClicked:function(x){logFunnel("ClickedFeature","Challenge");openChallengeRequested(x)},challengeSubscribeClicked:function(){e("Challenge")},refreshGraph:function(){state.plotInfo&&state.plotReady&&(SYSTEPS.renderPlot(state.plotInfo,
void 0,state,!0),$("#Plot_dynaimc").empty().append(state.plotContainer),SYSTEPS.postRender(state,"plot"))},openAiChatPane:(x,A,p,q)=>{openAiChatPane(x,A,p,q)}};NETWORK.getSolution(state).then(x=>{let A=Promise.resolve();"External Solutions"===x?.solution?.solution?.subject&&(A=m());A.then(()=>{state.solutionObject=x;$("#query_spin").remove();if(void 0!==x.error)isMobile&&u(x.solution.query.display,"mathquillQueryInput",$(".solution_scrollable")),$("#error").removeClass("hide-important"),u(x.error.message,
"",$("#error")),clsManager.handle("noSolutionNeeded",{state});else{var p=state.solutionObject.solution.solution.subject??"";p.toLowerCase().includes("word problem")&&$(".nl-page").addClass("word-problems");p.toLowerCase().includes("external solution")&&$("#solution-only-container").addClass("external-step-ai");u(x.solution.query.display,"mathquillQueryInput",$(".solution_scrollable"));SYSTEPS.renderSolution(state);SYSTEPS.renderDym(state);SYSTEPS.renderRelated(state);SYSTEPS.renderChallengeLink(state);
SYSTEPS.renderPlot(void 0,x,state);$("#solution-only-target").empty().append(state.solutionContainer);p=$("#dym");state.dymContainer?(p.removeClass("empty"),p.empty().append(state.dymContainer)):p.addClass("empty");$("#relatedBox").empty().append(state.relatedContainer);$("#challenge").empty().append(state.challengeLinkContainer).removeClass("hide-important");x.isInNotebook&&$("#bar-bookmark").addClass("has-note");$("#bar-bookmark").show();x.solution.meta?.showVerify&&$("#verify-btn").show();$("#show-steps-button").removeClass("hide-important");
clsManager.handle("solutionRendered",{state});isMobile&&(p=$(window).width()-$("#mathquillQueryInput").width()-95,$("#pencil_area").width(0<p?p:0));state.stepsArrayIndex=0;if(state.config.stepsSettings)switch(state.config.stepsSettings){case "showSteps":case "stepByStep":showStepsRequested();$("#solution-only h2").off("click").on("click",function(){$("#show-steps-button").hasClass("hide-important")||(logFunnel("ClickedFeature","StepsToggle\tShow"),state.config.stepsSettings="showSteps",showStepsRequested())});
break;case "hideSteps":clsManager.handle("stepsRendered",{state})}if(state.config.requestedFeature)switch(state.config.requestedFeature){case "verify":openVerifyRequested();break;case "challenge":openChallengeRequested(state.config.challenge)}isMobile&&openAiChatPane(null,null,state.solutionObject.solution.query.display,null,!0)}},p=>{const q=i18n("\\mathrm{Connection\\:error,\\:please\\:try\\:again}");isMobile?toast($("#toast"),q):dialogify().message(q).showOkDialog();$("#query_spin").remove();symbolab_log("Solutions",
"Communication error in getSolution: "+p.statusText)})})}async function m(){const u=document.createElement("link");u.rel="stylesheet";u.href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css";u.integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET";u.crossOrigin="anonymous";u.async=!1;document.body.appendChild(u);await loadScriptAsync("https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js");await loadScriptAsync("https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/auto-render.min.js");
return Promise.resolve()}SYMBOLAB=new Symbolab("fe",globalQuery,curLang);SYPAD=new SymbolabPad(curLang);SYSUGGEST_OBJ=new SymbolabEquationSuggest(!0);SYSUGGEST=null;var l=$("#main-input");SYPAD.activeInputBox=l;var n=window.validPlans;shouldShowBundle||(n=n.filter(function(u){return"b_annually"!==u.type}));try{if(shouldShowBackToSchool&&!subscribed&&a()&&shouldShowBackToSchool){$(".prom-banner-holder").show();$(".prom-banner-close-btn").off("click").on("click",function(){$(".prom-banner-holder").hide();
localStorage.setItem("qbBannerLastShown",Date.now().toString())});try{$("#prom_banner_title").text(i18n("prom-banner-title-var4",30)),$("#prom_banner_subtitle").text(i18n("prom-banner-subtitle-var4",30)),$("#prom-claim-discount-btn").text(i18n("get-off-now-var4",30))}catch(u){console.error(u)}}}catch(u){console.error(u)}if(shouldShowBundle&&n&&(n=n.filter((u,D)=>"b_annually"===u.type))&&0<n.length){n=n[0];$(".qb-modal-text").html(i18n("qb_modal_text"));$(".qb-text-percentage").text(n.percentage);
$(".qb-text-price").text(`$${n.promoPrice}`);$("#qb-modal-old-price").text(`$${n.fullPrice}`);$("#qb-modal-discount-price").text(`$${n.promoPrice}`);try{$("#qb-banner-title").text(i18n("qb-banner-title-var2",n.percentage)),$("#qb-banner-subtitle").text(i18n("qb-banner-subtitle-var2",n.percentage)),$("#qb-claim-discount-btn").text(i18n("qb-banner-btn-text-var2",n.percentage))}catch(u){console.error(u)}}try{shouldShowBundle&&(!subscribed&&a()?(symbolab_log("Registration","SeenFeature","Solver\tQBBundle"),
$(".qb-banner-holder").show(),$("#ext-download-btn-button-info").hide(),$(".ext-icon-align-wrapper").hide(),$(".free-trial-pane").hide()):$(".qb-banner-holder").hide())}catch(u){console.error(u)}$("#qb-banner-close-btn").off("click").on("click",function(){$(".qb-banner-holder").hide();$("#ext-download-btn-button-info").show();$(".ext-icon-align-wrapper").show();sendCTAPadEvent();localStorage.setItem("qbBannerLastShown",Date.now().toString())});const r=$("#qb-modal"),t=$("#qb-modal-backdrop");shouldShowBundle&&
sy_var?!subscribed&&a()&&symbolab_log("Registration","SeenFeature","Solver\tQBBundle"):(r.addClass("hidden"),t.addClass("hidden"));$("#qb-claim-discount-btn").off("click").on("click",function(){symbolab_log("Registration","ClickedFeature","Solver\tQBBundle");r.removeClass("hidden");t.removeClass("hidden")});$("#qb-modal-close-btn").off("click").on("click",function(){r.addClass("hidden");t.addClass("hidden")});$("#qb-modal-go-back-btn").off("click").on("click",function(){r.addClass("hidden");t.addClass("hidden")});
$("#qb-purchase-bundle-btn").off("click").on("click",function(){showSignUp("qbbundle",void 0,{plantype:"b_annually"})});$("#prom-claim-discount-btn").off("click").on("click",()=>{showSignUp("promo",void 0,void 0)});$(".mathquill-editable").addClass("nl-disabled");$(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable");$(".mathquill-editable").mathquill("placeholder","\\mathrm{"+i18n("Enter a Problem").replaceAll(" ","\\:")+"}");input&&!globalQuery&&(l.mathquill("write",input.replace(/&amp;/g,
"&"),0),l.focus());$(".mathquill-editable").removeClass("nl-disabled");$(".codepad-container").hide();$("#widgetPad").toggleClass("hide");$("#widgetPad").mathquill("redraw");$(".codepad-input").show();$(".toggle-full-pad").show();$("#most_used_actions").show();$("#most_used_actions").mathquill("redraw");$(".codepad-container").mathquill("redraw");$("#CodepadHead .first i").addClass("active");1==getLocalStorage().getItem("beforeSubs")&&getLocalStorage().removeItem("beforeSubs");$("#verify-input").mathquill("placeholder",
i18n("Different answer"));$(".codepad-input").show();$("#most_used_actions").show();$("#most_used_actions").mathquill("redraw");$("#verify-subscribe .subscribe-button").off("click").on("click",function(){e("Verify")});$("#verify-subscribe-challenge .subscribe-button").off("click").on("click",function(){e("Challenge")});$("body").on("focus blur","#main-input-verify",function(){subscribed?(SYPAD.activeInputBox=$(this),SYSUGGEST=null):b()});let v=void 0;const z=$(".menu-tooltip");$("body").on("mousemove",
u=>{u=$(u.target).closest(".leftMenu:not(.open) > ul > li.parentPage");var D=u.find("a:not(.arrow_left");if(1===u.length){z.text(D.data("left-menu-tooltip"));z.show();D=z.outerHeight();const E=u.offset(),F=u.outerWidth();u=u.outerHeight();z.css({left:E.left+F-15,top:E.top+(u-D)/2});clearTimeout(v);v=setTimeout(()=>{z.fadeOut()},1E3)}});$("#main-input-verify").on("click",function(){subscribed||b()});$("body").on("focus blur","#main-input",function(){SYPAD.activeInputBox=$(this);SYSUGGEST=SYSUGGEST_OBJ});
window.location.href.includes("/solver")&&$(".googleAdsense").height();$(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable");$(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox");$(function(){function u(y){y?($(".m2u li").parent().addClass("foldable"),$(".m2u li").addClass("foldable"),$(".m2u li a.nl-leftMenu").addClass("hide-subtopic"),$("#nl-topics a a.nl-leftMenu").addClass("hide-subtopic"),$(".m2u li .arrow_left").hide(),$("#nl-topics").removeClass("spase-subtopic"),
$(".leftMenu").removeClass("open"),D(!0)):($(".m2u li").parent().removeClass("foldable"),$(".m2u li").removeClass("foldable"),$(".m2u li a.nl-leftMenu").removeClass("hide-subtopic"),$("#nl-topics a.nl-leftMenu").removeClass("hide-subtopic"),$(".m2u li .arrow_left").show(),$("#nl-topics").addClass("spase-subtopic"),$(".leftMenu").addClass("open"),D(!1));A=$(".nl-leftNav").css("min-width")}function D(y){var G=window.location.pathname.split("/"),H="/"+G[1]+"/"+G[2];G=$('a[href$="'+H+'"].nl-leftMenu');
0===G.length&&(G=$("a span[onclick=\"goToDestination(event, '"+H+"', true);\"]").parent());G.addClass("red_color");y||G.next().show();0<G.length&&y&&void 0!==G.find("svg.page-url").first()[0]&&(G.find("svg.page-url").first()[0].classList=["page-url"]);var I=G.parent();H=I.prevAll(".parentPage").first();$(I).find(".arrow_right svg use").attr("href","#arrow_down-svg");$(I).parent().eq(0).removeClass("hide");I.hasClass("parentPage")&&(H=I);0===H.length&&(I=I.parent().parent(),H=I.prevAll(".parentPage").first(),
$(I).find(".arrow_right svg use").attr("href","#arrow_down-svg"),I.hasClass("parentPage")&&(H=I),0===H.length&&(y||I.parent().show(),I=I.parent().parent(),H=I.prevAll(".parentPage").first(),$(I).find(".arrow_right svg use").attr("href","#arrow_down-svg"),I.hasClass("parentPage")&&(H=I)));y||G.next().find(".arrow_right svg use").attr("href","#arrow_right-svg");I=H.find("svg.page-url");y?(H.addClass("red_background"),0<I.length&&(I[0].classList=["page-url white"])):(H.removeClass("red_background"),
0<I.length&&(I[0].classList=["page-url"],y=H.find("span"),0<y.length&&(I[0].classList=["page-url red"],y.addClass("red_color"))));openToElement(G,!0)}function E(y,G){const H=$("#verify-result"),I=$("#verify-result-text");let J="",K=!0;switch(y){case "Correct":I.text(i18n("Correct"));J="correct";break;case "PartialError":I.text(G);J="partial";break;case "LetsTryAgain":I.text(i18n("Let's Try Again"));J="incorrect";break;case "None":K=!1}H.removeClass();H.toggleClass("hide-important",!K);H.addClass(J)}
function F(){if(subscribed){const y=SYPAD.activeInputBox.mathquill("latex");NETWORK.verify(state,challengeState?challengeState.config.query:state.solutionObject.solution.query.symbolab_question,y,void 0).done(G=>{G.correct?(E("Correct"),void 0!==challengeState&&(challengeState.wasCorrect=!0,$(".practice-more-button").toggle(void 0!==state.stepsObject?.solution.steps.meta?.practiceLink),$("#challenge-success").removeClass("hide-important"),$("#codepad-align-width2").addClass("codepad-align-width2-shrink"),
$("#codepad-align-width2-title").addClass("hide-important"),$("#step-by-step-target").hide())):(openVerify(challengeState,!0),G.partial_error?E("PartialError",G.partial_error):"401"!==G.errorId&&E("LetsTryAgain"))}).fail(G=>{const H=i18n("\\mathrm{Connection\\:error,\\:please\\:try\\:again}");isMobile?($("#next-step-button-container").addClass("toastError"),toast($("#next-step-button-container"),H)):dialogify().message(H).showOkDialog();$("#steps-button-loading").hide();symbolab_log("Solutions","Communication error in verify: "+
G.statusText)})}else b()}function x(){const y=new URL(window.location.href);y.pathname.lastIndexOf("/");const G=y.pathname.split("/"),H=G.pop();y.pathname=G.join("/")+"/query="+H;window.location.href=y.toString()}f(void 0,!1);$(".nl-topics svg").show();$(".leftMenu").show();$(".leftMenu svg").show();$(".arrow_left1").show();var A=$(".nl-leftNav").css("min-width");window.addEventListener("resize",function(y){y.target&&0<$(y.target).closest(".ad-container.html").length||(y=$(".nl-leftNav").css("min-width"),
A!==y&&(A=y,"72px"===y?$(".m2u li").hasClass("foldable")||($(".leftMenu").css("width","72px"),u(!0)):$(".m2u li").hasClass("foldable")&&($(".leftMenu").css("width","256px"),u(!1))))},!0);1280<$("html").outerWidth()?u(!1):u(!0);$("#show-steps-button").off("click").on("click",function(){logFunnel("ClickedFeature","StepsToggle\tShow");state.config.stepsSettings="showSteps";isMobile&&!subscribed&&"browser"!==readCookie("sy2.open-in")?showOpenInPanel():showStepsRequested()});var p=$("body");let q=globalQuery;
if(isMobile&&q.startsWith("query=")){var w=q.substring(q.indexOf("query=")+6);w=w.replaceAll(" ","\\:");$("#main-input").mathquill("latex",w).focus();$("#input-camera").hide();q=""}""===q?($("#all-pads").mathquill("redraw"),$("#solution-only-container").hide()):($("#nl-edit-bar").removeClass("hide-important"),"72px"!==$(".nl-leftNav").css("min-width")&&u(!0),q=prepareQueryForMathQuill(q),isMobile||$("#main-input").mathquill("latex",q));$(".add-bookmark").off("click").on("click",function(){$("#verify-subscribe").hide();
if(""===udid)$("#notebook-sign-in").show(),$("#close-bookmark").off("click").on("click",function(){$("#notebook-sign-in").hide()});else{const y=$(this);if(isUserLoggedIn())if(y.hasClass("has-note"))$.when(NETWORK.deleteNote(state.solutionObject.solution.query.symbolab_question)).done(function(){y.removeClass("has-note");f(state,!0,!1);symbolab_log("Solutions","FavoriteDelete",state.solutionObject.solution.query.symbolab_question)});else if(0===userNotes.length&&""===q){let G=$("#empty_bookmark");
G.show();setTimeout(function(){G.hide()},2E3)}else{const G=NETWORK.saveNote(state.solutionObject.solution.query.symbolab_question,state.solutionObject.solution.query.display,state.solutionObject.solution.solution.topic,"Solutions");$.when(G).done(function(H){(H=H.response)&&""!==H&&subscribed?showPointOfInterest("#bar-bookmark",H,{onDismiss:function(){}}):H&&""!==H?createUpgradeTooltip("#bar-bookmark","SolverSaveNote",H):(y.addClass("has-note"),f(state,!0,!0))})}else createSignupTooltip("#bar-bookmark",
"SolverSaveNote",i18n("to save notes and more"))}""!==q&&symbolab_log("Solutions","SaveClicked",null,!1,state.solutionObject.solution.query.symbolab_question)});p.off("click",".show-hide-steps-surround-box").on("click",".show-hide-steps-surround-box",function(){$("#show-hide-steps-divider").click()});p.off("click","#show-hide-steps-divider").on("click","#show-hide-steps-divider",function(){state.stepsArrayIndex=0;logFunnel("ClickedFeature","StepsToggle\tHide");$("#show-steps-button").removeClass("hide-important");
$("#steps-container").hide();$("#show-hide-steps-divider-surround").addClass("hide-important");$("#show-hide-steps-divider").addClass("hide-important");$("#step-by-step-container").addClass("hide-important");$("#solution-methods-title-target").addClass("hide-important")});p.off("click","#show-hide-plot-div").on("click","#show-hide-plot-div",function(){$(this).toggleClass("expanded");$(".entire-plot").toggle()});"72px"===$(".nl-leftNav").css("min-width")?u(!0):""===q&&($(".m2u li a span").removeClass("hide-subtopic"),
$("#nl-topics span").removeClass("hide-subtopic"),$(".nl-leftMenu span.arrow_right").show());p.off("click","#nl-topics svg").on("click","#nl-topics svg",function(){let y=!$(".m2u li a.nl-leftMenu").hasClass("hide-subtopic");y?$(".leftMenu").css("width","72px"):$(".leftMenu").css("width","256px");u(y)});p.off("click","#verify-btn").on("click","#verify-btn",function(y){$("#notebook-sign-in").hide();state.logFunnel("ClickedFeature","Verify");openVerifyRequested()});$("#codepad-close").off("click").on("click",
function(){g()});p.off("click",".btnVerify").on("click",".btnVerify",function(){F()});$("#main-input-verify").keyup(function(y){"Enter"===y.key&&F()});$("#verify-floating-background").on("click",function(y){$(y.target).is($(this))&&g()});p.off("click","#solution-methods-title-target #steps-button").on("click","#solution-methods-title-target #steps-button",function(){const y=$(this).hasClass("active");logFunnel("ClickedFeature","OneStepAtTime");state.config.stepsSettings=y?"showSteps":"stepByStep";
state.stepsArrayIndex=0;renderSteps(state)});p.off("click",".practice-more-button").on("click",".practice-more-button",function(){const y=state.stepsObject?.solution.steps.meta?.practiceLink;y&&(window.location.href=y)});$("#pencil").off("click").on("click",()=>x());$("#pencil_area").off("click").on("click",()=>x());w=window.location.pathname;p=$('a[href$="'+w+'"].nl-leftMenu');0===p.length&&(p=$("a span[onclick=\"goToDestination(event, '"+w+"', false);\"]").parent());p.addClass("red_color");if(0<
p.length&&(w=p.find(".pointer"),0<w.length&&currentElsLint.push({curEl:w,hrefDestination:window.location.pathname,isPressedOnTheTitle:!0}),!$(".m2u li a.nl-leftMenu").hasClass("hide-subtopic"))){p.find(".arrow_right");0<p.find("svg.page-url").length&&(p.find("svg.page-url").first()[0].classList=["page-url red"]);var B=p.parent();w=B.prevAll(".parentPage").first();B.hasClass("parentPage")&&(w=B);0===w.length&&(B=B.parent().parent(),w=B.prevAll(".parentPage").first(),B.hasClass("parentPage")&&(w=B),
0===w.length&&(B=B.parent().parent(),w=B.prevAll(".parentPage").first(),B.hasClass("parentPage")&&(w=B)));B=w.find("svg.page-url");let y=!0;0===p.length&&(y=!1);y&&(w=w.find("span"),0<w.length&&(B[0].classList=["page-url red"],w.addClass("red_color")))}p=p.parent().parent().prev();w=$(p).next("ul");$(p).find(".arrow_right svg use").attr("href","#arrow_down-svg");w.eq(0).removeClass("hide");p=p.parent().parent().prev();0!==p.length&&(w=$(p).next("ul"),$(p).find(".arrow_right svg use").attr("href",
"#arrow_down-svg"),w.eq(0).removeClass("hide"),p=p.parent().parent().prev(),0!==p.length&&(w=$(p).next("ul"),$(p).find(".arrow_right svg use").attr("href","#arrow_down-svg"),w.eq(0).removeClass("hide")));$(".solution-examples .show-more-li button").click(function(){$("#Examples_section .solution-examples > li").addClass("showing-all");$("#Examples_section .solution-examples > li").mathquill("redraw");$(".solution-examples .show-more-li").remove()});$("#nl-edit-bar .nl-edit-bar-links a").click(function(){$(".bar-selected").removeClass("bar-selected");
$(this).addClass("bar-selected")});0===$("#related .relatedList li").length&&$("#bar-Related").hide();""===q&&$("#topic-description").show();$("#Examples_section .new_solution_box_title").click(function(y){$("html, body").animate({scrollTop:$("#Examples").offset().top},800);$("#Examples_section .show-more").click()});$("#related .new_solution_box_title").click(function(y){$("html, body").animate({scrollTop:$("#related_anchor").offset().top},800)});let C;window.addEventListener("resize",function(){clearTimeout(C);
C=setTimeout(function(){state?.callbacks?.refreshGraph?.()},200)},!1);window.addEventListener("popstate",y=>{1<currentElsLint.length&&(console.log("drop "+currentElsLint.pop()),y=currentElsLint.pop(),goToDestination0(y.curEl,y.hrefDestination,y.isPressedOnTheTitle))});clsManager.handle("breadcrumbsPadAndSidebars",{breadcrumbsShown:!0});""===q?(clsManager.handle("noSolutionNeeded",{state}),""!==$("#main-input").mathquill("latex")&&$("#scan-to-solve-and-decoration").hide()):h()});l=u=>{isMobile||dynamicLoadingManager.get("dynamic-codepad").then(()=>
{SYPAD.toggleFullPad();$(u).click()})};n=window.location.pathname;n.includes("solver/chemi")&&l(".pad-toolbar-chemistry");n.includes("solver/scientific-calculator")&&l(".pad-toolbar-calculator");(n.includes("solver/matrix")||n.includes("solver/vector")||n.includes("solver/orthogonal-projection")||n.includes("solver/gram-schmidt")||n.includes("solver/linear-algebra"))&&l(".pad-toolbar-matrix");logExampleClickEvents()});
function toast(a,b){a.text(b).fadeIn();setTimeout(function(){a.fadeOut()},3E3)}
function showOpenInPanel(){$("#open-in-section").removeClass("hide");setTimeout(()=>{$("#open-in-section").addClass("show");state.logFunnel("SeenFeature",`Panel\t${browserName}`)},100);$("#open-in-section .app-button.primary").off("click").on("click",()=>{createCookie("sy2.open-in","app",1);state.logFunnel("OpenStore","Panel\tApp");$("#open-in-section").addClass("hide");let a;if(isIOS)a=new URL("https://symbolab.com"),a.pathname=location.pathname,a.searchParams.append("deeplink","true");else{a=new URL("https://symbolab.onelink.me/Jjg6/yaqb685x");
const b=globalQuery.replace(/\s/g,"\\:");a.searchParams.append("query",b)}window.location=a.toString()});$("#open-in-section .app-button:not(.primary)").off("click").on("click",()=>{createCookie("sy2.open-in","browser",1);state.logFunnel("ClickedFeature",`Panel\t${browserName}`);$("#open-in-section").removeClass("show");showStepsRequested();setTimeout(()=>{$("#open-in-section").addClass("hide")},500)})}let aiChatPane=null,lastButtonPressed=null;
function openAiChatPane(a,b,f,e){if(null!==e){if(e.is(lastButtonPressed))return;lastButtonPressed&&lastButtonPressed.parent().removeClass("open");lastButtonPressed=e;e.parent().addClass("open");state.logFunnel("ClickedFeature","Chat\tStepIcon")}aiChatPane||=new AiChatPane((g,h)=>state.logFunnel(g,h),(g,h)=>state.showUpgrade(g,h),firstName,state.solutionObject.solution.query.display);void 0===state.stepsObject?NETWORK.getSteps(state).done(g=>{state.stepsObject=g;state.stepsArrayIndex=0;g=state.stepsObject.solution.methods?.[0]?.query;
aiChatPane.show(a,g?.display,g?.symbolab_question,state.solutionObject,state.stepsObject)}):(b=null!==f?f:state.stepsObject.solution.methods?.[0]?.query,aiChatPane.show(a,b?.display,b?.symbolab_question,state.solutionObject,state.stepsObject))}$(document).ready(()=>{$("body").off("click",".nl-leftMenu.hide-subtopic").on("click",".nl-leftMenu.hide-subtopic",a=>{a.preventDefault();a=$(a.currentTarget).attr("href");getLocalStorage().setItem("linkOrigin","SolutionLeftMenu");window.location=a})});
function DynamicLoadingPromiseCompletionSource(){let a,b;return{promise:new Promise((f,e)=>{a=f;b=e}),resolve:a,reject:b}}class DynamicLoadingManager{constructor(){this.promises={}}deferRawHtml(a,b,f){this.promises[a]=new DynamicLoadingPromiseCompletionSource;$(document).ready(()=>{$(f).load(b,()=>{$(f).find(".mathquill-embedded-latex:not(.mathquill-rendered-math)").mathquill();this.promises[a]?.resolve()})})}get(a){return this.promises[a]?.promise}}const dynamicLoadingManager=new DynamicLoadingManager;
"use strict";
(function(){function a(){const f={title:null,headerTemplate:null,template:"<div>DIALOG</div>",headerTemplateId:null,templateId:null,dialogId:null,className:null,standard:!1,parent:null,dialogCloseHandler:()=>!0,attachHandler:null,dialogElement:null,message:"",okButtonText:i18n("OK"),cancelButtonText:i18n("Cancel"),yesButtonText:i18n("Yes"),noButtonText:i18n("No"),image:void 0,passwordPrompt:void 0,okButtonHandler:()=>{f.close()},cancelButtonHandler:()=>{f.close()},yesButtonHandler:()=>{f.close()},
noButtonHandler:()=>{f.close()},build:function(){const e=$("<header>").append('\n                    <div class="header-content-container"></div>                    \n                    <div class="controls">\n                        <button class="close">\n                            <svg><use href="#x-close-img"></use></svg>\n                        </button>\n                    </div>\n                ');this.title?e.find("div.header-content-container").append(this.title):this.headerTemplate&&
e.find("div.header-content-container").append(this.headerTemplate);const g=$("<div>",{"class":"dialog-main"});g.append(e);g.append(this.template);return g},setup:function(){const e=["dialogify",this.className].filter(g=>g).join(" ");this.dialogElement=$("<dialog>",{class:e});(this.templateId||this.dialogId)&&this.dialogElement.attr("id",this.dialogId??this.templateId);this.dialogElement.append(this.build());(this.parent??document.body).appendChild(this.dialogElement[0]);this.dialogElement[0].showModal();
this.attachHandler?.(this);this.dialogElement[0].addEventListener("cancel",g=>{g.preventDefault();this.close()});this.dialogElement.find("header .controls button.close").on("click",()=>{this.cancelButtonHandler(f.close)});this.standard&&(this.dialogElement.find(".dialog-content .buttons-panel button.ok").on("click",()=>{this.okButtonHandler(f.close)}),this.dialogElement.find(".dialog-content .buttons-panel button.cancel").on("click",()=>{this.cancelButtonHandler(f.close)}),this.dialogElement.find(".dialog-content .buttons-panel button.yes").on("click",
()=>{this.yesButtonHandler(f.close)}),this.dialogElement.find(".dialog-content .buttons-panel button.no").on("click",()=>{this.noButtonHandler(f.close)}))},close:function(){f.dialogCloseHandler()&&(f.dialogElement[0].close(),f.dialogElement[0].remove())},standardTemplate:function(e){this.className=(this.className??"")+" standard";this.standard=!0;var g=f.image?`
                            <div class="image">
                                <svg>
                                    <use href="${f.image}"></use>
                                </svg>
                            </div>`:"";var h=f.message?`
                        <div class="message">
                            <div>${f.message}</div>
                        </div>`:"";var m=f.passwordPrompt?`
                            <div class="prompt">
                                <label for="#dialogify-prompt">${f.passwordPrompt}</label>
                                <input id="dialogify-prompt" type="password">
                            </div>`:"";return`
                    <div class="dialog-content">
                        ${g}
                        ${h}
                        ${m}
                        <div class="buttons-panel">
                            ${(()=>{switch(e){case "ok":return`
                            <div class="one-button">
                                <button class="ok">${f.okButtonText}</button>
                            </div>
                        `;case "ok-cancel":return`
                            <div class="two-buttons">
                                <button class="ok primary">${f.okButtonText}</button>
                                <button class="cancel">${f.cancelButtonText}</button>                        
                            </div>                        
                        `;case "yes-no":return`
                            <div class="two-buttons">
                                <button class="ok primary">${f.yesButtonText}</button>
                                <button class="cancel">${f.noButtonText}</button>                        
                            </div>                        
                        `;case "yes-no-cancel":return`
                            <div class="three-buttons">
                                <button class="yes primary">${f.yesButtonText}</button>
                                <button class="no">${f.noButtonText}</button>                        
                                <button class="cancel">${f.cancelButtonText}</button>
                            </div>                        
                        `}})()}
                        </div>
                    </div>`}};return f}function b(){const f=a();return{parent:function(e){f.parent=e;return this},title:function(e){f.title=e;return this},className:function(e){f.className=e;return this},headerTemplate:function(e){f.headerTemplate=e;return this},headerTemplateId:function(e){f.headerTemplateId=e;f.headerTemplate=document.querySelector(`template#${e}`).content.cloneNode(!0);return this},template:function(e){f.template=e;return this},templateId:function(e){f.templateId=e;f.template=
document.querySelector(`template#${e}`).content.cloneNode(!0);return this},dialogId:function(e){f.dialogId=e;return this},show:function(){f.setup();return this},close:function(){f.close();return this},dialogCloseHandler:function(e){f.dialogCloseHandler=e;return this},attachHandler:function(e){f.attachHandler=e;return this},showOkDialog:function(){f.template=f.standardTemplate("ok");return this.show()},showOkCancelDialog:function(){f.template=f.standardTemplate("ok-cancel");return this.show()},showYesNoDialog:function(){f.template=
f.standardTemplate("yes-no");return this.show()},showYesNoCancelDialog:function(){f.template=f.standardTemplate("yes-no-cancel");return this.show()},message:function(e){f.message=e;return this},okButtonText:function(e){f.okButtonText=e;return this},cancelButtonText:function(e){f.cancelButtonText=e;return this},yesButtonText:function(e){f.yesButtonText=e;return this},noButtonText:function(e){f.noButtonText=e;return this},okButtonHandler:function(e){f.okButtonHandler=e;return this},cancelButtonHandler:function(e){f.cancelButtonHandler=
e;return this},yesButtonHandler:function(e){f.yesButtonHandler=e;return this},noButtonHandler:function(e){f.noButtonHandler=e;return this},image:function(e){f.image=e;return this},passwordPrompt:function(e){f.passwordPrompt=e;return this}}}$(document).ready(function(){window.dialogify=()=>new b})})();
class PromModalHandler{constructor(a,b,f,e,g){this.modalVersion=a;this.reason=b;this.firstName=f;this.isMobile=e;this.callback=g}async showPromotionModal(){const a=await ajax({url:"/registrationDiscount",dataType:"json"});a&&(console.log("REGISTRATION DISCOUNT",a),2===this.modalVersion?this.showModalV2(a):this.showModal(a))}showModal(a){function b(){$("#prom-modal").addClass("hidden");$("#prom-modal-backdrop").addClass("hidden")}$(".prom-modal-discount-percent").text(a.discountPercent);$(".prom-modal-orig-per-period").text("$"+
a.original.price_per_period);$(".prom-modal-updated-per-period").text("$"+a.updated.price_per_period);$(".prom-modal-per-period").text(a.original.weekly_period?i18n("per week"):i18n("per month"));$(".prom-modal-orig-price").text(a.original.price);$(".prom-modal-updated-price").text("$"+a.updated.price_per_period);$("#prom-modal").removeClass("hidden");$("#prom-modal-backdrop").removeClass("hidden");this.firstName&&$(".prom-modal-title").text(i18n("Name, we have a special offer for you",this.firstName));
$("#prom-modal-close-btn").off("click").on("click",()=>{b()});$(".prom-modal-ok-btn").off("click").on("click",()=>{$("#prom-modal").addClass("hidden");$("#prom-modal-backdrop").addClass("hidden");this.callback(a.updated.type,a.updated.price,a.updated.promo_price,a.updated.discount_price);b()})}showModalV2(a){function b(){$("#prom-modal-v2").addClass("hidden");$("#prom-modal-v2-backdrop").addClass("hidden")}$(".prom-modal-discount-percent").text(a.discountPercent);$(".prom-modal-orig-per-period").text("$"+
a.original.price_per_period);$(".prom-modal-updated-per-period").text("$"+a.updated.price_per_period);$(".prom-modal-per-period").text(a.original.weekly_period?i18n("per week"):i18n("per month"));$(".prom-modal-orig-price").text(a.original.price);$(".prom-modal-updated-price").text("$"+a.updated.discount_price);$("#prom-modal-v2").removeClass("hidden");$("#prom-modal-v2-backdrop").removeClass("hidden");$("#prom-modal-close-btn").off("click").on("click",()=>{b()});$("#prom-modal-go-back-btn").off("click").on("click",
()=>{b()});$(".prom-modal-ok-btn").text(i18n("get-off-now",a.discountPercent));$(".prom-modal-ok-btn").off("click").on("click",()=>{b();this.callback(a.updated.type,a.updated.price,a.updated.promo_price,a.updated.discount_price,a.discountId,a.discountPercent)})}};
